var Ue=Object.defineProperty;var Ve=(t,a,r)=>a in t?Ue(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r;var K=(t,a,r)=>Ve(t,typeof a!="symbol"?a+"":a,r);import{r as m,b as _e,a as J}from"./vendor-DqFL8qPw.js";import{N as ve,u as qe,L as B,B as He,R as ze,a as V}from"./router-Cby2BMk6.js";import{V as T,A as _,R as Ge,H as Je,S as Ye,L as ke,C as E,F as ie,a as H,b as z,c as Qe,M as Xe,D as Ne,P as we,d as ee,e as Te,f as oe,g as ce,h as R,i as Se,j as Ke,k as Ze,U as de,l as De,m as Pe,n as Ce,o as te,p as ue,T as et,q as he,r as ae,s as tt,t as at,u as st,v as rt,O as nt}from"./ui-ComhDs-H.js";import{X as lt,u as O}from"./data-BEr-VgmV.js";import{F as it,f as Ie,s as ot,e as ct}from"./utils-D1IEH3Ga.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();var Me={exports:{}},Y={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dt=m,mt=Symbol.for("react.element"),xt=Symbol.for("react.fragment"),ut=Object.prototype.hasOwnProperty,ht=dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gt={key:!0,ref:!0,__self:!0,__source:!0};function $e(t,a,r){var n,l={},c=null,d=null;r!==void 0&&(c=""+r),a.key!==void 0&&(c=""+a.key),a.ref!==void 0&&(d=a.ref);for(n in a)ut.call(a,n)&&!gt.hasOwnProperty(n)&&(l[n]=a[n]);if(t&&t.defaultProps)for(n in a=t.defaultProps,a)l[n]===void 0&&(l[n]=a[n]);return{$$typeof:mt,type:t,key:c,ref:d,props:l,_owner:ht.current}}Y.Fragment=xt;Y.jsx=$e;Y.jsxs=$e;Me.exports=Y;var e=Me.exports,se={},ge=_e;se.createRoot=ge.createRoot,se.hydrateRoot=ge.hydrateRoot;const Ae=m.createContext(),pt=()=>{const t=m.useContext(Ae);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},yt=({children:t})=>{const[a,r]=m.useState(()=>{const l=localStorage.getItem("theme");return l?l==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});m.useEffect(()=>{const l=window.document.documentElement;a?l.classList.add("dark"):l.classList.remove("dark"),localStorage.setItem("theme",a?"dark":"light")},[a]);const n=()=>{r(!a)};return e.jsx(Ae.Provider,{value:{isDark:a,toggleTheme:n},children:t})},j=new lt("TechWriterDB");j.version(4).stores({timeBlocks:"++id, date, type, contentType, workPhase, startTime, endTime, projectId, projectName, projectTeam",projects:"++id, name, team, status, contentType, version, lastUpdated, maintenanceStatus, createdAt",weeklySummaries:"++id, weekStart, weekEnd, createdAt",preferences:"key, value",activeTimers:"++id, startTime, type, projectId, projectName, projectTeam, description, contentType, status"});const bt=async t=>{let a="Unknown Project",r="";if(t.projectId)try{const n=await j.projects.get(parseInt(t.projectId));n&&(a=n.name,r=n.team)}catch(n){console.error("Error fetching project details:",n)}return await j.timeBlocks.add({...t,projectName:a,projectTeam:r,createdAt:new Date().toISOString()})},jt=async t=>await j.projects.add({...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),pe=async(t,a)=>await j.projects.update(t,{...a,updatedAt:new Date().toISOString()}),ft=async t=>{let a="Unknown Project",r="";if(t.projectId)try{const n=await j.projects.get(parseInt(t.projectId));n&&(a=n.name,r=n.team)}catch(n){console.error("Error fetching project details:",n)}return await j.activeTimers.add({...t,projectName:a,projectTeam:r,createdAt:new Date().toISOString()})},ye=async(t,a)=>await j.activeTimers.update(t,a),vt=async()=>await j.activeTimers.toArray(),kt=async t=>{const a=await j.activeTimers.get(t);if(a){const r=new Date().toISOString(),n=Math.floor((new Date(r)-new Date(a.startTime))/1e3/60);return await bt({type:a.type,projectId:a.projectId,projectName:a.projectName,projectTeam:a.projectTeam,description:a.description,contentType:a.contentType,date:a.startTime,startTime:a.startTime,endTime:r,duration:n,status:"completed"}),await j.activeTimers.delete(t),{duration:n,endTime:r}}},Nt=async()=>{try{const t=await j.timeBlocks.toArray(),a=await j.projects.toArray();console.log(`Migrating ${t.length} time blocks...`);for(const r of t)if(r.projectId&&!r.projectName){const n=a.find(l=>l.id===parseInt(r.projectId));n&&(await j.timeBlocks.update(r.id,{projectName:n.name,projectTeam:n.team}),console.log(`Updated time block ${r.id} with project name: ${n.name}`))}console.log("Migration completed successfully")}catch(t){console.error("Migration failed:",t)}},Ee=m.createContext(),me=()=>{const t=m.useContext(Ee);if(!t)throw new Error("useTimer must be used within a TimerProvider");return t},wt=({children:t})=>{const[a,r]=m.useState(Date.now()),n=O(()=>vt(),[]);m.useEffect(()=>{const x=setInterval(()=>{r(Date.now())},1e3);return()=>clearInterval(x)},[]);const l=m.useCallback(x=>{const g=new Date(x).getTime();return Math.floor((a-g)/1e3)},[a]),c=m.useCallback(async(x,g,b,k)=>{try{const v=new Date().toISOString(),N=await ft({type:x,projectId:g,description:b,contentType:k,startTime:v,status:"active"});return T.success(`Started ${x} timer`),N}catch(v){throw T.error("Failed to start timer"),v}},[]),d=m.useCallback(async x=>{try{const g=await kt(x);return T.success(`Timer stopped! Duration: ${Math.floor(g.duration/60)}h ${g.duration%60}m`),g}catch(g){throw T.error("Failed to stop timer"),g}},[]),f=m.useCallback(async x=>{try{await ye(x,{status:"paused"}),T.success("Timer paused")}catch(g){throw T.error("Failed to pause timer"),g}},[]),i=m.useCallback(async x=>{try{await ye(x,{status:"active"}),T.success("Timer resumed")}catch(g){throw T.error("Failed to resume timer"),g}},[]),o=m.useCallback(x=>{const g=l(x),b=Math.floor(g/3600),k=Math.floor(g%3600/60),v=g%60;return b>0?`${b}:${k.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`:`${k}:${v.toString().padStart(2,"0")}`},[l]),u={activeTimers:n||[],currentTime:a,startTimer:c,stopTimer:d,pauseTimer:f,resumeTimer:i,getElapsedTime:l,getFormattedElapsedTime:o};return e.jsx(Ee.Provider,{value:u,children:t})};class $ extends J.Component{constructor(r){super(r);K(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});K(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,n){this.setState({error:r,errorInfo:n}),console.error("Error caught by boundary:",r,n)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 dark:from-dark-900 dark:via-dark-800 dark:to-indigo-950 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white/80 dark:bg-dark-800/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 dark:border-dark-700/50 p-8 text-center",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl shadow-lg mb-6 mx-auto w-fit",children:e.jsx(_,{className:"w-12 h-12 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:this.props.fallbackMessage||"An unexpected error occurred while loading this component."}),!1,e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:this.handleReset,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors duration-300",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{children:"Try Again"})]}),e.jsxs("button",{onClick:()=>window.location.href="/technical-writer-dashboard/",className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-gray-600 text-white rounded-xl font-semibold hover:bg-gray-700 transition-colors duration-300",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{children:"Go Home"})]})]}),e.jsx("button",{onClick:this.handleReload,className:"mt-4 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:"Or reload the entire page"})]})}):this.props.children}}const Oe=async()=>{try{const t=await j.timeBlocks.toArray(),a=await j.projects.toArray(),r=await j.weeklySummaries.toArray(),n=await j.preferences.toArray(),l={version:"1.0",exportDate:new Date().toISOString(),data:{timeBlocks:t,projects:a,weeklySummaries:r,preferences:n}},c=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),d=`techwriter-backup-${new Date().toISOString().split("T")[0]}.json`;it.saveAs(c,d),localStorage.setItem("lastBackupDate",new Date().toISOString()),T.success("Data exported successfully!")}catch(t){T.error("Export failed: "+t.message)}},Tt=async t=>{try{const a=await t.text(),r=JSON.parse(a);if(!r.version||!r.data)throw new Error("Invalid backup file format");if(!window.confirm("This will replace all existing data. Are you sure you want to continue?"))return;await j.timeBlocks.clear(),await j.projects.clear(),await j.weeklySummaries.clear(),await j.preferences.clear(),r.data.timeBlocks&&await j.timeBlocks.bulkAdd(r.data.timeBlocks),r.data.projects&&await j.projects.bulkAdd(r.data.projects),r.data.weeklySummaries&&await j.weeklySummaries.bulkAdd(r.data.weeklySummaries),r.data.preferences&&await j.preferences.bulkAdd(r.data.preferences),T.success("Data imported successfully!"),setTimeout(()=>window.location.reload(),1e3)}catch(a){T.error("Import failed: "+a.message)}},St=()=>{const{isDark:t,toggleTheme:a}=pt(),r=[{to:"/",icon:ke,label:"Dashboard"},{to:"/time",icon:E,label:"Time Tracking"},{to:"/projects",icon:ie,label:"Projects"},{to:"/weekly",icon:H,label:"Weekly Summary"},{to:"/settings",icon:z,label:"Settings"}];return e.jsx("nav",{className:"backdrop-blur-md bg-white/80 dark:bg-dark-900/80 border-b border-white/20 dark:border-dark-700/50 sticky top-0 z-50",role:"navigation","aria-label":"Main navigation",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex items-center justify-between h-20",children:[e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-primary-500 to-purple-600 rounded-xl",children:e.jsx(Ye,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold gradient-text",children:"TechWriter"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium tracking-wider",children:"DASHBOARD"})]})]}),e.jsx("div",{className:"hidden md:flex space-x-2",children:r.map(n=>e.jsxs(ve,{to:n.to,className:({isActive:l})=>`nav-link flex items-center space-x-2 text-sm font-medium ${l?"active":""}`,"aria-label":`Navigate to ${n.label}`,children:[e.jsx(n.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden lg:inline",children:n.label})]},n.to))})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:a,className:"relative p-3 rounded-xl bg-white/50 dark:bg-dark-700/50 backdrop-blur-sm border border-white/30 dark:border-dark-600/30 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-all duration-300 hover:scale-110 hover:shadow-lg group",title:t?"Switch to light mode":"Switch to dark mode","aria-label":t?"Switch to light mode":"Switch to dark mode",children:e.jsxs("div",{className:"relative w-5 h-5",children:[e.jsx(Qe,{className:`absolute inset-0 w-5 h-5 transition-all duration-300 ${t?"rotate-90 scale-0 opacity-0":"rotate-0 scale-100 opacity-100"}`}),e.jsx(Xe,{className:`absolute inset-0 w-5 h-5 transition-all duration-300 ${t?"rotate-0 scale-100 opacity-100":"-rotate-90 scale-0 opacity-0"}`})]})}),e.jsxs("button",{onClick:Oe,className:"flex items-center space-x-2 px-4 py-3 bg-white/50 dark:bg-dark-700/50 backdrop-blur-sm border border-white/30 dark:border-dark-600/30 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 rounded-xl text-sm font-medium transition-all duration-300 hover:scale-105 hover:shadow-lg","aria-label":"Export data backup",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Backup"})]})]})]})})})},Dt=()=>{const t=qe(),a=[{to:"/",icon:ke,label:"Dashboard"},{to:"/time",icon:E,label:"Time"},{to:"/projects",icon:ie,label:"Projects"},{to:"/weekly",icon:H,label:"Weekly"},{to:"/settings",icon:z,label:"Settings"}];return e.jsx("nav",{className:"mobile-nav",role:"navigation","aria-label":"Mobile navigation",children:e.jsx("div",{className:"flex justify-around",children:a.map(r=>{const n=t.pathname===r.to;return e.jsxs(ve,{to:r.to,className:`mobile-nav-item ${n?"active":""}`,"aria-label":`Navigate to ${r.label}`,children:[e.jsx(r.icon,{className:"w-5 h-5 mb-1"}),e.jsx("span",{children:r.label})]},r.to)})})})},U=[{value:"api-docs",label:"API Documentation",icon:"🔌",color:"blue"},{value:"user-guides",label:"User Guides",icon:"📖",color:"green"},{value:"release-notes",label:"Release Notes",icon:"📋",color:"purple"},{value:"tutorials",label:"Tutorials",icon:"🎓",color:"yellow"},{value:"technical-specs",label:"Technical Specifications",icon:"⚙️",color:"gray"},{value:"reference",label:"Reference Documentation",icon:"📚",color:"indigo"},{value:"troubleshooting",label:"Troubleshooting Guides",icon:"🔧",color:"red"},{value:"onboarding",label:"Onboarding Materials",icon:"🚀",color:"teal"},{value:"other",label:"Other Documentation",icon:"📄",color:"gray"}],re=[{value:"research",label:"Research & Discovery",icon:"🔍",color:"blue"},{value:"writing",label:"Writing & Creation",icon:"✍️",color:"green"},{value:"review-editing",label:"Review & Editing",icon:"📝",color:"yellow"},{value:"version-updates",label:"Version Updates",icon:"🔄",color:"purple"},{value:"publishing",label:"Publishing & Distribution",icon:"📤",color:"indigo"},{value:"maintenance",label:"Maintenance & Updates",icon:"🛠️",color:"orange"}],ne=[{value:"draft-1",label:"Draft v1 (Initial)",color:"gray"},{value:"draft-2",label:"Draft v2 (Technical Review)",color:"blue"},{value:"draft-3",label:"Draft v3 (Stakeholder Review)",color:"yellow"},{value:"draft-final",label:"Draft (Final Edits)",color:"orange"},{value:"published-1-0",label:"Published v1.0",color:"green"},{value:"update-minor",label:"Update in Progress (Minor)",color:"purple"},{value:"update-major",label:"Major Revision in Progress",color:"red"},{value:"deprecated",label:"Deprecated",color:"gray"}],be=[{value:"current",label:"Current (< 3 months)",color:"green",daysThreshold:90},{value:"stale",label:"Stale (3-6 months)",color:"yellow",daysThreshold:180},{value:"outdated",label:"Outdated (6+ months)",color:"orange",daysThreshold:365},{value:"critical",label:"Critical - Needs Urgent Update",color:"red",daysThreshold:null},{value:"deprecated",label:"Deprecated",color:"gray",daysThreshold:null}],q=t=>U.find(a=>a.value===t)||U[U.length-1],xe=t=>re.find(a=>a.value===t)||re[0],Pt=t=>ne.find(a=>a.value===t)||ne[0],Ct=t=>be.find(a=>a.value===t)||be[0],Q=t=>{if(!t)return"critical";const a=Math.floor((new Date-new Date(t))/(1e3*60*60*24));return a<=90?"current":a<=180?"stale":a<=365?"outdated":"critical"},It=()=>{const{activeTimers:t,getFormattedElapsedTime:a,pauseTimer:r,resumeTimer:n,stopTimer:l}=me();return!t||t.length===0?null:e.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-2",children:t.map(c=>{const d=q(c.contentType),f=xe(c.type),i=c.status==="active";return e.jsxs("div",{className:`bg-white dark:bg-dark-800 rounded-lg shadow-lg border-l-4 p-3 min-w-64 ${i?"border-green-500 animate-pulse-soft":"border-yellow-500"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:`w-4 h-4 ${i?"text-green-600":"text-yellow-600"}`}),e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:i?"ACTIVE":"PAUSED"})]}),e.jsxs("div",{className:"flex space-x-1",children:[i?e.jsx("button",{onClick:()=>r(c.id),className:"p-1 text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 rounded",title:"Pause timer",children:e.jsx(we,{className:"w-3 h-3"})}):e.jsx("button",{onClick:()=>n(c.id),className:"p-1 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded",title:"Resume timer",children:e.jsx(ee,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>l(c.id),className:"p-1 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Stop timer",children:e.jsx(Te,{className:"w-3 h-3"})})]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:c.description||`${f.label} - ${d.label}`}),e.jsxs("div",{className:"text-gray-600 dark:text-gray-400 text-xs",children:[d.icon," ",d.label]})]}),e.jsx("div",{className:"mt-2 text-lg font-mono font-bold text-center",children:a(c.startTime)})]},c.id)})})},M=t=>Ie(new Date(t),"MMM d, yyyy"),je=t=>Ie(new Date(t),"h:mm a"),D=t=>{const a=Math.floor(t/60),r=t%60;return a>0?`${a}h ${r}m`:`${r}m`},G=(t=new Date)=>{const a=ot(t,{weekStartsOn:1}),r=ct(t,{weekStartsOn:1});return{start:a,end:r}},S={dashboard:{recentProjects:5,todayTimeBlocks:20,documentationDebt:10},projectsPage:{itemsPerPage:20,maxVisible:100,searchDebounce:300},timeTracker:{recentSessions:50,maxSessionsDisplay:20},weeklyReport:{topProjects:10}},Mt=()=>{const t=O(async()=>{const n=new Date;n.setHours(0,0,0,0);const l=new Date(n);return l.setDate(l.getDate()+1),await j.timeBlocks.where("date").between(n.toISOString(),l.toISOString()).limit(S.dashboard.todayTimeBlocks).reverse().toArray()},[]),a=O(async()=>await j.projects.where("status").notEqual("archived").limit(S.dashboard.recentProjects).reverse().toArray(),[]),r=O(async()=>{const n=await j.projects.where("status").notEqual("archived").toArray(),l=[],c=50;for(let d=0;d<n.length&&l.length<S.dashboard.documentationDebt;d+=c){const f=n.slice(d,d+c);for(const i of f){if(l.length>=S.dashboard.documentationDebt)break;const o=Q(i.lastUpdated);(o==="outdated"||o==="critical")&&l.push({...i,maintenanceStatus:o})}d+c<n.length&&await new Promise(i=>setTimeout(i,0))}return l},[]);return{todayBlocks:t,recentActiveProjects:a,documentationDebt:r}},$t=(t,a=S.timeTracker.recentSessions)=>{var r,n;return O(async()=>t?await j.timeBlocks.where("date").between(t.start.toISOString(),t.end.toISOString()).limit(a).reverse().toArray():[],[(r=t==null?void 0:t.start)==null?void 0:r.toISOString(),(n=t==null?void 0:t.end)==null?void 0:n.toISOString(),a])},fe=({size:t="medium",color:a="primary",text:r=null})=>{const n={small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12"},l={primary:"border-primary-600",white:"border-white",gray:"border-gray-600"};return e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[e.jsx("div",{className:`
          ${n[t]} 
          border-2 
          ${l[a]} 
          border-t-transparent 
          rounded-full 
          animate-spin
        `,role:"status","aria-label":"Loading"}),r&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r})]})},At=()=>e.jsxs("div",{className:"card animate-pulse",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded"})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded-full w-20"}),e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded-full w-16"})]}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-24"})]})]}),We=({count:t=3})=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[...Array(t)].map((a,r)=>e.jsx(At,{},r))}),Et=()=>{const{activeTimers:t,getFormattedElapsedTime:a}=me(),[r,n]=m.useState({totalMinutes:0,researchMinutes:0,writingMinutes:0,completedTasks:0}),{todayBlocks:l,recentActiveProjects:c,documentationDebt:d}=Mt(),f=m.useMemo(()=>l?l.reduce((i,o)=>(o.duration&&(i.totalMinutes+=o.duration,o.type==="research"&&(i.researchMinutes+=o.duration),o.type==="writing"&&(i.writingMinutes+=o.duration),o.status==="completed"&&(i.completedTasks+=1)),i),{totalMinutes:0,researchMinutes:0,writingMinutes:0,completedTasks:0}):{totalMinutes:0,researchMinutes:0,writingMinutes:0,completedTasks:0},[l]);return m.useEffect(()=>{n(f)},[f]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:M(new Date)})]}),t&&t.length>0&&e.jsxs("div",{className:"flex items-center space-x-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 px-4 py-2 rounded-lg",children:[e.jsx(E,{className:"w-5 h-5 animate-pulse"}),e.jsxs("span",{children:[t.length," Active Timer",t.length>1?"s":"",": ",a(t[0].startTime)]})]})]}),e.jsxs("div",{className:"responsive-grid lg:grid-cols-4",children:[e.jsx("div",{className:"stat-card group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"responsive-text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Total Time Today"}),e.jsx("p",{className:"text-2xl md:text-3xl font-bold gradient-text mt-2",children:D(r.totalMinutes)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"+12% from yesterday"})]}),e.jsx("div",{className:"stat-icon p-3 md:p-4 bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl shadow-lg",children:e.jsx(E,{className:"w-6 h-6 md:w-8 md:h-8 text-white"})})]})}),e.jsx("div",{className:"stat-card group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Research Time"}),e.jsx("p",{className:"text-3xl font-bold gradient-text mt-2",children:D(r.researchMinutes)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Deep investigation"})]}),e.jsx("div",{className:"stat-icon p-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl shadow-lg",children:e.jsx(oe,{className:"w-8 h-8 text-white"})})]})}),e.jsx("div",{className:"stat-card group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Writing Time"}),e.jsx("p",{className:"text-3xl font-bold gradient-text mt-2",children:D(r.writingMinutes)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Creative flow"})]}),e.jsx("div",{className:"stat-icon p-4 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl shadow-lg",children:e.jsx(ce,{className:"w-8 h-8 text-white"})})]})}),e.jsx("div",{className:"stat-card group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Tasks Completed"}),e.jsx("p",{className:"text-3xl font-bold gradient-text mt-2",children:r.completedTasks}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Great progress!"})]}),e.jsx("div",{className:"stat-icon p-4 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl shadow-lg",children:e.jsx(R,{className:"w-8 h-8 text-white"})})]})})]}),d&&d.length>0&&e.jsxs("div",{className:"debt-alert card border-l-4 border-orange-500 bg-gradient-to-r from-orange-50/80 to-red-50/80 dark:from-orange-900/20 dark:to-red-900/20 backdrop-blur-sm animate-slide-up",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl animate-pulse-soft",children:e.jsx(_,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-orange-800 dark:text-orange-300",children:"Documentation Debt Alert"}),e.jsxs("p",{className:"text-sm text-orange-600 dark:text-orange-400",children:[d.length," document",d.length>1?"s need":" needs"," immediate attention"]})]})]}),e.jsx("div",{className:"space-y-3",children:d.slice(0,3).map((i,o)=>{const u=q(i.contentType),x=Q(i.lastUpdated);return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/80 dark:bg-dark-800/80 backdrop-blur-sm rounded-xl border border-orange-200/50 dark:border-orange-700/30 hover:shadow-lg transition-all duration-300",style:{animationDelay:`${o*100}ms`},children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:u.icon}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:i.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:u.label})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${x==="critical"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300"}`,children:x==="critical"?"🚨 Critical":"⚠️ Outdated"})]},i.id)})}),d.length>3&&e.jsx("div",{className:"mt-4 p-3 bg-white/50 dark:bg-dark-800/50 backdrop-blur-sm rounded-xl border border-orange-200/30 dark:border-orange-700/20",children:e.jsxs("p",{className:"text-sm text-orange-700 dark:text-orange-300 font-medium",children:["📚 +",d.length-3," more documents need updates"]})}),e.jsxs(B,{to:"/projects",className:"btn-primary mt-6 inline-flex items-center space-x-2 glow-effect",children:[e.jsx("span",{children:"Review Documentation Debt"}),e.jsx(_,{className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Today's Time Blocks"}),l===void 0?e.jsx(fe,{text:"Loading time blocks..."}):l&&l.length>0?e.jsx("div",{className:"space-y-2",children:l.map(i=>{const o=xe(i.type),u=q(i.contentType);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-2 h-8 rounded bg-${o.color}-500`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.description||`${o.label} - ${u.label}`}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[u.icon," ",u.label," • ",D(i.duration||0)]})]})]}),i.status==="completed"?e.jsx(R,{className:"w-5 h-5 text-green-500"}):e.jsx(Se,{className:"w-5 h-5 text-yellow-500"})]},i.id)})}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No time blocks recorded yet today."}),e.jsx(B,{to:"/time",className:"mt-4 block text-center btn-primary",children:"Start Time Tracking"})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Projects"}),c===void 0?e.jsx(fe,{text:"Loading projects..."}):c&&c.length>0?e.jsx("div",{className:"space-y-2",children:c.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i.team," • ",i.status]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[i.progress||0,"%"]}),e.jsx("div",{className:"w-20 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary-500 transition-all",style:{width:`${i.progress||0}%`}})})]})]},i.id))}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No recent projects."}),e.jsx(B,{to:"/projects",className:"mt-4 block text-center btn-primary",children:"View All Projects"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(B,{to:"/time",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-dark-700 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:[e.jsx(E,{className:"w-8 h-8 text-primary-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Start Timer"})]}),e.jsxs(B,{to:"/projects",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-dark-700 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:[e.jsx(ie,{className:"w-8 h-8 text-primary-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"New Project"})]}),e.jsxs(B,{to:"/weekly",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-dark-700 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:[e.jsx(H,{className:"w-8 h-8 text-primary-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Weekly Report"})]}),e.jsxs(B,{to:"/settings",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-dark-700 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:[e.jsx(z,{className:"w-8 h-8 text-primary-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Settings"})]})]})]})]})},Be=(t,a=20)=>{const[r,n]=m.useState(1),l=m.useMemo(()=>{if(!t)return{items:[],totalPages:0,hasNextPage:!1,hasPrevPage:!1};const o=(r-1)*a,u=o+a,x=t.slice(o,u),g=Math.ceil(t.length/a);return{items:x,totalPages:g,hasNextPage:r<g,hasPrevPage:r>1,currentPage:r,totalItems:t.length}},[t,r,a]),c=o=>{n(Math.max(1,Math.min(o,l.totalPages)))};return{...l,goToPage:c,nextPage:()=>c(r+1),prevPage:()=>c(r-1),reset:()=>n(1),setCurrentPage:n}},Ot=(t,{threshold:a=100,limit:r=20}={})=>{const[n,l]=m.useState([]),[c,d]=m.useState(!1),[f,i]=m.useState(!0),[o,u]=m.useState(0),[x,g]=m.useState(null),b=m.useCallback(async()=>{if(!(c||!f)){d(!0),g(null);try{const N=await t(o,r);N.length<r&&i(!1),l(I=>o===0?N:[...I,...N]),u(I=>I+1)}catch(N){g(N),console.error("Error loading more data:",N)}finally{d(!1)}}},[t,o,r,c,f]),k=m.useCallback(()=>{l([]),u(0),i(!0),g(null)},[]);m.useEffect(()=>{o===0&&b()},[]);const v=m.useCallback(N=>{const{scrollTop:I,scrollHeight:C,clientHeight:P}=N.target;C-I<=P+a&&b()},[b,a]);return{data:n,loading:c,hasMore:f,error:x,loadMore:b,reset:k,handleScroll:v}},Wt=({items:t,itemHeight:a=100,containerHeight:r=400,renderItem:n,overscan:l=5})=>{const[c,d]=m.useState(0),f=m.useRef(null);if(!t||t.length===0)return e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No items to display"});const i=t.length*a,o=Math.ceil(r/a),u=Math.max(0,Math.floor(c/a)-l),x=Math.min(t.length-1,u+o+l*2),g=t.slice(u,x+1),b=k=>{d(k.target.scrollTop)};return e.jsx("div",{ref:f,className:"overflow-auto",style:{height:r},onScroll:b,children:e.jsx("div",{style:{height:i,position:"relative"},children:e.jsx("div",{style:{transform:`translateY(${u*a}px)`,position:"absolute",top:0,left:0,right:0},children:g.map((k,v)=>e.jsx("div",{style:{height:a},children:n(k,u+v)},u+v))})})})},Re=({currentPage:t,totalPages:a,hasNextPage:r,hasPrevPage:n,onPageChange:l,totalItems:c,itemsPerPage:d=20})=>{if(a<=1)return null;const f=(t-1)*d+1,i=Math.min(t*d,c),u=(()=>{const x=[];let b=Math.max(1,t-Math.floor(2.5)),k=Math.min(a,b+5-1);k-b+1<5&&(b=Math.max(1,k-5+1));for(let v=b;v<=k;v++)x.push(v);return x})();return e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",f," to ",i," of ",c," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>l(t-1),disabled:!n,className:"p-2 rounded-lg border border-gray-300 dark:border-dark-600 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors","aria-label":"Previous page",children:e.jsx(Ke,{className:"w-4 h-4"})}),u[0]>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>l(1),className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-dark-600 hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",children:"1"}),u[0]>2&&e.jsx("span",{className:"text-gray-400",children:"..."})]}),u.map(x=>e.jsx("button",{onClick:()=>l(x),className:`px-3 py-2 rounded-lg border transition-colors ${x===t?"bg-primary-600 text-white border-primary-600":"border-gray-300 dark:border-dark-600 hover:bg-gray-50 dark:hover:bg-dark-700"}`,children:x},x)),u[u.length-1]<a&&e.jsxs(e.Fragment,{children:[u[u.length-1]<a-1&&e.jsx("span",{className:"text-gray-400",children:"..."}),e.jsx("button",{onClick:()=>l(a),className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-dark-600 hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",children:a})]}),e.jsx("button",{onClick:()=>l(t+1),disabled:!r,className:"p-2 rounded-lg border border-gray-300 dark:border-dark-600 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors","aria-label":"Next page",children:e.jsx(Ze,{className:"w-4 h-4"})})]})]})},Z=J.memo(({block:t})=>{const a=xe(t.type),r=q(t.contentType),n=a.value==="research"?oe:a.value==="writing"?ce:a.value==="review-editing"?H:a.value==="version-updates"?de:a.value==="publishing"?De:z;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 bg-${a.color}-100 rounded-lg`,children:J.createElement(n,{className:`w-5 h-5 text-${a.color}-600`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.description||`${a.label} - ${r.label}`}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.icon," ",r.label," • ",je(t.startTime)," - ",t.endTime?je(t.endTime):"In progress"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:D(t.duration||0)}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.label})]})]})}),Bt=()=>{const{activeTimers:t,startTimer:a,stopTimer:r,pauseTimer:n,resumeTimer:l,getFormattedElapsedTime:c}=me(),[d,f]=m.useState("writing"),[i,o]=m.useState("user-guides"),[u,x]=m.useState(""),[g,b]=m.useState(""),[k,v]=m.useState(!1),N=O(()=>j.projects.where("status").notEqual("archived").limit(50).toArray(),[]),I=m.useMemo(()=>{const h=new Date;h.setHours(0,0,0,0);const F=new Date(h);return F.setDate(F.getDate()+1),{start:h,end:F}},[]),C=$t(I,S.timeTracker.maxSessionsDisplay),P=Be(C||[],S.timeTracker.maxSessionsDisplay),L=async(h,F)=>{const Fe=h*F,X=new Date;return X.setDate(X.getDate()-1),await j.timeBlocks.where("date").below(X.toISOString()).reverse().offset(Fe).limit(F).toArray()},{data:A,loading:W,hasMore:p,error:s,handleScroll:y}=Ot(L,{threshold:100,limit:S.timeTracker.recentSessions}),w=re.map(h=>({value:h.value,label:h.label,icon:h.value==="research"?oe:h.value==="writing"?ce:h.value==="review-editing"?H:h.value==="version-updates"?de:h.value==="publishing"?De:z,color:h.color})),Le=async()=>{if(!u){T.error("Please select a project");return}if(!g.trim()){T.error("Please provide a task description");return}try{await a(d,u,g,i),b("")}catch(h){console.error("Failed to start timer:",h)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Time Tracking"}),e.jsx("div",{className:"card text-center",children:t&&t.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-6xl font-mono font-bold text-gray-900 dark:text-gray-100 mb-4",children:c(t[0].startTime)}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:t[0].description||`${t[0].type} - ${t[0].contentType}`}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[t[0].status==="active"?e.jsxs("button",{onClick:()=>n(t[0].id),className:"btn-secondary flex items-center space-x-2",children:[e.jsx(we,{className:"w-5 h-5"}),e.jsx("span",{children:"Pause"})]}):e.jsxs("button",{onClick:()=>l(t[0].id),className:"btn-primary flex items-center space-x-2",children:[e.jsx(ee,{className:"w-5 h-5"}),e.jsx("span",{children:"Resume"})]}),e.jsxs("button",{onClick:()=>r(t[0].id),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200 font-medium flex items-center space-x-2",children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("span",{children:"Stop"})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-6xl font-mono font-bold text-gray-900 dark:text-gray-100 mb-4",children:"0:00"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Work Phase"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:w.map(h=>e.jsxs("button",{onClick:()=>f(h.value),className:`p-3 rounded-lg border-2 transition-all ${d===h.value?`border-${h.color}-500 bg-${h.color}-50`:"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(h.icon,{className:`w-5 h-5 mx-auto mb-1 ${d===h.value?`text-${h.color}-600`:"text-gray-600 dark:text-gray-400"}`}),e.jsx("span",{className:"text-xs text-center",children:h.label})]},h.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content Type"}),e.jsx("select",{value:i,onChange:h=>o(h.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:U.map(h=>e.jsxs("option",{value:h.value,children:[h.icon," ",h.label]},h.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Project"}),e.jsxs("select",{value:u,onChange:h=>x(h.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200","aria-describedby":"project-error",required:!0,children:[e.jsx("option",{value:"",children:"Select a project..."}),N==null?void 0:N.map(h=>e.jsxs("option",{value:h.id,children:[h.name," (",h.team,")"]},h.id))]}),!u&&e.jsx("p",{id:"project-error",className:"mt-1 text-sm text-red-600",children:"Project selection is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description *"}),e.jsx("input",{type:"text",value:g,onChange:h=>b(h.target.value),placeholder:"What specific task are you working on?",className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200","aria-describedby":"description-error",required:!0}),!g.trim()&&e.jsx("p",{id:"description-error",className:"mt-1 text-sm text-red-600",children:"Task description is required"})]}),e.jsxs("button",{onClick:Le,className:"btn-primary flex items-center justify-center space-x-2 w-full",children:[e.jsx(ee,{className:"w-5 h-5"}),e.jsx("span",{children:"Start Timer"})]})]})}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Today's Sessions"}),C&&C.length>S.timeTracker.maxSessionsDisplay&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",P.items.length," of ",C.length," sessions"]})]}),C===void 0?e.jsx(We,{count:3}):C&&C.length>0?e.jsxs(e.Fragment,{children:[C.length>S.timeTracker.maxSessionsDisplay?e.jsx(Wt,{items:P.items,itemHeight:80,containerHeight:400,renderItem:h=>e.jsx(Z,{block:h},h.id)}):e.jsx("div",{className:"space-y-3",children:P.items.map(h=>e.jsx(Z,{block:h},h.id))}),C.length>S.timeTracker.maxSessionsDisplay&&e.jsx("div",{className:"mt-6",children:e.jsx(Re,{currentPage:P.currentPage,totalPages:P.totalPages,hasNextPage:P.hasNextPage,hasPrevPage:P.hasPrevPage,onPageChange:P.goToPage,totalItems:P.totalItems,itemsPerPage:S.timeTracker.maxSessionsDisplay})})]}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No time blocks recorded today yet."})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Time Block History"}),e.jsx("button",{onClick:()=>v(!k),className:"btn-secondary",children:k?"Hide History":"Show History"})]}),k&&e.jsx("div",{children:s?e.jsxs("div",{className:"text-red-600 dark:text-red-400 text-center py-4",children:["Error loading history: ",s.message]}):A.length===0&&!W?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No historical time blocks found."}):e.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",onScroll:y,children:[A.map(h=>e.jsx(Z,{block:h},h.id)),W&&e.jsx("div",{className:"text-center py-4",children:e.jsxs("div",{className:"inline-flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading more..."})]})}),!p&&A.length>0&&e.jsx("div",{className:"text-center py-4 text-sm text-gray-500 dark:text-gray-400",children:"No more history to load"})]})})]})]})},le=m.memo(({project:t,onEdit:a,onArchive:r,getStatusIcon:n,getStatusColor:l,getPriorityColor:c,statuses:d,priorities:f})=>{var k,v;const i=n(t.status),o=l(t.status),u=c(t.priority),x=q(t.contentType),g=Pt(t.version),b=Ct(t.maintenanceStatus||Q(t.lastUpdated));return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"text-lg font-semibold",children:t.name}),e.jsx("span",{className:"text-lg",children:x.icon})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.team," • ",x.label]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:g.label})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>a(t),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100","aria-label":"Edit project",children:e.jsx(Pe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>r(t.id),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100","aria-label":"Archive project",children:e.jsx(Ce,{className:"w-4 h-4"})})]})]}),t.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:t.description}),(b.value==="outdated"||b.value==="critical")&&e.jsxs("div",{className:`flex items-center space-x-2 p-2 mb-3 rounded-lg bg-${b.color}-50 border border-${b.color}-200`,children:[e.jsx(_,{className:`w-4 h-4 text-${b.color}-600`}),e.jsxs("span",{className:`text-sm text-${b.color}-700`,children:["Documentation Debt: ",b.label]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`flex items-center space-x-1 text-sm px-2 py-1 bg-${o}-100 text-${o}-700 rounded`,children:[e.jsx(i,{className:"w-4 h-4"}),e.jsx("span",{children:(k=d.find(N=>N.value===t.status))==null?void 0:k.label})]}),e.jsx("span",{className:`text-sm px-2 py-1 bg-${u}-100 text-${u}-700 rounded`,children:(v=f.find(N=>N.value===t.priority))==null?void 0:v.label})]}),t.dueDate&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Due: ",M(t.dueDate)]})]}),t.lastUpdated&&e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Last updated: ",M(t.lastUpdated)]}),e.jsx("span",{className:`px-2 py-1 rounded bg-${b.color}-100 text-${b.color}-700`,children:b.label})]})]})]})});le.displayName="ProjectCard";const Rt=(t,a)=>{let r;return function(...l){const c=()=>{clearTimeout(r),t(...l)};clearTimeout(r),r=setTimeout(c,a)}},Lt=()=>{const[t,a]=m.useState(!1),[r,n]=m.useState(null),[l,c]=m.useState(""),[d,f]=m.useState({status:"all",team:"all",contentType:"all"}),[i,o]=m.useState({name:"",team:"",description:"",status:"planning",priority:"medium",dueDate:"",contentType:"user-guides",version:"draft-1",lastUpdated:new Date().toISOString().split("T")[0]}),u=O(()=>j.projects.reverse().toArray(),[]),x=m.useMemo(()=>u?u.filter(s=>{if(l){const y=l.toLowerCase();if(!(s.name.toLowerCase().includes(y)||s.team.toLowerCase().includes(y)||s.description&&s.description.toLowerCase().includes(y)))return!1}return!(d.status!=="all"&&s.status!==d.status||d.team!=="all"&&s.team!==d.team||d.contentType!=="all"&&s.contentType!==d.contentType)}):[],[u,l,d]),g=Be(x,S.projectsPage.itemsPerPage),b=m.useMemo(()=>Rt(s=>c(s),S.projectsPage.searchDebounce),[]),k=["Team Alpha","Team Beta","Team Gamma","Other"],v=[{value:"planning",label:"Planning",color:"blue"},{value:"in-progress",label:"In Progress",color:"yellow"},{value:"review",label:"Review",color:"purple"},{value:"published",label:"Published",color:"green"},{value:"archived",label:"Archived",color:"gray"}],N=[{value:"high",label:"High",color:"red"},{value:"medium",label:"Medium",color:"yellow"},{value:"low",label:"Low",color:"green"}],I=()=>{const s=[];return i.name.trim()||s.push("Project name is required"),i.team||s.push("Team selection is required"),i.dueDate&&new Date(i.dueDate)<new Date&&s.push("Due date cannot be in the past"),s},C=async s=>{s.preventDefault();const y=I();if(y.length>0){y.forEach(w=>T.error(w));return}try{const w={...i,maintenanceStatus:Q(i.lastUpdated)};r?(await pe(r.id,w),T.success("Project updated successfully")):(await jt(w),T.success("Project created successfully")),o({name:"",team:"",description:"",status:"planning",priority:"medium",dueDate:"",contentType:"user-guides",version:"draft-1",lastUpdated:new Date().toISOString().split("T")[0]}),a(!1),n(null)}catch{T.error("Failed to save project")}},P=m.useCallback(s=>{n(s),o({name:s.name,team:s.team,description:s.description||"",status:s.status,priority:s.priority||"medium",dueDate:s.dueDate||"",contentType:s.contentType||"user-guides",version:s.version||"draft-1",lastUpdated:s.lastUpdated||new Date().toISOString().split("T")[0]}),a(!0)},[]),L=m.useCallback(async s=>{await pe(s,{status:"archived"}),T.success("Project archived")},[]),A=s=>{switch(s){case"planning":return E;case"in-progress":return Se;case"review":return Pe;case"published":return R;case"archived":return Ce;default:return ue}},W=s=>{const y=v.find(w=>w.value===s);return y?y.color:"gray"},p=s=>{const y=N.find(w=>w.value===s);return y?y.color:"gray"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Projects"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[g.totalItems," total projects ",x.length!==(u==null?void 0:u.length)&&`(${x.length} filtered)`]})]}),e.jsxs("button",{onClick:()=>a(!t),className:"btn-primary flex items-center space-x-2",children:[e.jsx(te,{className:"w-5 h-5"}),e.jsx("span",{children:"New Project"})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Search Projects"}),e.jsx("input",{type:"text",placeholder:"Search by name, team, or description...",onChange:s=>b(s.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{value:d.status,onChange:s=>f(y=>({...y,status:s.target.value})),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:[e.jsx("option",{value:"all",children:"All Statuses"}),v.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Team"}),e.jsxs("select",{value:d.team,onChange:s=>f(y=>({...y,team:s.target.value})),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:[e.jsx("option",{value:"all",children:"All Teams"}),k.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Content Type"}),e.jsxs("select",{value:d.contentType,onChange:s=>f(y=>({...y,contentType:s.target.value})),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:[e.jsx("option",{value:"all",children:"All Types"}),U.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]})]})}),t&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:r?"Edit Project":"New Project"}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Name"}),e.jsx("input",{type:"text",value:i.name,onChange:s=>o({...i,name:s.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200","aria-describedby":"name-error"}),!i.name.trim()&&e.jsx("p",{id:"name-error",className:"mt-1 text-sm text-red-600",children:"Project name is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Content Type"}),e.jsx("select",{value:i.contentType,onChange:s=>o({...i,contentType:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:U.map(s=>e.jsxs("option",{value:s.value,children:[s.icon," ",s.label]},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Team"}),e.jsxs("select",{value:i.team,onChange:s=>o({...i,team:s.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200","aria-describedby":"team-error",children:[e.jsx("option",{value:"",children:"Select team..."}),k.map(s=>e.jsx("option",{value:s,children:s},s))]}),!i.team&&e.jsx("p",{id:"team-error",className:"mt-1 text-sm text-red-600",children:"Team selection is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Document Version"}),e.jsx("select",{value:i.version,onChange:s=>o({...i,version:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:ne.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsx("select",{value:i.status,onChange:s=>o({...i,status:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:v.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Priority"}),e.jsx("select",{value:i.priority,onChange:s=>o({...i,priority:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:N.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",value:i.dueDate,onChange:s=>o({...i,dueDate:s.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200","aria-describedby":"due-date-error"}),i.dueDate&&new Date(i.dueDate)<new Date&&e.jsx("p",{id:"due-date-error",className:"mt-1 text-sm text-red-600",children:"Due date cannot be in the past"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Last Updated"}),e.jsx("input",{type:"date",value:i.lastUpdated,onChange:s=>o({...i,lastUpdated:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:i.description,onChange:s=>o({...i,description:s.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>{a(!1),n(null),o({name:"",team:"",description:"",status:"planning",priority:"medium",dueDate:"",contentType:"user-guides",version:"draft-1",lastUpdated:new Date().toISOString().split("T")[0]})},className:"btn-secondary",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn-primary",children:[r?"Update":"Create"," Project"]})]})]})]}),u===void 0?e.jsx(We,{count:4}):x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ue,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:u.length===0?"No projects yet. Create your first project!":"No projects match your filters. Try adjusting your search criteria."})]}):e.jsxs(e.Fragment,{children:[x.length>S.projectsPage.maxVisible?e.jsx(VirtualizedList,{items:g.items,itemHeight:200,containerHeight:600,renderItem:s=>e.jsx("div",{className:"p-2",children:e.jsx(le,{project:s,onEdit:P,onArchive:L,getStatusIcon:A,getStatusColor:W,getPriorityColor:p,statuses:v,priorities:N},s.id)})}):e.jsx("div",{className:"responsive-grid",children:g.items.map(s=>e.jsx(le,{project:s,onEdit:P,onArchive:L,getStatusIcon:A,getStatusColor:W,getPriorityColor:p,statuses:v,priorities:N},s.id))}),e.jsx(Re,{currentPage:g.currentPage,totalPages:g.totalPages,hasNextPage:g.hasNextPage,hasPrevPage:g.hasPrevPage,onPageChange:g.goToPage,totalItems:g.totalItems,itemsPerPage:S.projectsPage.itemsPerPage})]})]})},Ft=t=>({research:"deepWork",writing:"deepWork","review-editing":"deepWork","version-updates":"shallowWork",publishing:"shallowWork",maintenance:"shallowWork",meeting:"meetings",planning:"planning"})[t]||"other",Ut=()=>{const[t,a]=m.useState(G()),[r,n]=m.useState([""]),[l,c]=m.useState([""]),[d,f]=m.useState(""),i=O(async()=>await j.timeBlocks.where("date").between(t.start.toISOString(),t.end.toISOString()).toArray(),[t]),o=m.useMemo(()=>i?i.reduce((p,s)=>{if(s.duration)switch(p.total+=s.duration,Ft(s.type)){case"deepWork":p.deepWork+=s.duration;break;case"shallowWork":p.shallowWork+=s.duration;break;case"meetings":p.meetings+=s.duration;break;case"planning":p.planning+=s.duration;break}return p},{total:0,deepWork:0,shallowWork:0,meetings:0,planning:0}):{total:0,deepWork:0,shallowWork:0,meetings:0,planning:0},[i]),u=m.useMemo(()=>{if(!i)return[];const p={};return i.forEach(s=>{if(s.projectId&&s.duration){const y=`${s.projectId}`;p[y]||(p[y]={projectId:s.projectId,projectName:s.projectName||"Unknown Project",projectTeam:s.projectTeam||"",minutes:0}),p[y].minutes+=s.duration}}),Object.values(p).sort((s,y)=>y.minutes-s.minutes)},[i]),x=()=>{n([...r,""])},g=p=>{n(r.filter((s,y)=>y!==p))},b=(p,s)=>{const y=[...r];y[p]=s,n(y)},k=()=>{c([...l,""])},v=p=>{c(l.filter((s,y)=>y!==p))},N=(p,s)=>{const y=[...l];y[p]=s,c(y)},I=()=>{const p=r.filter(w=>w.trim()!==""),s=l.filter(w=>w.trim()!==""),y=`Weekly Summary - ${M(t.start)} to ${M(t.end)}

Time Breakdown:
• Total Time: ${D(o.total)}
• Deep Work: ${D(o.deepWork)}
• Shallow Work: ${D(o.shallowWork)}
• Meetings: ${D(o.meetings)}
• Planning: ${D(o.planning)}

Project Time Allocation:
${u.map(w=>`• ${w.projectName}${w.projectTeam?` (${w.projectTeam})`:""}: ${D(w.minutes)}`).join(`
`)}

Completed This Week:
${p.map(w=>`• ${w}`).join(`
`)}

In Progress:
${s.map(w=>`• ${w}`).join(`
`)}

Generated on ${M(new Date)}`;f(y)},C=async()=>{try{await navigator.clipboard.writeText(d),T.success("Summary copied to clipboard!")}catch{T.error("Failed to copy to clipboard")}},P=()=>{const p=`Weekly Summary - ${M(t.start)} to ${M(t.end)}`,s=encodeURIComponent(d);window.open(`mailto:?subject=${encodeURIComponent(p)}&body=${s}`)};m.useEffect(()=>{o.total>0&&I()},[o,r,l,u]);const L=()=>{const p=new Date(t.start);p.setDate(p.getDate()-7),a(G(p))},A=()=>{const p=new Date(t.start);p.setDate(p.getDate()+7),a(G(p))},W=()=>{a(G())};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Weekly Summary"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:L,className:"btn-secondary",children:"← Previous"}),e.jsxs("span",{className:"font-medium",children:[M(t.start)," - ",M(t.end)]}),e.jsx("button",{onClick:A,className:"btn-secondary",children:"Next →"}),e.jsx("button",{onClick:W,className:"btn-primary",children:"Current Week"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Time"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:D(o.total)})]}),e.jsx(E,{className:"w-8 h-8 text-primary-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Deep Work"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:D(o.deepWork)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[o.total>0&&Math.round(o.deepWork/o.total*100),"%"]})]}),e.jsx(et,{className:"w-8 h-8 text-purple-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Shallow Work"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:D(o.shallowWork)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[o.total>0&&Math.round(o.shallowWork/o.total*100),"%"]})]}),e.jsx(he,{className:"w-8 h-8 text-blue-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Meetings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:D(o.meetings)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[o.total>0&&Math.round(o.meetings/o.total*100),"%"]})]}),e.jsx(R,{className:"w-8 h-8 text-green-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Planning"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:D(o.planning)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[o.total>0&&Math.round(o.planning/o.total*100),"%"]})]}),e.jsx(he,{className:"w-8 h-8 text-yellow-500"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Project Time Allocation"}),u.length>=S.weeklyReport.topProjects&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Top ",S.weeklyReport.topProjects," projects"]})]}),u.length>0?e.jsxs("div",{className:"space-y-3",children:[u.map((p,s)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:p.projectName}),p.projectTeam&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:p.projectTeam})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsx("p",{className:"font-medium",children:D(p.minutes)}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o.total>0?Math.round(p.minutes/o.total*100):0,"%"]})]})]},p.projectId||s)),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Weekly Efficiency"}),e.jsxs("span",{className:"font-medium text-blue-800 dark:text-blue-200",children:[u.length," active projects"]})]})})]}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No time tracked this week."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Completed This Week"}),e.jsxs("button",{onClick:x,className:"btn-primary flex items-center space-x-2",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Add"})]})]}),e.jsx("div",{className:"space-y-2",children:r.map((p,s)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:p,onChange:y=>b(s,y.target.value),placeholder:"What did you complete?",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>g(s),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400",children:e.jsx(ae,{className:"w-4 h-4"})})]},s))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"In Progress"}),e.jsxs("button",{onClick:k,className:"btn-primary flex items-center space-x-2",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Add"})]})]}),e.jsx("div",{className:"space-y-2",children:l.map((p,s)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:p,onChange:y=>N(s,y.target.value),placeholder:"What are you working on?",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>v(s),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400",children:e.jsx(ae,{className:"w-4 h-4"})})]},s))})]})]}),d&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Email Summary"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:C,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{children:"Copy"})]}),e.jsxs("button",{onClick:P,className:"btn-primary flex items-center space-x-2",children:[e.jsx(at,{className:"w-4 h-4"}),e.jsx("span",{children:"Email"})]})]})]}),e.jsx("pre",{className:"bg-gray-50 dark:bg-dark-700 p-4 rounded-lg text-sm whitespace-pre-wrap",children:d})]}),!1]})},Vt=()=>{const[t,a]=m.useState(localStorage.getItem("lastBackupDate")),[r,n]=m.useState(!1),l=m.useRef(null),c=async()=>{await Oe(),a(new Date().toISOString())},d=()=>{var x;(x=l.current)==null||x.click()},f=async x=>{var b;const g=(b=x.target.files)==null?void 0:b[0];g&&(await Tt(g),l.current&&(l.current.value=""))},i=async()=>{if(!r){n(!0);return}try{await j.timeBlocks.clear(),await j.projects.clear(),await j.weeklySummaries.clear(),await j.preferences.clear(),localStorage.removeItem("lastBackupDate"),a(null),T.success("All data cleared successfully"),n(!1),setTimeout(()=>window.location.reload(),1e3)}catch(x){T.error("Failed to clear data: "+x.message),n(!1)}},o=()=>{n(!1)},u=x=>x?new Date(x).toLocaleString():"Never";return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Settings"}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(st,{className:"w-6 h-6 text-primary-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Data Management"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-dark-700 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Backup"}),e.jsx("p",{className:"font-medium dark:text-gray-200",children:u(t)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-dark-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Export Data"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Download a backup of all your data as a JSON file"})]}),e.jsxs("button",{onClick:c,className:"btn-primary flex items-center space-x-2",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsx("span",{children:"Export"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-dark-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Import Data"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Restore data from a backup file (this will replace all existing data)"})]}),e.jsxs("div",{children:[e.jsx("input",{ref:l,type:"file",accept:".json",onChange:f,className:"hidden"}),e.jsxs("button",{onClick:d,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(de,{className:"w-4 h-4"}),e.jsx("span",{children:"Import"})]})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(rt,{className:"w-6 h-6 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Privacy & Storage"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(R,{className:"w-5 h-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Local Storage Only"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"All your data is stored locally in your browser using IndexedDB. No data is sent to external servers."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(R,{className:"w-5 h-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"No Analytics or Tracking"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This application doesn't use any analytics, tracking, or third-party services."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(R,{className:"w-5 h-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Offline Capable"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"The application works completely offline after the initial load."})]})]})]})]}),e.jsxs("div",{className:"card border-red-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(_,{className:"w-6 h-6 text-red-600"}),e.jsx("h3",{className:"text-lg font-semibold text-red-600",children:"Danger Zone"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Clear All Data"}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"This will permanently delete all your time blocks, projects, and settings. This action cannot be undone. Make sure to export your data first!"}),r?e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"font-medium text-red-800",children:"Are you absolutely sure? This will delete everything!"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:i,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200 font-medium",children:"Yes, Delete Everything"}),e.jsx("button",{onClick:o,className:"btn-secondary",children:"Cancel"})]})]}):e.jsxs("button",{onClick:i,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200 font-medium flex items-center space-x-2",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{children:"Clear All Data"})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"About"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Version:"})," 1.0.0"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Built with:"})," React, Vite, Tailwind CSS, Dexie.js"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"License:"})," MIT"]}),e.jsx("p",{children:"A productivity dashboard designed for technical writers to track time, manage projects, and generate weekly reports."})]})]})]})};function _t(){return m.useEffect(()=>{setTimeout(async()=>{try{await Nt()}catch(a){console.error("Migration failed:",a)}},1e3)},[]),e.jsx($,{fallbackMessage:"The Technical Writer Dashboard encountered an error. Please try refreshing the page.",children:e.jsx(yt,{children:e.jsx(wt,{children:e.jsx(He,{basename:"/technical-writer-dashboard/",children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 dark:from-dark-900 dark:via-dark-800 dark:to-indigo-950 transition-all duration-500",children:[e.jsx($,{fallbackMessage:"Navigation component failed to load.",children:e.jsx(St,{})}),e.jsx("main",{className:"container mx-auto px-4 py-8 pb-20 md:pb-8",children:e.jsxs(ze,{children:[e.jsx(V,{path:"/",element:e.jsx($,{fallbackMessage:"Dashboard component failed to load.",children:e.jsx(Et,{})})}),e.jsx(V,{path:"/time",element:e.jsx($,{fallbackMessage:"Time Tracker component failed to load.",children:e.jsx(Bt,{})})}),e.jsx(V,{path:"/projects",element:e.jsx($,{fallbackMessage:"Project Manager component failed to load.",children:e.jsx(Lt,{})})}),e.jsx(V,{path:"/weekly",element:e.jsx($,{fallbackMessage:"Weekly Summary component failed to load.",children:e.jsx(Ut,{})})}),e.jsx(V,{path:"/settings",element:e.jsx($,{fallbackMessage:"Settings component failed to load.",children:e.jsx(Vt,{})})})]})}),e.jsx($,{fallbackMessage:"Mobile navigation failed to load.",children:e.jsx(Dt,{})}),e.jsx($,{fallbackMessage:"Active timer display failed to load.",children:e.jsx(It,{})}),e.jsx(nt,{position:"top-right",toastOptions:{className:"dark:bg-dark-800 dark:text-white",style:{background:"var(--toast-bg)",color:"var(--toast-color)"}}})]})})})})})}se.createRoot(document.getElementById("root")).render(e.jsx(J.StrictMode,{children:e.jsx(_t,{})}));
