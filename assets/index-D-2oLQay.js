var ze=Object.defineProperty;var Ge=(t,a,s)=>a in t?ze(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;var se=(t,a,s)=>Ge(t,typeof a!="symbol"?a+"":a,s);import{r as u,b as Ye,a as Q}from"./vendor-DqFL8qPw.js";import{N as Pe,u as Je,L as U,B as Qe,R as Xe,a as V}from"./router-Cby2BMk6.js";import{V as S,A as H,R as Ke,H as Ze,S as et,L as Ie,C as L,F as me,U as R,a as G,b as Y,c as tt,M as at,D as Ae,P as Me,d as le,e as $e,f as xe,g as ue,h as F,i as ge,j as st,k as rt,l as he,m as Ee,n as pe,o as ye,p as X,q as K,B as lt,r as nt,T as Z,s as it,t as ne,u as ct,v as ot,w as dt,x as mt,O as xt}from"./ui-T1bfplez.js";import{X as ut,u as O}from"./data-BEr-VgmV.js";import{F as gt,f as Oe,s as ht,e as pt}from"./utils-D1IEH3Ga.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const m of i)if(m.type==="childList")for(const d of m.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function s(i){const m={};return i.integrity&&(m.integrity=i.integrity),i.referrerPolicy&&(m.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?m.credentials="include":i.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function l(i){if(i.ep)return;i.ep=!0;const m=s(i);fetch(i.href,m)}})();var Be={exports:{}},ee={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yt=u,bt=Symbol.for("react.element"),jt=Symbol.for("react.fragment"),ft=Object.prototype.hasOwnProperty,vt=yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kt={key:!0,ref:!0,__self:!0,__source:!0};function We(t,a,s){var l,i={},m=null,d=null;s!==void 0&&(m=""+s),a.key!==void 0&&(m=""+a.key),a.ref!==void 0&&(d=a.ref);for(l in a)ft.call(a,l)&&!kt.hasOwnProperty(l)&&(i[l]=a[l]);if(t&&t.defaultProps)for(l in a=t.defaultProps,a)i[l]===void 0&&(i[l]=a[l]);return{$$typeof:bt,type:t,key:m,ref:d,props:i,_owner:vt.current}}ee.Fragment=jt;ee.jsx=We;ee.jsxs=We;Be.exports=ee;var e=Be.exports,ie={},ke=Ye;ie.createRoot=ke.createRoot,ie.hydrateRoot=ke.hydrateRoot;const Le=u.createContext(),Nt=()=>{const t=u.useContext(Le);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},wt=({children:t})=>{const[a,s]=u.useState(()=>{const i=localStorage.getItem("theme");return i?i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});u.useEffect(()=>{const i=window.document.documentElement;a?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",a?"dark":"light")},[a]);const l=()=>{s(!a)};return e.jsx(Le.Provider,{value:{isDark:a,toggleTheme:l},children:t})},b=new ut("TechWriterDB");b.version(5).stores({timeBlocks:"++id, date, type, contentType, workPhase, startTime, endTime, projectId, projectName, projectTeam",projects:"++id, name, team, status, contentType, version, lastUpdated, maintenanceStatus, createdAt",teams:"++id, name, status, color, createdAt, updatedAt",weeklySummaries:"++id, weekStart, weekEnd, createdAt",preferences:"key, value",activeTimers:"++id, startTime, type, projectId, projectName, projectTeam, description, contentType, status"});const Tt=async t=>{let a="Unknown Project",s="";if(t.projectId)try{const l=await b.projects.get(parseInt(t.projectId));l&&(a=l.name,s=l.team)}catch(l){console.error("Error fetching project details:",l)}return await b.timeBlocks.add({...t,projectName:a,projectTeam:s,createdAt:new Date().toISOString()})},be=async t=>await b.teams.add({...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),Ne=async(t,a)=>await b.teams.update(t,{...a,updatedAt:new Date().toISOString()}),St=async()=>await b.teams.where("status").equals("active").toArray(),Re=async()=>await b.teams.toArray(),Fe=async t=>await b.teams.where("name").equals(t).first(),Ct=async t=>{if(t.team&&!await Fe(t.team))throw new Error(`Team "${t.team}" does not exist`);return await b.projects.add({...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})},we=async(t,a)=>{if(a.team&&!await Fe(a.team))throw new Error(`Team "${a.team}" does not exist`);return await b.projects.update(t,{...a,updatedAt:new Date().toISOString()})},Dt=async t=>{let a="Unknown Project",s="";if(t.projectId)try{const l=await b.projects.get(parseInt(t.projectId));l&&(a=l.name,s=l.team)}catch(l){console.error("Error fetching project details:",l)}return await b.activeTimers.add({...t,projectName:a,projectTeam:s,createdAt:new Date().toISOString()})},Te=async(t,a)=>await b.activeTimers.update(t,a),Pt=async()=>await b.activeTimers.toArray(),It=async t=>{const a=await b.activeTimers.get(t);if(a){const s=new Date().toISOString(),l=Math.floor((new Date(s)-new Date(a.startTime))/1e3/60);return await Tt({type:a.type,projectId:a.projectId,projectName:a.projectName,projectTeam:a.projectTeam,description:a.description,contentType:a.contentType,date:a.startTime,startTime:a.startTime,endTime:s,duration:l,status:"completed"}),await b.activeTimers.delete(t),{duration:l,endTime:s}}},At=async()=>{if(await b.teams.count()===0){const a=[{name:"Documentation Team",description:"Main documentation and content creation team",status:"active",color:"blue"},{name:"API Team",description:"API documentation and developer resources",status:"active",color:"green"},{name:"Support Team",description:"User guides and support documentation",status:"active",color:"purple"}];for(const s of a)await be(s);console.log("Initialized default teams")}},Mt=async()=>{try{await At();const t=await b.projects.toArray(),s=(await Re()).map(l=>l.name);for(const l of t)l.team&&!s.includes(l.team)&&(console.log(`Creating missing team: ${l.team}`),await be({name:l.team,description:`Auto-created from existing project: ${l.name}`,status:"active",color:"gray"}));console.log("Team migration completed successfully")}catch(t){console.error("Team migration failed:",t)}},$t=async()=>{try{const t=await b.timeBlocks.toArray(),a=await b.projects.toArray();console.log(`Migrating ${t.length} time blocks...`);for(const s of t)if(s.projectId&&!s.projectName){const l=a.find(i=>i.id===parseInt(s.projectId));l&&(await b.timeBlocks.update(s.id,{projectName:l.name,projectTeam:l.team}),console.log(`Updated time block ${s.id} with project name: ${l.name}`))}console.log("Migration completed successfully")}catch(t){console.error("Migration failed:",t)}},Ue=u.createContext(),je=()=>{const t=u.useContext(Ue);if(!t)throw new Error("useTimer must be used within a TimerProvider");return t},Et=({children:t})=>{const[a,s]=u.useState(Date.now()),l=O(()=>Pt(),[]);u.useEffect(()=>{const h=setInterval(()=>{s(Date.now())},1e3);return()=>clearInterval(h)},[]);const i=u.useCallback(h=>{const j=new Date(h).getTime();return Math.floor((a-j)/1e3)},[a]),m=u.useCallback(async(h,j,f,N)=>{try{const D=new Date().toISOString(),P=await Dt({type:h,projectId:j,description:f,contentType:N,startTime:D,status:"active"});return S.success(`Started ${h} timer`),P}catch(D){throw S.error("Failed to start timer"),D}},[]),d=u.useCallback(async h=>{try{const j=await It(h);return S.success(`Timer stopped! Duration: ${Math.floor(j.duration/60)}h ${j.duration%60}m`),j}catch(j){throw S.error("Failed to stop timer"),j}},[]),k=u.useCallback(async h=>{try{await Te(h,{status:"paused"}),S.success("Timer paused")}catch(j){throw S.error("Failed to pause timer"),j}},[]),n=u.useCallback(async h=>{try{await Te(h,{status:"active"}),S.success("Timer resumed")}catch(j){throw S.error("Failed to resume timer"),j}},[]),c=u.useCallback(h=>{const j=i(h),f=Math.floor(j/3600),N=Math.floor(j%3600/60),D=j%60;return f>0?`${f}:${N.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`:`${N}:${D.toString().padStart(2,"0")}`},[i]),p={activeTimers:l||[],currentTime:a,startTimer:m,stopTimer:d,pauseTimer:k,resumeTimer:n,getElapsedTime:i,getFormattedElapsedTime:c};return e.jsx(Ue.Provider,{value:p,children:t})};class W extends Q.Component{constructor(s){super(s);se(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});se(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,l){this.setState({error:s,errorInfo:l}),console.error("Error caught by boundary:",s,l)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 dark:from-dark-900 dark:via-dark-800 dark:to-indigo-950 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white/80 dark:bg-dark-800/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 dark:border-dark-700/50 p-8 text-center",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl shadow-lg mb-6 mx-auto w-fit",children:e.jsx(H,{className:"w-12 h-12 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:this.props.fallbackMessage||"An unexpected error occurred while loading this component."}),!1,e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:this.handleReset,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors duration-300",children:[e.jsx(Ke,{className:"w-4 h-4"}),e.jsx("span",{children:"Try Again"})]}),e.jsxs("button",{onClick:()=>window.location.href="/technical-writer-dashboard/",className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-gray-600 text-white rounded-xl font-semibold hover:bg-gray-700 transition-colors duration-300",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{children:"Go Home"})]})]}),e.jsx("button",{onClick:this.handleReload,className:"mt-4 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:"Or reload the entire page"})]})}):this.props.children}}const qe=async()=>{try{const t=await b.timeBlocks.toArray(),a=await b.projects.toArray(),s=await b.weeklySummaries.toArray(),l=await b.preferences.toArray(),i={version:"1.0",exportDate:new Date().toISOString(),data:{timeBlocks:t,projects:a,weeklySummaries:s,preferences:l}},m=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),d=`techwriter-backup-${new Date().toISOString().split("T")[0]}.json`;gt.saveAs(m,d),localStorage.setItem("lastBackupDate",new Date().toISOString()),S.success("Data exported successfully!")}catch(t){S.error("Export failed: "+t.message)}},Ot=async t=>{try{const a=await t.text(),s=JSON.parse(a);if(!s.version||!s.data)throw new Error("Invalid backup file format");if(!window.confirm("This will replace all existing data. Are you sure you want to continue?"))return;await b.timeBlocks.clear(),await b.projects.clear(),await b.weeklySummaries.clear(),await b.preferences.clear(),s.data.timeBlocks&&await b.timeBlocks.bulkAdd(s.data.timeBlocks),s.data.projects&&await b.projects.bulkAdd(s.data.projects),s.data.weeklySummaries&&await b.weeklySummaries.bulkAdd(s.data.weeklySummaries),s.data.preferences&&await b.preferences.bulkAdd(s.data.preferences),S.success("Data imported successfully!"),setTimeout(()=>window.location.reload(),1e3)}catch(a){S.error("Import failed: "+a.message)}},Bt=()=>{const{isDark:t,toggleTheme:a}=Nt(),s=[{to:"/",icon:Ie,label:"Dashboard"},{to:"/time",icon:L,label:"Time Tracking"},{to:"/projects",icon:me,label:"Projects"},{to:"/teams",icon:R,label:"Teams"},{to:"/weekly",icon:G,label:"Weekly Summary"},{to:"/settings",icon:Y,label:"Settings"}];return e.jsx("nav",{className:"backdrop-blur-md bg-white/80 dark:bg-dark-900/80 border-b border-white/20 dark:border-dark-700/50 sticky top-0 z-50",role:"navigation","aria-label":"Main navigation",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex items-center justify-between h-20",children:[e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-primary-500 to-purple-600 rounded-xl",children:e.jsx(et,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold gradient-text",children:"TechWriter"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium tracking-wider",children:"DASHBOARD"})]})]}),e.jsx("div",{className:"hidden md:flex space-x-2",children:s.map(l=>e.jsxs(Pe,{to:l.to,className:({isActive:i})=>`nav-link flex items-center space-x-2 text-sm font-medium ${i?"active":""}`,"aria-label":`Navigate to ${l.label}`,children:[e.jsx(l.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden lg:inline",children:l.label})]},l.to))})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:a,className:"relative p-3 rounded-xl bg-white/50 dark:bg-dark-700/50 backdrop-blur-sm border border-white/30 dark:border-dark-600/30 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-all duration-300 hover:scale-110 hover:shadow-lg group",title:t?"Switch to light mode":"Switch to dark mode","aria-label":t?"Switch to light mode":"Switch to dark mode",children:e.jsxs("div",{className:"relative w-5 h-5",children:[e.jsx(tt,{className:`absolute inset-0 w-5 h-5 transition-all duration-300 ${t?"rotate-90 scale-0 opacity-0":"rotate-0 scale-100 opacity-100"}`}),e.jsx(at,{className:`absolute inset-0 w-5 h-5 transition-all duration-300 ${t?"rotate-0 scale-100 opacity-100":"-rotate-90 scale-0 opacity-0"}`})]})}),e.jsxs("button",{onClick:qe,className:"flex items-center space-x-2 px-4 py-3 bg-white/50 dark:bg-dark-700/50 backdrop-blur-sm border border-white/30 dark:border-dark-600/30 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 rounded-xl text-sm font-medium transition-all duration-300 hover:scale-105 hover:shadow-lg","aria-label":"Export data backup",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Backup"})]})]})]})})})},Wt=()=>{const t=Je(),a=[{to:"/",icon:Ie,label:"Dashboard"},{to:"/time",icon:L,label:"Time"},{to:"/projects",icon:me,label:"Projects"},{to:"/teams",icon:R,label:"Teams"},{to:"/weekly",icon:G,label:"Weekly"},{to:"/settings",icon:Y,label:"Settings"}];return e.jsx("nav",{className:"mobile-nav",role:"navigation","aria-label":"Mobile navigation",children:e.jsx("div",{className:"flex justify-around",children:a.map(s=>{const l=t.pathname===s.to;return e.jsxs(Pe,{to:s.to,className:`mobile-nav-item ${l?"active":""}`,"aria-label":`Navigate to ${s.label}`,children:[e.jsx(s.icon,{className:"w-5 h-5 mb-1"}),e.jsx("span",{children:s.label})]},s.to)})})})},_=[{value:"api-docs",label:"API Documentation",icon:"ğŸ”Œ",color:"blue"},{value:"user-guides",label:"User Guides",icon:"ğŸ“–",color:"green"},{value:"release-notes",label:"Release Notes",icon:"ğŸ“‹",color:"purple"},{value:"tutorials",label:"Tutorials",icon:"ğŸ“",color:"yellow"},{value:"technical-specs",label:"Technical Specifications",icon:"âš™ï¸",color:"gray"},{value:"reference",label:"Reference Documentation",icon:"ğŸ“š",color:"indigo"},{value:"troubleshooting",label:"Troubleshooting Guides",icon:"ğŸ”§",color:"red"},{value:"onboarding",label:"Onboarding Materials",icon:"ğŸš€",color:"teal"},{value:"other",label:"Other Documentation",icon:"ğŸ“„",color:"gray"}],ce=[{value:"research",label:"Research & Discovery",icon:"ğŸ”",color:"blue"},{value:"writing",label:"Writing & Creation",icon:"âœï¸",color:"green"},{value:"review-editing",label:"Review & Editing",icon:"ğŸ“",color:"yellow"},{value:"version-updates",label:"Version Updates",icon:"ğŸ”„",color:"purple"},{value:"publishing",label:"Publishing & Distribution",icon:"ğŸ“¤",color:"indigo"},{value:"maintenance",label:"Maintenance & Updates",icon:"ğŸ› ï¸",color:"orange"}],oe=[{value:"draft-1",label:"Draft v1 (Initial)",color:"gray"},{value:"draft-2",label:"Draft v2 (Technical Review)",color:"blue"},{value:"draft-3",label:"Draft v3 (Stakeholder Review)",color:"yellow"},{value:"draft-final",label:"Draft (Final Edits)",color:"orange"},{value:"published-1-0",label:"Published v1.0",color:"green"},{value:"update-minor",label:"Update in Progress (Minor)",color:"purple"},{value:"update-major",label:"Major Revision in Progress",color:"red"},{value:"deprecated",label:"Deprecated",color:"gray"}],Se=[{value:"current",label:"Current (< 3 months)",color:"green",daysThreshold:90},{value:"stale",label:"Stale (3-6 months)",color:"yellow",daysThreshold:180},{value:"outdated",label:"Outdated (6+ months)",color:"orange",daysThreshold:365},{value:"critical",label:"Critical - Needs Urgent Update",color:"red",daysThreshold:null},{value:"deprecated",label:"Deprecated",color:"gray",daysThreshold:null}],z=t=>_.find(a=>a.value===t)||_[_.length-1],fe=t=>ce.find(a=>a.value===t)||ce[0],Lt=t=>oe.find(a=>a.value===t)||oe[0],Rt=t=>Se.find(a=>a.value===t)||Se[0],te=t=>{if(!t)return"critical";const a=Math.floor((new Date-new Date(t))/(1e3*60*60*24));return a<=90?"current":a<=180?"stale":a<=365?"outdated":"critical"},Ft=()=>{const{activeTimers:t,getFormattedElapsedTime:a,pauseTimer:s,resumeTimer:l,stopTimer:i}=je();return!t||t.length===0?null:e.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-2",children:t.map(m=>{const d=z(m.contentType),k=fe(m.type),n=m.status==="active";return e.jsxs("div",{className:`bg-white dark:bg-dark-800 rounded-lg shadow-lg border-l-4 p-3 min-w-64 ${n?"border-green-500 animate-pulse-soft":"border-yellow-500"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:`w-4 h-4 ${n?"text-green-600":"text-yellow-600"}`}),e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:n?"ACTIVE":"PAUSED"})]}),e.jsxs("div",{className:"flex space-x-1",children:[n?e.jsx("button",{onClick:()=>s(m.id),className:"p-1 text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 rounded",title:"Pause timer",children:e.jsx(Me,{className:"w-3 h-3"})}):e.jsx("button",{onClick:()=>l(m.id),className:"p-1 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded",title:"Resume timer",children:e.jsx(le,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>i(m.id),className:"p-1 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Stop timer",children:e.jsx($e,{className:"w-3 h-3"})})]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:m.description||`${k.label} - ${d.label}`}),e.jsxs("div",{className:"text-gray-600 dark:text-gray-400 text-xs",children:[d.icon," ",d.label]})]}),e.jsx("div",{className:"mt-2 text-lg font-mono font-bold text-center",children:a(m.startTime)})]},m.id)})})},B=t=>Oe(new Date(t),"MMM d, yyyy"),Ce=t=>Oe(new Date(t),"h:mm a"),A=t=>{const a=Math.floor(t/60),s=t%60;return a>0?`${a}h ${s}m`:`${s}m`},J=(t=new Date)=>{const a=ht(t,{weekStartsOn:1}),s=pt(t,{weekStartsOn:1});return{start:a,end:s}},M={dashboard:{recentProjects:5,todayTimeBlocks:20,documentationDebt:10},projectsPage:{itemsPerPage:20,maxVisible:100,searchDebounce:300},timeTracker:{recentSessions:50,maxSessionsDisplay:20},weeklyReport:{topProjects:10}},Ut=()=>{const t=O(async()=>{const l=new Date;l.setHours(0,0,0,0);const i=new Date(l);return i.setDate(i.getDate()+1),await b.timeBlocks.where("date").between(l.toISOString(),i.toISOString()).limit(M.dashboard.todayTimeBlocks).reverse().toArray()},[]),a=O(async()=>await b.projects.where("status").notEqual("archived").limit(M.dashboard.recentProjects).reverse().toArray(),[]),s=O(async()=>{const l=await b.projects.where("status").notEqual("archived").toArray(),i=[],m=50;for(let d=0;d<l.length&&i.length<M.dashboard.documentationDebt;d+=m){const k=l.slice(d,d+m);for(const n of k){if(i.length>=M.dashboard.documentationDebt)break;const c=te(n.lastUpdated);(c==="outdated"||c==="critical")&&i.push({...n,maintenanceStatus:c})}d+m<l.length&&await new Promise(n=>setTimeout(n,0))}return i},[]);return{todayBlocks:t,recentActiveProjects:a,documentationDebt:s}},qt=(t,a=M.timeTracker.recentSessions)=>{var s,l;return O(async()=>t?await b.timeBlocks.where("date").between(t.start.toISOString(),t.end.toISOString()).limit(a).reverse().toArray():[],[(s=t==null?void 0:t.start)==null?void 0:s.toISOString(),(l=t==null?void 0:t.end)==null?void 0:l.toISOString(),a])},De=({size:t="medium",color:a="primary",text:s=null})=>{const l={small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12"},i={primary:"border-primary-600",white:"border-white",gray:"border-gray-600"};return e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[e.jsx("div",{className:`
          ${l[t]} 
          border-2 
          ${i[a]} 
          border-t-transparent 
          rounded-full 
          animate-spin
        `,role:"status","aria-label":"Loading"}),s&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s})]})},Vt=()=>e.jsxs("div",{className:"card animate-pulse",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded"})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded-full w-20"}),e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded-full w-16"})]}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-24"})]})]}),ve=({count:t=3})=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[...Array(t)].map((a,s)=>e.jsx(Vt,{},s))}),_t=()=>{const{activeTimers:t,getFormattedElapsedTime:a}=je(),[s,l]=u.useState({totalMinutes:0,researchMinutes:0,writingMinutes:0,completedTasks:0}),{todayBlocks:i,recentActiveProjects:m,documentationDebt:d}=Ut(),k=u.useMemo(()=>i?i.reduce((n,c)=>(c.duration&&(n.totalMinutes+=c.duration,c.type==="research"&&(n.researchMinutes+=c.duration),c.type==="writing"&&(n.writingMinutes+=c.duration),c.status==="completed"&&(n.completedTasks+=1)),n),{totalMinutes:0,researchMinutes:0,writingMinutes:0,completedTasks:0}):{totalMinutes:0,researchMinutes:0,writingMinutes:0,completedTasks:0},[i]);return u.useEffect(()=>{l(k)},[k]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:B(new Date)})]}),t&&t.length>0&&e.jsxs("div",{className:"flex items-center space-x-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 px-4 py-2 rounded-lg",children:[e.jsx(L,{className:"w-5 h-5 animate-pulse"}),e.jsxs("span",{children:[t.length," Active Timer",t.length>1?"s":"",": ",a(t[0].startTime)]})]})]}),e.jsxs("div",{className:"responsive-grid lg:grid-cols-4",children:[e.jsx("div",{className:"stat-card group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"responsive-text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Total Time Today"}),e.jsx("p",{className:"text-2xl md:text-3xl font-bold gradient-text mt-2",children:A(s.totalMinutes)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"+12% from yesterday"})]}),e.jsx("div",{className:"stat-icon p-3 md:p-4 bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl shadow-lg",children:e.jsx(L,{className:"w-6 h-6 md:w-8 md:h-8 text-white"})})]})}),e.jsx("div",{className:"stat-card group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Research Time"}),e.jsx("p",{className:"text-3xl font-bold gradient-text mt-2",children:A(s.researchMinutes)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Deep investigation"})]}),e.jsx("div",{className:"stat-icon p-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl shadow-lg",children:e.jsx(xe,{className:"w-8 h-8 text-white"})})]})}),e.jsx("div",{className:"stat-card group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Writing Time"}),e.jsx("p",{className:"text-3xl font-bold gradient-text mt-2",children:A(s.writingMinutes)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Creative flow"})]}),e.jsx("div",{className:"stat-icon p-4 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl shadow-lg",children:e.jsx(ue,{className:"w-8 h-8 text-white"})})]})}),e.jsx("div",{className:"stat-card group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Tasks Completed"}),e.jsx("p",{className:"text-3xl font-bold gradient-text mt-2",children:s.completedTasks}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Great progress!"})]}),e.jsx("div",{className:"stat-icon p-4 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl shadow-lg",children:e.jsx(F,{className:"w-8 h-8 text-white"})})]})})]}),d&&d.length>0&&e.jsxs("div",{className:"debt-alert card border-l-4 border-orange-500 bg-gradient-to-r from-orange-50/80 to-red-50/80 dark:from-orange-900/20 dark:to-red-900/20 backdrop-blur-sm animate-slide-up",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl animate-pulse-soft",children:e.jsx(H,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-orange-800 dark:text-orange-300",children:"Documentation Debt Alert"}),e.jsxs("p",{className:"text-sm text-orange-600 dark:text-orange-400",children:[d.length," document",d.length>1?"s need":" needs"," immediate attention"]})]})]}),e.jsx("div",{className:"space-y-3",children:d.slice(0,3).map((n,c)=>{const p=z(n.contentType),h=te(n.lastUpdated);return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/80 dark:bg-dark-800/80 backdrop-blur-sm rounded-xl border border-orange-200/50 dark:border-orange-700/30 hover:shadow-lg transition-all duration-300",style:{animationDelay:`${c*100}ms`},children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:p.icon}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:n.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:p.label})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${h==="critical"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300"}`,children:h==="critical"?"ğŸš¨ Critical":"âš ï¸ Outdated"})]},n.id)})}),d.length>3&&e.jsx("div",{className:"mt-4 p-3 bg-white/50 dark:bg-dark-800/50 backdrop-blur-sm rounded-xl border border-orange-200/30 dark:border-orange-700/20",children:e.jsxs("p",{className:"text-sm text-orange-700 dark:text-orange-300 font-medium",children:["ğŸ“š +",d.length-3," more documents need updates"]})}),e.jsxs(U,{to:"/projects",className:"btn-primary mt-6 inline-flex items-center space-x-2 glow-effect",children:[e.jsx("span",{children:"Review Documentation Debt"}),e.jsx(H,{className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Today's Time Blocks"}),i===void 0?e.jsx(De,{text:"Loading time blocks..."}):i&&i.length>0?e.jsx("div",{className:"space-y-2",children:i.map(n=>{const c=fe(n.type),p=z(n.contentType);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-2 h-8 rounded bg-${c.color}-500`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:n.description||`${c.label} - ${p.label}`}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[p.icon," ",p.label," â€¢ ",A(n.duration||0)]})]})]}),n.status==="completed"?e.jsx(F,{className:"w-5 h-5 text-green-500"}):e.jsx(ge,{className:"w-5 h-5 text-yellow-500"})]},n.id)})}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No time blocks recorded yet today."}),e.jsx(U,{to:"/time",className:"mt-4 block text-center btn-primary",children:"Start Time Tracking"})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Projects"}),m===void 0?e.jsx(De,{text:"Loading projects..."}):m&&m.length>0?e.jsx("div",{className:"space-y-2",children:m.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:n.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[n.team," â€¢ ",n.status]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[n.progress||0,"%"]}),e.jsx("div",{className:"w-20 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary-500 transition-all",style:{width:`${n.progress||0}%`}})})]})]},n.id))}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No recent projects."}),e.jsx(U,{to:"/projects",className:"mt-4 block text-center btn-primary",children:"View All Projects"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(U,{to:"/time",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-dark-700 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:[e.jsx(L,{className:"w-8 h-8 text-primary-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Start Timer"})]}),e.jsxs(U,{to:"/projects",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-dark-700 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:[e.jsx(me,{className:"w-8 h-8 text-primary-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"New Project"})]}),e.jsxs(U,{to:"/weekly",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-dark-700 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:[e.jsx(G,{className:"w-8 h-8 text-primary-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Weekly Report"})]}),e.jsxs(U,{to:"/settings",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-dark-700 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:[e.jsx(Y,{className:"w-8 h-8 text-primary-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Settings"})]})]})]})]})},Ve=(t,a=20)=>{const[s,l]=u.useState(1),i=u.useMemo(()=>{if(!t)return{items:[],totalPages:0,hasNextPage:!1,hasPrevPage:!1};const c=(s-1)*a,p=c+a,h=t.slice(c,p),j=Math.ceil(t.length/a);return{items:h,totalPages:j,hasNextPage:s<j,hasPrevPage:s>1,currentPage:s,totalItems:t.length}},[t,s,a]),m=c=>{l(Math.max(1,Math.min(c,i.totalPages)))};return{...i,goToPage:m,nextPage:()=>m(s+1),prevPage:()=>m(s-1),reset:()=>l(1),setCurrentPage:l}},Ht=(t,{threshold:a=100,limit:s=20}={})=>{const[l,i]=u.useState([]),[m,d]=u.useState(!1),[k,n]=u.useState(!0),[c,p]=u.useState(0),[h,j]=u.useState(null),f=u.useCallback(async()=>{if(!(m||!k)){d(!0),j(null);try{const P=await t(c,s);P.length<s&&n(!1),i(I=>c===0?P:[...I,...P]),p(I=>I+1)}catch(P){j(P),console.error("Error loading more data:",P)}finally{d(!1)}}},[t,c,s,m,k]),N=u.useCallback(()=>{i([]),p(0),n(!0),j(null)},[]);u.useEffect(()=>{c===0&&f()},[]);const D=u.useCallback(P=>{const{scrollTop:I,scrollHeight:o,clientHeight:w}=P.target;o-I<=w+a&&f()},[f,a]);return{data:l,loading:m,hasMore:k,error:h,loadMore:f,reset:N,handleScroll:D}},zt=({items:t,itemHeight:a=100,containerHeight:s=400,renderItem:l,overscan:i=5})=>{const[m,d]=u.useState(0),k=u.useRef(null);if(!t||t.length===0)return e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No items to display"});const n=t.length*a,c=Math.ceil(s/a),p=Math.max(0,Math.floor(m/a)-i),h=Math.min(t.length-1,p+c+i*2),j=t.slice(p,h+1),f=N=>{d(N.target.scrollTop)};return e.jsx("div",{ref:k,className:"overflow-auto",style:{height:s},onScroll:f,children:e.jsx("div",{style:{height:n,position:"relative"},children:e.jsx("div",{style:{transform:`translateY(${p*a}px)`,position:"absolute",top:0,left:0,right:0},children:j.map((N,D)=>e.jsx("div",{style:{height:a},children:l(N,p+D)},p+D))})})})},_e=({currentPage:t,totalPages:a,hasNextPage:s,hasPrevPage:l,onPageChange:i,totalItems:m,itemsPerPage:d=20})=>{if(a<=1)return null;const k=(t-1)*d+1,n=Math.min(t*d,m),p=(()=>{const h=[];let f=Math.max(1,t-Math.floor(2.5)),N=Math.min(a,f+5-1);N-f+1<5&&(f=Math.max(1,N-5+1));for(let D=f;D<=N;D++)h.push(D);return h})();return e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",k," to ",n," of ",m," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>i(t-1),disabled:!l,className:"p-2 rounded-lg border border-gray-300 dark:border-dark-600 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors","aria-label":"Previous page",children:e.jsx(st,{className:"w-4 h-4"})}),p[0]>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>i(1),className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-dark-600 hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",children:"1"}),p[0]>2&&e.jsx("span",{className:"text-gray-400",children:"..."})]}),p.map(h=>e.jsx("button",{onClick:()=>i(h),className:`px-3 py-2 rounded-lg border transition-colors ${h===t?"bg-primary-600 text-white border-primary-600":"border-gray-300 dark:border-dark-600 hover:bg-gray-50 dark:hover:bg-dark-700"}`,children:h},h)),p[p.length-1]<a&&e.jsxs(e.Fragment,{children:[p[p.length-1]<a-1&&e.jsx("span",{className:"text-gray-400",children:"..."}),e.jsx("button",{onClick:()=>i(a),className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-dark-600 hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",children:a})]}),e.jsx("button",{onClick:()=>i(t+1),disabled:!s,className:"p-2 rounded-lg border border-gray-300 dark:border-dark-600 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors","aria-label":"Next page",children:e.jsx(rt,{className:"w-4 h-4"})})]})]})},re=Q.memo(({block:t})=>{const a=fe(t.type),s=z(t.contentType),l=a.value==="research"?xe:a.value==="writing"?ue:a.value==="review-editing"?G:a.value==="version-updates"?he:a.value==="publishing"?Ee:Y;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 bg-${a.color}-100 rounded-lg`,children:Q.createElement(l,{className:`w-5 h-5 text-${a.color}-600`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.description||`${a.label} - ${s.label}`}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.icon," ",s.label," â€¢ ",Ce(t.startTime)," - ",t.endTime?Ce(t.endTime):"In progress"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:A(t.duration||0)}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.label})]})]})}),Gt=()=>{const{activeTimers:t,startTimer:a,stopTimer:s,pauseTimer:l,resumeTimer:i,getFormattedElapsedTime:m}=je(),[d,k]=u.useState("writing"),[n,c]=u.useState("user-guides"),[p,h]=u.useState(""),[j,f]=u.useState(""),[N,D]=u.useState(!1),P=O(()=>b.projects.where("status").notEqual("archived").limit(50).toArray(),[]),I=u.useMemo(()=>{const x=new Date;x.setHours(0,0,0,0);const q=new Date(x);return q.setDate(q.getDate()+1),{start:x,end:q}},[]),o=qt(I,M.timeTracker.maxSessionsDisplay),w=Ve(o||[],M.timeTracker.maxSessionsDisplay),T=async(x,q)=>{const He=x*q,ae=new Date;return ae.setDate(ae.getDate()-1),await b.timeBlocks.where("date").below(ae.toISOString()).reverse().offset(He).limit(q).toArray()},{data:$,loading:E,hasMore:y,error:g,handleScroll:v}=Ht(T,{threshold:100,limit:M.timeTracker.recentSessions}),r=ce.map(x=>({value:x.value,label:x.label,icon:x.value==="research"?xe:x.value==="writing"?ue:x.value==="review-editing"?G:x.value==="version-updates"?he:x.value==="publishing"?Ee:Y,color:x.color})),C=async()=>{if(!p){S.error("Please select a project");return}if(!j.trim()){S.error("Please provide a task description");return}try{await a(d,p,j,n),f("")}catch(x){console.error("Failed to start timer:",x)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Time Tracking"}),e.jsx("div",{className:"card text-center",children:t&&t.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-6xl font-mono font-bold text-gray-900 dark:text-gray-100 mb-4",children:m(t[0].startTime)}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:t[0].description||`${t[0].type} - ${t[0].contentType}`}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[t[0].status==="active"?e.jsxs("button",{onClick:()=>l(t[0].id),className:"btn-secondary flex items-center space-x-2",children:[e.jsx(Me,{className:"w-5 h-5"}),e.jsx("span",{children:"Pause"})]}):e.jsxs("button",{onClick:()=>i(t[0].id),className:"btn-primary flex items-center space-x-2",children:[e.jsx(le,{className:"w-5 h-5"}),e.jsx("span",{children:"Resume"})]}),e.jsxs("button",{onClick:()=>s(t[0].id),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200 font-medium flex items-center space-x-2",children:[e.jsx($e,{className:"w-5 h-5"}),e.jsx("span",{children:"Stop"})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-6xl font-mono font-bold text-gray-900 dark:text-gray-100 mb-4",children:"0:00"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Work Phase"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:r.map(x=>e.jsxs("button",{onClick:()=>k(x.value),className:`p-3 rounded-lg border-2 transition-all ${d===x.value?`border-${x.color}-500 bg-${x.color}-50`:"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(x.icon,{className:`w-5 h-5 mx-auto mb-1 ${d===x.value?`text-${x.color}-600`:"text-gray-600 dark:text-gray-400"}`}),e.jsx("span",{className:"text-xs text-center",children:x.label})]},x.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content Type"}),e.jsx("select",{value:n,onChange:x=>c(x.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:_.map(x=>e.jsxs("option",{value:x.value,children:[x.icon," ",x.label]},x.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Project"}),e.jsxs("select",{value:p,onChange:x=>h(x.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200","aria-describedby":"project-error",required:!0,children:[e.jsx("option",{value:"",children:"Select a project..."}),P==null?void 0:P.map(x=>e.jsxs("option",{value:x.id,children:[x.name," (",x.team,")"]},x.id))]}),!p&&e.jsx("p",{id:"project-error",className:"mt-1 text-sm text-red-600",children:"Project selection is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description *"}),e.jsx("input",{type:"text",value:j,onChange:x=>f(x.target.value),placeholder:"What specific task are you working on?",className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200","aria-describedby":"description-error",required:!0}),!j.trim()&&e.jsx("p",{id:"description-error",className:"mt-1 text-sm text-red-600",children:"Task description is required"})]}),e.jsxs("button",{onClick:C,className:"btn-primary flex items-center justify-center space-x-2 w-full",children:[e.jsx(le,{className:"w-5 h-5"}),e.jsx("span",{children:"Start Timer"})]})]})}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Today's Sessions"}),o&&o.length>M.timeTracker.maxSessionsDisplay&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",w.items.length," of ",o.length," sessions"]})]}),o===void 0?e.jsx(ve,{count:3}):o&&o.length>0?e.jsxs(e.Fragment,{children:[o.length>M.timeTracker.maxSessionsDisplay?e.jsx(zt,{items:w.items,itemHeight:80,containerHeight:400,renderItem:x=>e.jsx(re,{block:x},x.id)}):e.jsx("div",{className:"space-y-3",children:w.items.map(x=>e.jsx(re,{block:x},x.id))}),o.length>M.timeTracker.maxSessionsDisplay&&e.jsx("div",{className:"mt-6",children:e.jsx(_e,{currentPage:w.currentPage,totalPages:w.totalPages,hasNextPage:w.hasNextPage,hasPrevPage:w.hasPrevPage,onPageChange:w.goToPage,totalItems:w.totalItems,itemsPerPage:M.timeTracker.maxSessionsDisplay})})]}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No time blocks recorded today yet."})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Time Block History"}),e.jsx("button",{onClick:()=>D(!N),className:"btn-secondary",children:N?"Hide History":"Show History"})]}),N&&e.jsx("div",{children:g?e.jsxs("div",{className:"text-red-600 dark:text-red-400 text-center py-4",children:["Error loading history: ",g.message]}):$.length===0&&!E?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No historical time blocks found."}):e.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",onScroll:v,children:[$.map(x=>e.jsx(re,{block:x},x.id)),E&&e.jsx("div",{className:"text-center py-4",children:e.jsxs("div",{className:"inline-flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading more..."})]})}),!y&&$.length>0&&e.jsx("div",{className:"text-center py-4 text-sm text-gray-500 dark:text-gray-400",children:"No more history to load"})]})})]})]})},de=u.memo(({project:t,onEdit:a,onArchive:s,getStatusIcon:l,getStatusColor:i,getPriorityColor:m,statuses:d,priorities:k})=>{var N,D;const n=l(t.status),c=i(t.status),p=m(t.priority),h=z(t.contentType),j=Lt(t.version),f=Rt(t.maintenanceStatus||te(t.lastUpdated));return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"text-lg font-semibold",children:t.name}),e.jsx("span",{className:"text-lg",children:h.icon})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.team," â€¢ ",h.label]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:j.label})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>a(t),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100","aria-label":"Edit project",children:e.jsx(pe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>s(t.id),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100","aria-label":"Archive project",children:e.jsx(ye,{className:"w-4 h-4"})})]})]}),t.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:t.description}),(f.value==="outdated"||f.value==="critical")&&e.jsxs("div",{className:`flex items-center space-x-2 p-2 mb-3 rounded-lg bg-${f.color}-50 border border-${f.color}-200`,children:[e.jsx(H,{className:`w-4 h-4 text-${f.color}-600`}),e.jsxs("span",{className:`text-sm text-${f.color}-700`,children:["Documentation Debt: ",f.label]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`flex items-center space-x-1 text-sm px-2 py-1 bg-${c}-100 text-${c}-700 rounded`,children:[e.jsx(n,{className:"w-4 h-4"}),e.jsx("span",{children:(N=d.find(P=>P.value===t.status))==null?void 0:N.label})]}),e.jsx("span",{className:`text-sm px-2 py-1 bg-${p}-100 text-${p}-700 rounded`,children:(D=k.find(P=>P.value===t.priority))==null?void 0:D.label})]}),t.dueDate&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Due: ",B(t.dueDate)]})]}),t.lastUpdated&&e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Last updated: ",B(t.lastUpdated)]}),e.jsx("span",{className:`px-2 py-1 rounded bg-${f.color}-100 text-${f.color}-700`,children:f.label})]})]})]})});de.displayName="ProjectCard";const Yt=(t,a)=>{let s;return function(...i){const m=()=>{clearTimeout(s),t(...i)};clearTimeout(s),s=setTimeout(m,a)}},Jt=()=>{const[t,a]=u.useState(!1),[s,l]=u.useState(null),[i,m]=u.useState(""),[d,k]=u.useState({status:"all",team:"all",contentType:"all"}),[n,c]=u.useState({name:"",team:"",description:"",status:"planning",priority:"medium",dueDate:"",contentType:"user-guides",version:"draft-1",lastUpdated:new Date().toISOString().split("T")[0]}),p=O(()=>b.projects.reverse().toArray(),[]),h=O(()=>St(),[]),j=O(()=>Re(),[]),f=u.useMemo(()=>p?p.filter(r=>{if(i){const C=i.toLowerCase();if(!(r.name.toLowerCase().includes(C)||r.team&&r.team.toLowerCase().includes(C)||r.description&&r.description.toLowerCase().includes(C)))return!1}return!(d.status!=="all"&&r.status!==d.status||d.team!=="all"&&r.team!==d.team||d.contentType!=="all"&&r.contentType!==d.contentType)}):[],[p,i,d]),N=Ve(f,M.projectsPage.itemsPerPage),D=u.useMemo(()=>Yt(r=>m(r),M.projectsPage.searchDebounce),[]),P=u.useMemo(()=>j?j.filter(r=>r.status==="active"):[],[j]),I=[{value:"planning",label:"Planning",color:"blue"},{value:"in-progress",label:"In Progress",color:"yellow"},{value:"review",label:"Review",color:"purple"},{value:"published",label:"Published",color:"green"},{value:"archived",label:"Archived",color:"gray"}],o=[{value:"high",label:"High",color:"red"},{value:"medium",label:"Medium",color:"yellow"},{value:"low",label:"Low",color:"green"}],w=()=>{const r=[];return n.name.trim()||r.push("Project name is required"),n.team||r.push("Team selection is required"),n.dueDate&&new Date(n.dueDate)<new Date&&r.push("Due date cannot be in the past"),r},T=async r=>{r.preventDefault();const C=w();if(C.length>0){C.forEach(x=>S.error(x));return}try{const x={...n,maintenanceStatus:te(n.lastUpdated)};s?(await we(s.id,x),S.success("Project updated successfully")):(await Ct(x),S.success("Project created successfully")),c({name:"",team:"",description:"",status:"planning",priority:"medium",dueDate:"",contentType:"user-guides",version:"draft-1",lastUpdated:new Date().toISOString().split("T")[0]}),a(!1),l(null)}catch{S.error("Failed to save project")}},$=u.useCallback(r=>{l(r),c({name:r.name,team:r.team,description:r.description||"",status:r.status,priority:r.priority||"medium",dueDate:r.dueDate||"",contentType:r.contentType||"user-guides",version:r.version||"draft-1",lastUpdated:r.lastUpdated||new Date().toISOString().split("T")[0]}),a(!0)},[]),E=u.useCallback(async r=>{await we(r,{status:"archived"}),S.success("Project archived")},[]),y=r=>{switch(r){case"planning":return L;case"in-progress":return ge;case"review":return pe;case"published":return F;case"archived":return ye;default:return K}},g=r=>{const C=I.find(x=>x.value===r);return C?C.color:"gray"},v=r=>{const C=o.find(x=>x.value===r);return C?C.color:"gray"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Projects"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[N.totalItems," total projects ",f.length!==(p==null?void 0:p.length)&&`(${f.length} filtered)`]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>window.location.href="/technical-writer-dashboard/teams",className:"btn-secondary flex items-center space-x-2",children:[e.jsx(R,{className:"w-5 h-5"}),e.jsx("span",{children:"Manage Teams"})]}),e.jsxs("button",{onClick:()=>a(!t),className:"btn-primary flex items-center space-x-2",children:[e.jsx(X,{className:"w-5 h-5"}),e.jsx("span",{children:"New Project"})]})]})]}),h&&h.length===0&&e.jsx("div",{className:"card border-l-4 border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(H,{className:"w-6 h-6 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-800 dark:text-yellow-300",children:"No Teams Available"}),e.jsxs("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:["You need to create teams before adding projects.",e.jsx("button",{onClick:()=>window.location.href="/technical-writer-dashboard/teams",className:"ml-1 underline hover:no-underline",children:"Manage teams here"})]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Search Projects"}),e.jsx("input",{type:"text",placeholder:"Search by name, team, or description...",onChange:r=>D(r.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{value:d.status,onChange:r=>k(C=>({...C,status:r.target.value})),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:[e.jsx("option",{value:"all",children:"All Statuses"}),I.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Team"}),e.jsxs("select",{value:d.team,onChange:r=>k(C=>({...C,team:r.target.value})),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:[e.jsx("option",{value:"all",children:"All Teams"}),P.map(r=>e.jsx("option",{value:r.name,children:r.name},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Content Type"}),e.jsxs("select",{value:d.contentType,onChange:r=>k(C=>({...C,contentType:r.target.value})),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:[e.jsx("option",{value:"all",children:"All Types"}),_.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]})]})]})}),t&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:s?"Edit Project":"New Project"}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Name"}),e.jsx("input",{type:"text",value:n.name,onChange:r=>c({...n,name:r.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200","aria-describedby":"name-error"}),!n.name.trim()&&e.jsx("p",{id:"name-error",className:"mt-1 text-sm text-red-600",children:"Project name is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Content Type"}),e.jsx("select",{value:n.contentType,onChange:r=>c({...n,contentType:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:_.map(r=>e.jsxs("option",{value:r.value,children:[r.icon," ",r.label]},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Team"}),e.jsxs("select",{value:n.team,onChange:r=>c({...n,team:r.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200","aria-describedby":"team-error",children:[e.jsx("option",{value:"",children:"Select team..."}),h==null?void 0:h.map(r=>e.jsx("option",{value:r.name,children:r.name},r.id))]}),!n.team&&e.jsx("p",{id:"team-error",className:"mt-1 text-sm text-red-600",children:"Team selection is required"}),h&&h.length===0&&e.jsxs("p",{className:"mt-1 text-sm text-orange-600",children:["No teams available.",e.jsx("button",{type:"button",onClick:()=>window.location.href="/technical-writer-dashboard/teams",className:"ml-1 underline hover:no-underline",children:"Create a team first"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Document Version"}),e.jsx("select",{value:n.version,onChange:r=>c({...n,version:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:oe.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsx("select",{value:n.status,onChange:r=>c({...n,status:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:I.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Priority"}),e.jsx("select",{value:n.priority,onChange:r=>c({...n,priority:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:o.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",value:n.dueDate,onChange:r=>c({...n,dueDate:r.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200","aria-describedby":"due-date-error"}),n.dueDate&&new Date(n.dueDate)<new Date&&e.jsx("p",{id:"due-date-error",className:"mt-1 text-sm text-red-600",children:"Due date cannot be in the past"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Last Updated"}),e.jsx("input",{type:"date",value:n.lastUpdated,onChange:r=>c({...n,lastUpdated:r.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:n.description,onChange:r=>c({...n,description:r.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>{a(!1),l(null),c({name:"",team:"",description:"",status:"planning",priority:"medium",dueDate:"",contentType:"user-guides",version:"draft-1",lastUpdated:new Date().toISOString().split("T")[0]})},className:"btn-secondary",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn-primary",disabled:h&&h.length===0,children:[s?"Update":"Create"," Project"]})]})]})]}),p===void 0?e.jsx(ve,{count:4}):f.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(K,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:p.length===0?"No projects yet. Create your first project!":"No projects match your filters. Try adjusting your search criteria."})]}):e.jsxs(e.Fragment,{children:[f.length>M.projectsPage.maxVisible?e.jsx(VirtualizedList,{items:N.items,itemHeight:200,containerHeight:600,renderItem:r=>e.jsx("div",{className:"p-2",children:e.jsx(de,{project:r,onEdit:$,onArchive:E,getStatusIcon:y,getStatusColor:g,getPriorityColor:v,statuses:I,priorities:o},r.id)})}):e.jsx("div",{className:"responsive-grid",children:N.items.map(r=>e.jsx(de,{project:r,onEdit:$,onArchive:E,getStatusIcon:y,getStatusColor:g,getPriorityColor:v,statuses:I,priorities:o},r.id))}),e.jsx(_e,{currentPage:N.currentPage,totalPages:N.totalPages,hasNextPage:N.hasNextPage,hasPrevPage:N.hasPrevPage,onPageChange:N.goToPage,totalItems:N.totalItems,itemsPerPage:M.projectsPage.itemsPerPage})]})]})},Qt=()=>{const[t,a]=u.useState(!1),[s,l]=u.useState(null),[i,m]=u.useState("teams"),[d,k]=u.useState({name:"",description:"",lead:"",status:"active",color:"blue"}),n=O(()=>b.teams.reverse().toArray(),[]),c=O(async()=>{if(!n)return{};const o={};for(const w of n){const T=await b.projects.where("team").equals(w.name).count(),$=await b.projects.where("team").equals(w.name).and(C=>C.status!=="archived").count(),E=await b.timeBlocks.where("projectTeam").equals(w.name).toArray(),y=E.reduce((C,x)=>C+(x.duration||0),0),g=new Date;g.setDate(g.getDate()-30);const v=E.filter(C=>new Date(C.startTime)>=g),r=v.reduce((C,x)=>C+(x.duration||0),0);o[w.id]={totalProjects:T,activeProjects:$,totalTime:y,recentTime:r,recentBlocks:v.length}}return o},[n]),p=[{value:"blue",label:"Blue",bgClass:"bg-blue-100",textClass:"text-blue-700",borderClass:"border-blue-500"},{value:"green",label:"Green",bgClass:"bg-green-100",textClass:"text-green-700",borderClass:"border-green-500"},{value:"purple",label:"Purple",bgClass:"bg-purple-100",textClass:"text-purple-700",borderClass:"border-purple-500"},{value:"yellow",label:"Yellow",bgClass:"bg-yellow-100",textClass:"text-yellow-700",borderClass:"border-yellow-500"},{value:"red",label:"Red",bgClass:"bg-red-100",textClass:"text-red-700",borderClass:"border-red-500"},{value:"indigo",label:"Indigo",bgClass:"bg-indigo-100",textClass:"text-indigo-700",borderClass:"border-indigo-500"},{value:"pink",label:"Pink",bgClass:"bg-pink-100",textClass:"text-pink-700",borderClass:"border-pink-500"},{value:"teal",label:"Teal",bgClass:"bg-teal-100",textClass:"text-teal-700",borderClass:"border-teal-500"}],h=()=>{const o=[];return d.name.trim()||o.push("Team name is required"),n&&n.find(T=>T.name.toLowerCase()===d.name.toLowerCase()&&(!s||T.id!==s.id))&&o.push("A team with this name already exists"),o},j=async o=>{o.preventDefault();const w=h();if(w.length>0){w.forEach(T=>S.error(T));return}try{s?(await Ne(s.id,d),S.success("Team updated successfully")):(await be(d),S.success("Team created successfully")),f()}catch{S.error("Failed to save team")}},f=()=>{k({name:"",description:"",lead:"",status:"active",color:"blue"}),a(!1),l(null)},N=o=>{l(o),k({name:o.name,description:o.description||"",lead:o.lead||"",status:o.status,color:o.color||"blue"}),a(!0)},D=async o=>{const w=n.find(E=>E.id===o),T=c==null?void 0:c[o];if((T==null?void 0:T.activeProjects)>0){S.error(`Cannot archive team with ${T.activeProjects} active projects`);return}window.confirm(`Are you sure you want to archive "${w.name}"? This action can be undone later.`)&&(await Ne(o,{status:"archived"}),S.success("Team archived"))},P=o=>p.find(T=>T.value===o)||p[0],I=u.useMemo(()=>{if(!n||!c)return null;const o=n.filter(g=>g.status==="active"),w=Object.values(c).reduce((g,v)=>g+v.totalProjects,0),T=Object.values(c).reduce((g,v)=>g+v.activeProjects,0),$=Object.values(c).reduce((g,v)=>g+v.totalTime,0),E=Object.values(c).reduce((g,v)=>g+v.recentTime,0),y=o.map(g=>({...g,stats:c[g.id]||{}})).sort((g,v)=>v.stats.recentTime-g.stats.recentTime).slice(0,5);return{activeTeams:o.length,totalProjects:w,totalActiveProjects:T,totalTime:$,totalRecentTime:E,topPerformingTeams:y}},[n,c]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Team Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage teams and track productivity across your organization"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex bg-gray-100 dark:bg-dark-700 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>m("teams"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${i==="teams"?"bg-white dark:bg-dark-600 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[e.jsx(R,{className:"w-4 h-4 inline mr-2"}),"Teams"]}),e.jsxs("button",{onClick:()=>m("dashboard"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${i==="dashboard"?"bg-white dark:bg-dark-600 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[e.jsx(lt,{className:"w-4 h-4 inline mr-2"}),"Dashboard"]})]}),i==="teams"&&e.jsxs("button",{onClick:()=>a(!t),className:"btn-primary flex items-center space-x-2",children:[e.jsx(X,{className:"w-5 h-5"}),e.jsx("span",{children:"New Team"})]})]})]}),i==="teams"?e.jsxs(e.Fragment,{children:[t&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:s?"Edit Team":"New Team"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Team Name *"}),e.jsx("input",{type:"text",value:d.name,onChange:o=>k({...d,name:o.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",placeholder:"e.g., Frontend Team, API Documentation Team"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Team Lead"}),e.jsx("input",{type:"text",value:d.lead,onChange:o=>k({...d,lead:o.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",placeholder:"Team lead name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{value:d.status,onChange:o=>k({...d,status:o.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Team Color"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:p.map(o=>e.jsxs("button",{type:"button",onClick:()=>k({...d,color:o.value}),className:`p-3 rounded-lg border-2 transition-all ${d.color===o.value?`${o.borderClass} ${o.bgClass}`:"border-gray-200 dark:border-dark-600 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-4 h-4 mx-auto rounded-full bg-${o.value}-500`}),e.jsx("span",{className:"text-xs mt-1 block",children:o.label})]},o.value))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:d.description,onChange:o=>k({...d,description:o.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",placeholder:"Brief description of the team's responsibilities"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:f,className:"btn-secondary",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn-primary",children:[s?"Update":"Create"," Team"]})]})]})]}),n===void 0?e.jsx(ve,{count:3}):n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(R,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No teams yet. Create your first team to get started!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(o=>{const w=P(o.color),T=(c==null?void 0:c[o.id])||{totalProjects:0,activeProjects:0,totalTime:0,recentTime:0};return e.jsxs("div",{className:"card hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl ${w.bgClass} flex items-center justify-center`,children:e.jsx(R,{className:`w-6 h-6 ${w.textClass}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-lg font-semibold truncate",children:o.name}),o.lead&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Led by ",o.lead]})]})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>N(o),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-700",title:"Edit team",children:e.jsx(pe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>D(o.id),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-700",title:"Archive team",children:e.jsx(ye,{className:"w-4 h-4"})})]})]}),o.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-2",children:o.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:`flex items-center space-x-1 text-sm px-3 py-1 rounded-full ${o.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-300":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300"}`,children:[o.status==="active"?e.jsx(F,{className:"w-3 h-3"}):e.jsx(ge,{className:"w-3 h-3"}),e.jsx("span",{className:"capitalize",children:o.status})]}),o.createdAt&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created ",B(o.createdAt)]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:T.totalProjects}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Total Projects"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nt,{className:"w-4 h-4 text-primary-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-primary-600",children:T.activeProjects}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Active"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:A(T.totalTime)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Total Time"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"w-4 h-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-600",children:A(T.recentTime)}),e.jsx("div",{className:"text-gray-500 text-xs",children:"Last 30 Days"})]})]})]})]})]},o.id)})})]}):e.jsx("div",{className:"space-y-6",children:I&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Teams"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:I.activeTeams})]}),e.jsx(R,{className:"w-8 h-8 text-blue-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Projects"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:I.totalProjects}),e.jsxs("p",{className:"text-xs text-green-600",children:[I.totalActiveProjects," active"]})]}),e.jsx(K,{className:"w-8 h-8 text-green-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Time Tracked"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:A(I.totalTime)})]}),e.jsx(L,{className:"w-8 h-8 text-purple-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Recent Activity"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:A(I.totalRecentTime)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Last 30 days"})]}),e.jsx(Z,{className:"w-8 h-8 text-orange-500"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Top Performing Teams (Last 30 Days)"}),e.jsx("div",{className:"space-y-3",children:I.topPerformingTeams.map((o,w)=>{const T=P(o.color),$=o.stats;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${T.bgClass} flex items-center justify-center`,children:e.jsx(R,{className:`w-5 h-5 ${T.textClass}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:o.name}),e.jsxs("span",{className:"text-sm text-gray-500",children:["#",w+1]})]}),o.lead&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Led by ",o.lead]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-lg",children:A($.recentTime)}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[$.activeProjects," active projects"]})]})]},o.id)})})]})]})})]})},Xt=t=>({research:"deepWork",writing:"deepWork","review-editing":"deepWork","version-updates":"shallowWork",publishing:"shallowWork",maintenance:"shallowWork",meeting:"meetings",planning:"planning"})[t]||"other",Kt=()=>{const[t,a]=u.useState(J()),[s,l]=u.useState([""]),[i,m]=u.useState([""]),[d,k]=u.useState(""),n=O(async()=>await b.timeBlocks.where("date").between(t.start.toISOString(),t.end.toISOString()).toArray(),[t]),c=u.useMemo(()=>n?n.reduce((y,g)=>{if(g.duration)switch(y.total+=g.duration,Xt(g.type)){case"deepWork":y.deepWork+=g.duration;break;case"shallowWork":y.shallowWork+=g.duration;break;case"meetings":y.meetings+=g.duration;break;case"planning":y.planning+=g.duration;break}return y},{total:0,deepWork:0,shallowWork:0,meetings:0,planning:0}):{total:0,deepWork:0,shallowWork:0,meetings:0,planning:0},[n]),p=u.useMemo(()=>{if(!n)return[];const y={};return n.forEach(g=>{if(g.projectId&&g.duration){const v=`${g.projectId}`;y[v]||(y[v]={projectId:g.projectId,projectName:g.projectName||"Unknown Project",projectTeam:g.projectTeam||"",minutes:0}),y[v].minutes+=g.duration}}),Object.values(y).sort((g,v)=>v.minutes-g.minutes)},[n]),h=()=>{l([...s,""])},j=y=>{l(s.filter((g,v)=>v!==y))},f=(y,g)=>{const v=[...s];v[y]=g,l(v)},N=()=>{m([...i,""])},D=y=>{m(i.filter((g,v)=>v!==y))},P=(y,g)=>{const v=[...i];v[y]=g,m(v)},I=()=>{const y=s.filter(r=>r.trim()!==""),g=i.filter(r=>r.trim()!==""),v=`Weekly Summary - ${B(t.start)} to ${B(t.end)}

Time Breakdown:
â€¢ Total Time: ${A(c.total)}
â€¢ Deep Work: ${A(c.deepWork)}
â€¢ Shallow Work: ${A(c.shallowWork)}
â€¢ Meetings: ${A(c.meetings)}
â€¢ Planning: ${A(c.planning)}

Project Time Allocation:
${p.map(r=>`â€¢ ${r.projectName}${r.projectTeam?` (${r.projectTeam})`:""}: ${A(r.minutes)}`).join(`
`)}

Completed This Week:
${y.map(r=>`â€¢ ${r}`).join(`
`)}

In Progress:
${g.map(r=>`â€¢ ${r}`).join(`
`)}

Generated on ${B(new Date)}`;k(v)},o=async()=>{try{await navigator.clipboard.writeText(d),S.success("Summary copied to clipboard!")}catch{S.error("Failed to copy to clipboard")}},w=()=>{const y=`Weekly Summary - ${B(t.start)} to ${B(t.end)}`,g=encodeURIComponent(d);window.open(`mailto:?subject=${encodeURIComponent(y)}&body=${g}`)};u.useEffect(()=>{c.total>0&&I()},[c,s,i,p]);const T=()=>{const y=new Date(t.start);y.setDate(y.getDate()-7),a(J(y))},$=()=>{const y=new Date(t.start);y.setDate(y.getDate()+7),a(J(y))},E=()=>{a(J())};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Weekly Summary"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:T,className:"btn-secondary",children:"â† Previous"}),e.jsxs("span",{className:"font-medium",children:[B(t.start)," - ",B(t.end)]}),e.jsx("button",{onClick:$,className:"btn-secondary",children:"Next â†’"}),e.jsx("button",{onClick:E,className:"btn-primary",children:"Current Week"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Time"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:A(c.total)})]}),e.jsx(L,{className:"w-8 h-8 text-primary-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Deep Work"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:A(c.deepWork)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[c.total>0&&Math.round(c.deepWork/c.total*100),"%"]})]}),e.jsx(it,{className:"w-8 h-8 text-purple-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Shallow Work"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:A(c.shallowWork)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[c.total>0&&Math.round(c.shallowWork/c.total*100),"%"]})]}),e.jsx(Z,{className:"w-8 h-8 text-blue-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Meetings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:A(c.meetings)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[c.total>0&&Math.round(c.meetings/c.total*100),"%"]})]}),e.jsx(F,{className:"w-8 h-8 text-green-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Planning"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:A(c.planning)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[c.total>0&&Math.round(c.planning/c.total*100),"%"]})]}),e.jsx(Z,{className:"w-8 h-8 text-yellow-500"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Project Time Allocation"}),p.length>=M.weeklyReport.topProjects&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Top ",M.weeklyReport.topProjects," projects"]})]}),p.length>0?e.jsxs("div",{className:"space-y-3",children:[p.map((y,g)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:y.projectName}),y.projectTeam&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:y.projectTeam})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsx("p",{className:"font-medium",children:A(y.minutes)}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c.total>0?Math.round(y.minutes/c.total*100):0,"%"]})]})]},y.projectId||g)),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Weekly Efficiency"}),e.jsxs("span",{className:"font-medium text-blue-800 dark:text-blue-200",children:[p.length," active projects"]})]})})]}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No time tracked this week."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Completed This Week"}),e.jsxs("button",{onClick:h,className:"btn-primary flex items-center space-x-2",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:"Add"})]})]}),e.jsx("div",{className:"space-y-2",children:s.map((y,g)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:y,onChange:v=>f(g,v.target.value),placeholder:"What did you complete?",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>j(g),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400",children:e.jsx(ne,{className:"w-4 h-4"})})]},g))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"In Progress"}),e.jsxs("button",{onClick:N,className:"btn-primary flex items-center space-x-2",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:"Add"})]})]}),e.jsx("div",{className:"space-y-2",children:i.map((y,g)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:y,onChange:v=>P(g,v.target.value),placeholder:"What are you working on?",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>D(g),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400",children:e.jsx(ne,{className:"w-4 h-4"})})]},g))})]})]}),d&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Email Summary"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:o,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(ct,{className:"w-4 h-4"}),e.jsx("span",{children:"Copy"})]}),e.jsxs("button",{onClick:w,className:"btn-primary flex items-center space-x-2",children:[e.jsx(ot,{className:"w-4 h-4"}),e.jsx("span",{children:"Email"})]})]})]}),e.jsx("pre",{className:"bg-gray-50 dark:bg-dark-700 p-4 rounded-lg text-sm whitespace-pre-wrap",children:d})]}),!1]})},Zt=()=>{const[t,a]=u.useState(localStorage.getItem("lastBackupDate")),[s,l]=u.useState(!1),i=u.useRef(null),m=async()=>{await qe(),a(new Date().toISOString())},d=()=>{var h;(h=i.current)==null||h.click()},k=async h=>{var f;const j=(f=h.target.files)==null?void 0:f[0];j&&(await Ot(j),i.current&&(i.current.value=""))},n=async()=>{if(!s){l(!0);return}try{await b.timeBlocks.clear(),await b.projects.clear(),await b.weeklySummaries.clear(),await b.preferences.clear(),localStorage.removeItem("lastBackupDate"),a(null),S.success("All data cleared successfully"),l(!1),setTimeout(()=>window.location.reload(),1e3)}catch(h){S.error("Failed to clear data: "+h.message),l(!1)}},c=()=>{l(!1)},p=h=>h?new Date(h).toLocaleString():"Never";return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Settings"}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(dt,{className:"w-6 h-6 text-primary-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Data Management"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-dark-700 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Backup"}),e.jsx("p",{className:"font-medium dark:text-gray-200",children:p(t)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-dark-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Export Data"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Download a backup of all your data as a JSON file"})]}),e.jsxs("button",{onClick:m,className:"btn-primary flex items-center space-x-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{children:"Export"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-dark-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Import Data"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Restore data from a backup file (this will replace all existing data)"})]}),e.jsxs("div",{children:[e.jsx("input",{ref:i,type:"file",accept:".json",onChange:k,className:"hidden"}),e.jsxs("button",{onClick:d,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(he,{className:"w-4 h-4"}),e.jsx("span",{children:"Import"})]})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(mt,{className:"w-6 h-6 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Privacy & Storage"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(F,{className:"w-5 h-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Local Storage Only"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"All your data is stored locally in your browser using IndexedDB. No data is sent to external servers."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(F,{className:"w-5 h-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"No Analytics or Tracking"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This application doesn't use any analytics, tracking, or third-party services."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(F,{className:"w-5 h-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Offline Capable"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"The application works completely offline after the initial load."})]})]})]})]}),e.jsxs("div",{className:"card border-red-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(H,{className:"w-6 h-6 text-red-600"}),e.jsx("h3",{className:"text-lg font-semibold text-red-600",children:"Danger Zone"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Clear All Data"}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"This will permanently delete all your time blocks, projects, and settings. This action cannot be undone. Make sure to export your data first!"}),s?e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"font-medium text-red-800",children:"Are you absolutely sure? This will delete everything!"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:n,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200 font-medium",children:"Yes, Delete Everything"}),e.jsx("button",{onClick:c,className:"btn-secondary",children:"Cancel"})]})]}):e.jsxs("button",{onClick:n,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200 font-medium flex items-center space-x-2",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:"Clear All Data"})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"About"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Version:"})," 1.0.0"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Built with:"})," React, Vite, Tailwind CSS, Dexie.js"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"License:"})," MIT"]}),e.jsx("p",{children:"A productivity dashboard designed for technical writers to track time, manage projects, and generate weekly reports."})]})]})]})};function ea(){return u.useEffect(()=>{setTimeout(async()=>{try{await $t(),await Mt()}catch(a){console.error("Migration failed:",a)}},1e3)},[]),e.jsx(W,{fallbackMessage:"The Technical Writer Dashboard encountered an error. Please try refreshing the page.",children:e.jsx(wt,{children:e.jsx(Et,{children:e.jsx(Qe,{basename:"/technical-writer-dashboard/",children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 dark:from-dark-900 dark:via-dark-800 dark:to-indigo-950 transition-all duration-500",children:[e.jsx(W,{fallbackMessage:"Navigation component failed to load.",children:e.jsx(Bt,{})}),e.jsx("main",{className:"container mx-auto px-4 py-8 pb-20 md:pb-8",children:e.jsxs(Xe,{children:[e.jsx(V,{path:"/",element:e.jsx(W,{fallbackMessage:"Dashboard component failed to load.",children:e.jsx(_t,{})})}),e.jsx(V,{path:"/time",element:e.jsx(W,{fallbackMessage:"Time Tracker component failed to load.",children:e.jsx(Gt,{})})}),e.jsx(V,{path:"/projects",element:e.jsx(W,{fallbackMessage:"Project Manager component failed to load.",children:e.jsx(Jt,{})})}),e.jsx(V,{path:"/teams",element:e.jsx(W,{fallbackMessage:"Team Manager component failed to load.",children:e.jsx(Qt,{})})}),e.jsx(V,{path:"/weekly",element:e.jsx(W,{fallbackMessage:"Weekly Summary component failed to load.",children:e.jsx(Kt,{})})}),e.jsx(V,{path:"/settings",element:e.jsx(W,{fallbackMessage:"Settings component failed to load.",children:e.jsx(Zt,{})})})]})}),e.jsx(W,{fallbackMessage:"Mobile navigation failed to load.",children:e.jsx(Wt,{})}),e.jsx(W,{fallbackMessage:"Active timer display failed to load.",children:e.jsx(Ft,{})}),e.jsx(xt,{position:"top-right",toastOptions:{className:"dark:bg-dark-800 dark:text-white",style:{background:"var(--toast-bg)",color:"var(--toast-color)"}}})]})})})})})}ie.createRoot(document.getElementById("root")).render(e.jsx(Q.StrictMode,{children:e.jsx(ea,{})}));
