var Fe=Object.defineProperty;var Ue=(t,s,r)=>s in t?Fe(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var ee=(t,s,r)=>Ue(t,typeof s!="symbol"?s+"":s,r);import{r as u,b as Ve,a as Q}from"./vendor-DqFL8qPw.js";import{N as ke,u as _e,L as R,B as qe,R as He,a as q}from"./router-Cby2BMk6.js";import{V as w,A as H,R as ze,H as Ge,S as Je,L as Ne,C as B,F as ce,a as G,b as J,c as Ye,M as Qe,D as we,P as Te,d as ae,e as Se,f as de,g as me,h as F,i as De,j as Xe,k as Ke,U as xe,l as Pe,m as Ce,n as Ie,o as se,p as ge,T as Ze,q as et,r as re,s as tt,t as at,u as st,v as rt,O as nt}from"./ui-ComhDs-H.js";import{X as lt,u as L}from"./data-BEr-VgmV.js";import{F as it,f as Me,s as ot,e as ct}from"./utils-D1IEH3Ga.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(n){if(n.ep)return;n.ep=!0;const c=r(n);fetch(n.href,c)}})();var Ae={exports:{}},X={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dt=u,mt=Symbol.for("react.element"),xt=Symbol.for("react.fragment"),ut=Object.prototype.hasOwnProperty,ht=dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gt={key:!0,ref:!0,__self:!0,__source:!0};function $e(t,s,r){var i,n={},c=null,d=null;r!==void 0&&(c=""+r),s.key!==void 0&&(c=""+s.key),s.ref!==void 0&&(d=s.ref);for(i in s)ut.call(s,i)&&!gt.hasOwnProperty(i)&&(n[i]=s[i]);if(t&&t.defaultProps)for(i in s=t.defaultProps,s)n[i]===void 0&&(n[i]=s[i]);return{$$typeof:mt,type:t,key:c,ref:d,props:n,_owner:ht.current}}X.Fragment=xt;X.jsx=$e;X.jsxs=$e;Ae.exports=X;var e=Ae.exports,ne={},pe=Ve;ne.createRoot=pe.createRoot,ne.hydrateRoot=pe.hydrateRoot;const Ee=u.createContext(),pt=()=>{const t=u.useContext(Ee);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},yt=({children:t})=>{const[s,r]=u.useState(()=>{const n=localStorage.getItem("theme");return n?n==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});u.useEffect(()=>{const n=window.document.documentElement;s?n.classList.add("dark"):n.classList.remove("dark"),localStorage.setItem("theme",s?"dark":"light")},[s]);const i=()=>{r(!s)};return e.jsx(Ee.Provider,{value:{isDark:s,toggleTheme:i},children:t})},j=new lt("TechWriterDB");j.version(3).stores({timeBlocks:"++id, date, type, contentType, workPhase, startTime, endTime, projectId",projects:"++id, name, team, status, contentType, version, lastUpdated, maintenanceStatus, createdAt",weeklySummaries:"++id, weekStart, weekEnd, createdAt",preferences:"key, value",activeTimers:"++id, startTime, type, projectId, description, contentType, status"});const bt=async t=>await j.timeBlocks.add({...t,createdAt:new Date().toISOString()}),jt=async t=>await j.projects.add({...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),ye=async(t,s)=>await j.projects.update(t,{...s,updatedAt:new Date().toISOString()}),ft=async t=>await j.activeTimers.add({...t,createdAt:new Date().toISOString()}),be=async(t,s)=>await j.activeTimers.update(t,s),vt=async()=>await j.activeTimers.toArray(),kt=async t=>{const s=await j.activeTimers.get(t);if(s){const r=new Date().toISOString(),i=Math.floor((new Date(r)-new Date(s.startTime))/1e3/60);return await bt({type:s.type,projectId:s.projectId,description:s.description,contentType:s.contentType,date:s.startTime,startTime:s.startTime,endTime:r,duration:i,status:"completed"}),await j.activeTimers.delete(t),{duration:i,endTime:r}}},Oe=u.createContext(),ue=()=>{const t=u.useContext(Oe);if(!t)throw new Error("useTimer must be used within a TimerProvider");return t},Nt=({children:t})=>{const[s,r]=u.useState(Date.now()),i=L(()=>vt(),[]);u.useEffect(()=>{const x=setInterval(()=>{r(Date.now())},1e3);return()=>clearInterval(x)},[]);const n=u.useCallback(x=>{const g=new Date(x).getTime();return Math.floor((s-g)/1e3)},[s]),c=u.useCallback(async(x,g,b,k)=>{try{const v=new Date().toISOString(),N=await ft({type:x,projectId:g,description:b,contentType:k,startTime:v,status:"active"});return w.success(`Started ${x} timer`),N}catch(v){throw w.error("Failed to start timer"),v}},[]),d=u.useCallback(async x=>{try{const g=await kt(x);return w.success(`Timer stopped! Duration: ${Math.floor(g.duration/60)}h ${g.duration%60}m`),g}catch(g){throw w.error("Failed to stop timer"),g}},[]),f=u.useCallback(async x=>{try{await be(x,{status:"paused"}),w.success("Timer paused")}catch(g){throw w.error("Failed to pause timer"),g}},[]),l=u.useCallback(async x=>{try{await be(x,{status:"active"}),w.success("Timer resumed")}catch(g){throw w.error("Failed to resume timer"),g}},[]),h=u.useCallback(x=>{const g=n(x),b=Math.floor(g/3600),k=Math.floor(g%3600/60),v=g%60;return b>0?`${b}:${k.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`:`${k}:${v.toString().padStart(2,"0")}`},[n]),o={activeTimers:i||[],currentTime:s,startTimer:c,stopTimer:d,pauseTimer:f,resumeTimer:l,getElapsedTime:n,getFormattedElapsedTime:h};return e.jsx(Oe.Provider,{value:o,children:t})};class E extends Q.Component{constructor(r){super(r);ee(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});ee(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,i){this.setState({error:r,errorInfo:i}),console.error("Error caught by boundary:",r,i)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 dark:from-dark-900 dark:via-dark-800 dark:to-indigo-950 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white/80 dark:bg-dark-800/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 dark:border-dark-700/50 p-8 text-center",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl shadow-lg mb-6 mx-auto w-fit",children:e.jsx(H,{className:"w-12 h-12 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:this.props.fallbackMessage||"An unexpected error occurred while loading this component."}),!1,e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:this.handleReset,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors duration-300",children:[e.jsx(ze,{className:"w-4 h-4"}),e.jsx("span",{children:"Try Again"})]}),e.jsxs("button",{onClick:()=>window.location.href="/technical-writer-dashboard/",className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-gray-600 text-white rounded-xl font-semibold hover:bg-gray-700 transition-colors duration-300",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{children:"Go Home"})]})]}),e.jsx("button",{onClick:this.handleReload,className:"mt-4 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:"Or reload the entire page"})]})}):this.props.children}}const Be=async()=>{try{const t=await j.timeBlocks.toArray(),s=await j.projects.toArray(),r=await j.weeklySummaries.toArray(),i=await j.preferences.toArray(),n={version:"1.0",exportDate:new Date().toISOString(),data:{timeBlocks:t,projects:s,weeklySummaries:r,preferences:i}},c=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),d=`techwriter-backup-${new Date().toISOString().split("T")[0]}.json`;it.saveAs(c,d),localStorage.setItem("lastBackupDate",new Date().toISOString()),w.success("Data exported successfully!")}catch(t){w.error("Export failed: "+t.message)}},wt=async t=>{try{const s=await t.text(),r=JSON.parse(s);if(!r.version||!r.data)throw new Error("Invalid backup file format");if(!window.confirm("This will replace all existing data. Are you sure you want to continue?"))return;await j.timeBlocks.clear(),await j.projects.clear(),await j.weeklySummaries.clear(),await j.preferences.clear(),r.data.timeBlocks&&await j.timeBlocks.bulkAdd(r.data.timeBlocks),r.data.projects&&await j.projects.bulkAdd(r.data.projects),r.data.weeklySummaries&&await j.weeklySummaries.bulkAdd(r.data.weeklySummaries),r.data.preferences&&await j.preferences.bulkAdd(r.data.preferences),w.success("Data imported successfully!"),setTimeout(()=>window.location.reload(),1e3)}catch(s){w.error("Import failed: "+s.message)}},Tt=()=>{const{isDark:t,toggleTheme:s}=pt(),r=[{to:"/",icon:Ne,label:"Dashboard"},{to:"/time",icon:B,label:"Time Tracking"},{to:"/projects",icon:ce,label:"Projects"},{to:"/weekly",icon:G,label:"Weekly Summary"},{to:"/settings",icon:J,label:"Settings"}];return e.jsx("nav",{className:"backdrop-blur-md bg-white/80 dark:bg-dark-900/80 border-b border-white/20 dark:border-dark-700/50 sticky top-0 z-50",role:"navigation","aria-label":"Main navigation",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex items-center justify-between h-20",children:[e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-primary-500 to-purple-600 rounded-xl",children:e.jsx(Je,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold gradient-text",children:"TechWriter"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium tracking-wider",children:"DASHBOARD"})]})]}),e.jsx("div",{className:"hidden md:flex space-x-2",children:r.map(i=>e.jsxs(ke,{to:i.to,className:({isActive:n})=>`nav-link flex items-center space-x-2 text-sm font-medium ${n?"active":""}`,"aria-label":`Navigate to ${i.label}`,children:[e.jsx(i.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden lg:inline",children:i.label})]},i.to))})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:s,className:"relative p-3 rounded-xl bg-white/50 dark:bg-dark-700/50 backdrop-blur-sm border border-white/30 dark:border-dark-600/30 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-all duration-300 hover:scale-110 hover:shadow-lg group",title:t?"Switch to light mode":"Switch to dark mode","aria-label":t?"Switch to light mode":"Switch to dark mode",children:e.jsxs("div",{className:"relative w-5 h-5",children:[e.jsx(Ye,{className:`absolute inset-0 w-5 h-5 transition-all duration-300 ${t?"rotate-90 scale-0 opacity-0":"rotate-0 scale-100 opacity-100"}`}),e.jsx(Qe,{className:`absolute inset-0 w-5 h-5 transition-all duration-300 ${t?"rotate-0 scale-100 opacity-100":"-rotate-90 scale-0 opacity-0"}`})]})}),e.jsxs("button",{onClick:Be,className:"flex items-center space-x-2 px-4 py-3 bg-white/50 dark:bg-dark-700/50 backdrop-blur-sm border border-white/30 dark:border-dark-600/30 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 rounded-xl text-sm font-medium transition-all duration-300 hover:scale-105 hover:shadow-lg","aria-label":"Export data backup",children:[e.jsx(we,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Backup"})]})]})]})})})},St=()=>{const t=_e(),s=[{to:"/",icon:Ne,label:"Dashboard"},{to:"/time",icon:B,label:"Time"},{to:"/projects",icon:ce,label:"Projects"},{to:"/weekly",icon:G,label:"Weekly"},{to:"/settings",icon:J,label:"Settings"}];return e.jsx("nav",{className:"mobile-nav",role:"navigation","aria-label":"Mobile navigation",children:e.jsx("div",{className:"flex justify-around",children:s.map(r=>{const i=t.pathname===r.to;return e.jsxs(ke,{to:r.to,className:`mobile-nav-item ${i?"active":""}`,"aria-label":`Navigate to ${r.label}`,children:[e.jsx(r.icon,{className:"w-5 h-5 mb-1"}),e.jsx("span",{children:r.label})]},r.to)})})})},_=[{value:"api-docs",label:"API Documentation",icon:"ğŸ”Œ",color:"blue"},{value:"user-guides",label:"User Guides",icon:"ğŸ“–",color:"green"},{value:"release-notes",label:"Release Notes",icon:"ğŸ“‹",color:"purple"},{value:"tutorials",label:"Tutorials",icon:"ğŸ“",color:"yellow"},{value:"technical-specs",label:"Technical Specifications",icon:"âš™ï¸",color:"gray"},{value:"reference",label:"Reference Documentation",icon:"ğŸ“š",color:"indigo"},{value:"troubleshooting",label:"Troubleshooting Guides",icon:"ğŸ”§",color:"red"},{value:"onboarding",label:"Onboarding Materials",icon:"ğŸš€",color:"teal"},{value:"other",label:"Other Documentation",icon:"ğŸ“„",color:"gray"}],le=[{value:"research",label:"Research & Discovery",icon:"ğŸ”",color:"blue"},{value:"writing",label:"Writing & Creation",icon:"âœï¸",color:"green"},{value:"review-editing",label:"Review & Editing",icon:"ğŸ“",color:"yellow"},{value:"version-updates",label:"Version Updates",icon:"ğŸ”„",color:"purple"},{value:"publishing",label:"Publishing & Distribution",icon:"ğŸ“¤",color:"indigo"},{value:"maintenance",label:"Maintenance & Updates",icon:"ğŸ› ï¸",color:"orange"}],ie=[{value:"draft-1",label:"Draft v1 (Initial)",color:"gray"},{value:"draft-2",label:"Draft v2 (Technical Review)",color:"blue"},{value:"draft-3",label:"Draft v3 (Stakeholder Review)",color:"yellow"},{value:"draft-final",label:"Draft (Final Edits)",color:"orange"},{value:"published-1-0",label:"Published v1.0",color:"green"},{value:"update-minor",label:"Update in Progress (Minor)",color:"purple"},{value:"update-major",label:"Major Revision in Progress",color:"red"},{value:"deprecated",label:"Deprecated",color:"gray"}],je=[{value:"current",label:"Current (< 3 months)",color:"green",daysThreshold:90},{value:"stale",label:"Stale (3-6 months)",color:"yellow",daysThreshold:180},{value:"outdated",label:"Outdated (6+ months)",color:"orange",daysThreshold:365},{value:"critical",label:"Critical - Needs Urgent Update",color:"red",daysThreshold:null},{value:"deprecated",label:"Deprecated",color:"gray",daysThreshold:null}],z=t=>_.find(s=>s.value===t)||_[_.length-1],he=t=>le.find(s=>s.value===t)||le[0],Dt=t=>ie.find(s=>s.value===t)||ie[0],Pt=t=>je.find(s=>s.value===t)||je[0],K=t=>{if(!t)return"critical";const s=Math.floor((new Date-new Date(t))/(1e3*60*60*24));return s<=90?"current":s<=180?"stale":s<=365?"outdated":"critical"},Ct=()=>{const{activeTimers:t,getFormattedElapsedTime:s,pauseTimer:r,resumeTimer:i,stopTimer:n}=ue();return!t||t.length===0?null:e.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-2",children:t.map(c=>{const d=z(c.contentType),f=he(c.type),l=c.status==="active";return e.jsxs("div",{className:`bg-white dark:bg-dark-800 rounded-lg shadow-lg border-l-4 p-3 min-w-64 ${l?"border-green-500 animate-pulse-soft":"border-yellow-500"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{className:`w-4 h-4 ${l?"text-green-600":"text-yellow-600"}`}),e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:l?"ACTIVE":"PAUSED"})]}),e.jsxs("div",{className:"flex space-x-1",children:[l?e.jsx("button",{onClick:()=>r(c.id),className:"p-1 text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 rounded",title:"Pause timer",children:e.jsx(Te,{className:"w-3 h-3"})}):e.jsx("button",{onClick:()=>i(c.id),className:"p-1 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded",title:"Resume timer",children:e.jsx(ae,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>n(c.id),className:"p-1 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Stop timer",children:e.jsx(Se,{className:"w-3 h-3"})})]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:c.description||`${f.label} - ${d.label}`}),e.jsxs("div",{className:"text-gray-600 dark:text-gray-400 text-xs",children:[d.icon," ",d.label]})]}),e.jsx("div",{className:"mt-2 text-lg font-mono font-bold text-center",children:s(c.startTime)})]},c.id)})})},$=t=>Me(new Date(t),"MMM d, yyyy"),fe=t=>Me(new Date(t),"h:mm a"),I=t=>{const s=Math.floor(t/60),r=t%60;return s>0?`${s}h ${r}m`:`${r}m`},Y=(t=new Date)=>{const s=ot(t,{weekStartsOn:1}),r=ct(t,{weekStartsOn:1});return{start:s,end:r}},D={dashboard:{recentProjects:5,todayTimeBlocks:20,documentationDebt:10,maxStatsCalculation:1e3},projectsPage:{itemsPerPage:20,maxVisible:100,searchDebounce:300},timeTracker:{recentSessions:50,historyDays:30,maxSessionsDisplay:20},weeklyReport:{maxWeeks:4,topProjects:10,maxTimeBlocks:500},general:{animationDuration:300,toastDuration:4e3,autoSaveDelay:1e3}},It=()=>{const t=L(async()=>{const i=new Date;i.setHours(0,0,0,0);const n=new Date(i);return n.setDate(n.getDate()+1),await j.timeBlocks.where("date").between(i.toISOString(),n.toISOString()).limit(D.dashboard.todayTimeBlocks).reverse().toArray()},[]),s=L(async()=>await j.projects.where("status").notEqual("archived").limit(D.dashboard.recentProjects).reverse().toArray(),[]),r=L(async()=>{const i=await j.projects.where("status").notEqual("archived").toArray(),n=[],c=50;for(let d=0;d<i.length&&n.length<D.dashboard.documentationDebt;d+=c){const f=i.slice(d,d+c);for(const l of f){if(n.length>=D.dashboard.documentationDebt)break;const h=K(l.lastUpdated);(h==="outdated"||h==="critical")&&n.push({...l,maintenanceStatus:h})}d+c<i.length&&await new Promise(l=>setTimeout(l,0))}return n},[]);return{todayBlocks:t,recentActiveProjects:s,documentationDebt:r}},Mt=(t,s=D.timeTracker.recentSessions)=>{var r,i;return L(async()=>t?await j.timeBlocks.where("date").between(t.start.toISOString(),t.end.toISOString()).limit(s).reverse().toArray():[],[(r=t==null?void 0:t.start)==null?void 0:r.toISOString(),(i=t==null?void 0:t.end)==null?void 0:i.toISOString(),s])},At=t=>{var r,i;return L(async()=>{if(!t)return{timeBlocks:[],projects:[]};try{const n=await j.timeBlocks.where("date").between(t.start.toISOString(),t.end.toISOString()).limit(D.weeklyReport.maxTimeBlocks).toArray(),c=[...new Set(n.map(f=>f.projectId).filter(Boolean))],d=c.length>0?await j.projects.where("id").anyOf(c).toArray():[];return{timeBlocks:n,projects:d}}catch(n){return console.error("Error fetching weekly data:",n),{timeBlocks:[],projects:[]}}},[(r=t==null?void 0:t.start)==null?void 0:r.toISOString(),(i=t==null?void 0:t.end)==null?void 0:i.toISOString()])??{timeBlocks:[],projects:[]}},ve=({size:t="medium",color:s="primary",text:r=null})=>{const i={small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12"},n={primary:"border-primary-600",white:"border-white",gray:"border-gray-600"};return e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[e.jsx("div",{className:`
          ${i[t]} 
          border-2 
          ${n[s]} 
          border-t-transparent 
          rounded-full 
          animate-spin
        `,role:"status","aria-label":"Loading"}),r&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r})]})},$t=()=>e.jsxs("div",{className:"card animate-pulse",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded"})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded-full w-20"}),e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded-full w-16"})]}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-24"})]})]}),Le=({count:t=3})=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[...Array(t)].map((s,r)=>e.jsx($t,{},r))}),Et=()=>{const{activeTimers:t,getFormattedElapsedTime:s}=ue(),[r,i]=u.useState({totalMinutes:0,researchMinutes:0,writingMinutes:0,completedTasks:0}),{todayBlocks:n,recentActiveProjects:c,documentationDebt:d}=It(),f=u.useMemo(()=>n?n.reduce((l,h)=>(h.duration&&(l.totalMinutes+=h.duration,h.type==="research"&&(l.researchMinutes+=h.duration),h.type==="writing"&&(l.writingMinutes+=h.duration),h.status==="completed"&&(l.completedTasks+=1)),l),{totalMinutes:0,researchMinutes:0,writingMinutes:0,completedTasks:0}):{totalMinutes:0,researchMinutes:0,writingMinutes:0,completedTasks:0},[n]);return u.useEffect(()=>{i(f)},[f]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:$(new Date)})]}),t&&t.length>0&&e.jsxs("div",{className:"flex items-center space-x-2 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 px-4 py-2 rounded-lg",children:[e.jsx(B,{className:"w-5 h-5 animate-pulse"}),e.jsxs("span",{children:[t.length," Active Timer",t.length>1?"s":"",": ",s(t[0].startTime)]})]})]}),e.jsxs("div",{className:"responsive-grid lg:grid-cols-4",children:[e.jsx("div",{className:"stat-card group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"responsive-text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Total Time Today"}),e.jsx("p",{className:"text-2xl md:text-3xl font-bold gradient-text mt-2",children:I(r.totalMinutes)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"+12% from yesterday"})]}),e.jsx("div",{className:"stat-icon p-3 md:p-4 bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl shadow-lg",children:e.jsx(B,{className:"w-6 h-6 md:w-8 md:h-8 text-white"})})]})}),e.jsx("div",{className:"stat-card group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Research Time"}),e.jsx("p",{className:"text-3xl font-bold gradient-text mt-2",children:I(r.researchMinutes)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Deep investigation"})]}),e.jsx("div",{className:"stat-icon p-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl shadow-lg",children:e.jsx(de,{className:"w-8 h-8 text-white"})})]})}),e.jsx("div",{className:"stat-card group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Writing Time"}),e.jsx("p",{className:"text-3xl font-bold gradient-text mt-2",children:I(r.writingMinutes)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Creative flow"})]}),e.jsx("div",{className:"stat-icon p-4 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl shadow-lg",children:e.jsx(me,{className:"w-8 h-8 text-white"})})]})}),e.jsx("div",{className:"stat-card group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Tasks Completed"}),e.jsx("p",{className:"text-3xl font-bold gradient-text mt-2",children:r.completedTasks}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Great progress!"})]}),e.jsx("div",{className:"stat-icon p-4 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl shadow-lg",children:e.jsx(F,{className:"w-8 h-8 text-white"})})]})})]}),d&&d.length>0&&e.jsxs("div",{className:"debt-alert card border-l-4 border-orange-500 bg-gradient-to-r from-orange-50/80 to-red-50/80 dark:from-orange-900/20 dark:to-red-900/20 backdrop-blur-sm animate-slide-up",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl animate-pulse-soft",children:e.jsx(H,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-orange-800 dark:text-orange-300",children:"Documentation Debt Alert"}),e.jsxs("p",{className:"text-sm text-orange-600 dark:text-orange-400",children:[d.length," document",d.length>1?"s need":" needs"," immediate attention"]})]})]}),e.jsx("div",{className:"space-y-3",children:d.slice(0,3).map((l,h)=>{const o=z(l.contentType),x=K(l.lastUpdated);return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/80 dark:bg-dark-800/80 backdrop-blur-sm rounded-xl border border-orange-200/50 dark:border-orange-700/30 hover:shadow-lg transition-all duration-300",style:{animationDelay:`${h*100}ms`},children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:o.icon}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:l.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o.label})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${x==="critical"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300"}`,children:x==="critical"?"ğŸš¨ Critical":"âš ï¸ Outdated"})]},l.id)})}),d.length>3&&e.jsx("div",{className:"mt-4 p-3 bg-white/50 dark:bg-dark-800/50 backdrop-blur-sm rounded-xl border border-orange-200/30 dark:border-orange-700/20",children:e.jsxs("p",{className:"text-sm text-orange-700 dark:text-orange-300 font-medium",children:["ğŸ“š +",d.length-3," more documents need updates"]})}),e.jsxs(R,{to:"/projects",className:"btn-primary mt-6 inline-flex items-center space-x-2 glow-effect",children:[e.jsx("span",{children:"Review Documentation Debt"}),e.jsx(H,{className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Today's Time Blocks"}),n===void 0?e.jsx(ve,{text:"Loading time blocks..."}):n&&n.length>0?e.jsx("div",{className:"space-y-2",children:n.map(l=>{const h=he(l.type),o=z(l.contentType);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-2 h-8 rounded bg-${h.color}-500`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:l.description||`${h.label} - ${o.label}`}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o.icon," ",o.label," â€¢ ",I(l.duration||0)]})]})]}),l.status==="completed"?e.jsx(F,{className:"w-5 h-5 text-green-500"}):e.jsx(De,{className:"w-5 h-5 text-yellow-500"})]},l.id)})}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No time blocks recorded yet today."}),e.jsx(R,{to:"/time",className:"mt-4 block text-center btn-primary",children:"Start Time Tracking"})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Projects"}),c===void 0?e.jsx(ve,{text:"Loading projects..."}):c&&c.length>0?e.jsx("div",{className:"space-y-2",children:c.map(l=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[l.team," â€¢ ",l.status]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[l.progress||0,"%"]}),e.jsx("div",{className:"w-20 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary-500 transition-all",style:{width:`${l.progress||0}%`}})})]})]},l.id))}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No recent projects."}),e.jsx(R,{to:"/projects",className:"mt-4 block text-center btn-primary",children:"View All Projects"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(R,{to:"/time",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-dark-700 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:[e.jsx(B,{className:"w-8 h-8 text-primary-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Start Timer"})]}),e.jsxs(R,{to:"/projects",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-dark-700 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:[e.jsx(ce,{className:"w-8 h-8 text-primary-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"New Project"})]}),e.jsxs(R,{to:"/weekly",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-dark-700 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:[e.jsx(G,{className:"w-8 h-8 text-primary-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Weekly Report"})]}),e.jsxs(R,{to:"/settings",className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-dark-700 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:[e.jsx(J,{className:"w-8 h-8 text-primary-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Settings"})]})]})]})]})},We=(t,s=20)=>{const[r,i]=u.useState(1),n=u.useMemo(()=>{if(!t)return{items:[],totalPages:0,hasNextPage:!1,hasPrevPage:!1};const h=(r-1)*s,o=h+s,x=t.slice(h,o),g=Math.ceil(t.length/s);return{items:x,totalPages:g,hasNextPage:r<g,hasPrevPage:r>1,currentPage:r,totalItems:t.length}},[t,r,s]),c=h=>{i(Math.max(1,Math.min(h,n.totalPages)))};return{...n,goToPage:c,nextPage:()=>c(r+1),prevPage:()=>c(r-1),reset:()=>i(1),setCurrentPage:i}},Ot=(t,{threshold:s=100,limit:r=20}={})=>{const[i,n]=u.useState([]),[c,d]=u.useState(!1),[f,l]=u.useState(!0),[h,o]=u.useState(0),[x,g]=u.useState(null),b=u.useCallback(async()=>{if(!(c||!f)){d(!0),g(null);try{const N=await t(h,r);N.length<r&&l(!1),n(M=>h===0?N:[...M,...N]),o(M=>M+1)}catch(N){g(N),console.error("Error loading more data:",N)}finally{d(!1)}}},[t,h,r,c,f]),k=u.useCallback(()=>{n([]),o(0),l(!0),g(null)},[]);u.useEffect(()=>{h===0&&b()},[]);const v=u.useCallback(N=>{const{scrollTop:M,scrollHeight:C,clientHeight:P}=N.target;C-M<=P+s&&b()},[b,s]);return{data:i,loading:c,hasMore:f,error:x,loadMore:b,reset:k,handleScroll:v}},Bt=({items:t,itemHeight:s=100,containerHeight:r=400,renderItem:i,overscan:n=5})=>{const[c,d]=u.useState(0),f=u.useRef(null);if(!t||t.length===0)return e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No items to display"});const l=t.length*s,h=Math.ceil(r/s),o=Math.max(0,Math.floor(c/s)-n),x=Math.min(t.length-1,o+h+n*2),g=t.slice(o,x+1),b=k=>{d(k.target.scrollTop)};return e.jsx("div",{ref:f,className:"overflow-auto",style:{height:r},onScroll:b,children:e.jsx("div",{style:{height:l,position:"relative"},children:e.jsx("div",{style:{transform:`translateY(${o*s}px)`,position:"absolute",top:0,left:0,right:0},children:g.map((k,v)=>e.jsx("div",{style:{height:s},children:i(k,o+v)},o+v))})})})},Re=({currentPage:t,totalPages:s,hasNextPage:r,hasPrevPage:i,onPageChange:n,totalItems:c,itemsPerPage:d=20})=>{if(s<=1)return null;const f=(t-1)*d+1,l=Math.min(t*d,c),o=(()=>{const x=[];let b=Math.max(1,t-Math.floor(2.5)),k=Math.min(s,b+5-1);k-b+1<5&&(b=Math.max(1,k-5+1));for(let v=b;v<=k;v++)x.push(v);return x})();return e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",f," to ",l," of ",c," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>n(t-1),disabled:!i,className:"p-2 rounded-lg border border-gray-300 dark:border-dark-600 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors","aria-label":"Previous page",children:e.jsx(Xe,{className:"w-4 h-4"})}),o[0]>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>n(1),className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-dark-600 hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",children:"1"}),o[0]>2&&e.jsx("span",{className:"text-gray-400",children:"..."})]}),o.map(x=>e.jsx("button",{onClick:()=>n(x),className:`px-3 py-2 rounded-lg border transition-colors ${x===t?"bg-primary-600 text-white border-primary-600":"border-gray-300 dark:border-dark-600 hover:bg-gray-50 dark:hover:bg-dark-700"}`,children:x},x)),o[o.length-1]<s&&e.jsxs(e.Fragment,{children:[o[o.length-1]<s-1&&e.jsx("span",{className:"text-gray-400",children:"..."}),e.jsx("button",{onClick:()=>n(s),className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-dark-600 hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",children:s})]}),e.jsx("button",{onClick:()=>n(t+1),disabled:!r,className:"p-2 rounded-lg border border-gray-300 dark:border-dark-600 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors","aria-label":"Next page",children:e.jsx(Ke,{className:"w-4 h-4"})})]})]})},te=Q.memo(({block:t})=>{const s=he(t.type),r=z(t.contentType),i=s.value==="research"?de:s.value==="writing"?me:s.value==="review-editing"?G:s.value==="version-updates"?xe:s.value==="publishing"?Pe:J;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 bg-${s.color}-100 rounded-lg`,children:Q.createElement(i,{className:`w-5 h-5 text-${s.color}-600`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.description||`${s.label} - ${r.label}`}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.icon," ",r.label," â€¢ ",fe(t.startTime)," - ",t.endTime?fe(t.endTime):"In progress"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:I(t.duration||0)}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.label})]})]})}),Lt=()=>{const{activeTimers:t,startTimer:s,stopTimer:r,pauseTimer:i,resumeTimer:n,getFormattedElapsedTime:c}=ue(),[d,f]=u.useState("writing"),[l,h]=u.useState("user-guides"),[o,x]=u.useState(""),[g,b]=u.useState(""),[k,v]=u.useState(!1),N=L(()=>j.projects.where("status").notEqual("archived").limit(50).toArray(),[]),M=u.useMemo(()=>{const m=new Date;m.setHours(0,0,0,0);const S=new Date(m);return S.setDate(S.getDate()+1),{start:m,end:S}},[]),C=Mt(M,D.timeTracker.maxSessionsDisplay),P=We(C||[],D.timeTracker.maxSessionsDisplay),U=async(m,S)=>{const A=m*S,Z=new Date;return Z.setDate(Z.getDate()-1),await j.timeBlocks.where("date").below(Z.toISOString()).reverse().offset(A).limit(S).toArray()},{data:O,loading:W,hasMore:V,error:a,handleScroll:p}=Ot(U,{threshold:100,limit:D.timeTracker.recentSessions}),y=le.map(m=>({value:m.value,label:m.label,icon:m.value==="research"?de:m.value==="writing"?me:m.value==="review-editing"?G:m.value==="version-updates"?xe:m.value==="publishing"?Pe:J,color:m.color})),T=async()=>{if(!o){w.error("Please select a project");return}if(!g.trim()){w.error("Please provide a task description");return}try{await s(d,o,g,l),b("")}catch(m){console.error("Failed to start timer:",m)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Time Tracking"}),e.jsx("div",{className:"card text-center",children:t&&t.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-6xl font-mono font-bold text-gray-900 dark:text-gray-100 mb-4",children:c(t[0].startTime)}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:t[0].description||`${t[0].type} - ${t[0].contentType}`}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[t[0].status==="active"?e.jsxs("button",{onClick:()=>i(t[0].id),className:"btn-secondary flex items-center space-x-2",children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("span",{children:"Pause"})]}):e.jsxs("button",{onClick:()=>n(t[0].id),className:"btn-primary flex items-center space-x-2",children:[e.jsx(ae,{className:"w-5 h-5"}),e.jsx("span",{children:"Resume"})]}),e.jsxs("button",{onClick:()=>r(t[0].id),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200 font-medium flex items-center space-x-2",children:[e.jsx(Se,{className:"w-5 h-5"}),e.jsx("span",{children:"Stop"})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-6xl font-mono font-bold text-gray-900 dark:text-gray-100 mb-4",children:"0:00"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Work Phase"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:y.map(m=>e.jsxs("button",{onClick:()=>f(m.value),className:`p-3 rounded-lg border-2 transition-all ${d===m.value?`border-${m.color}-500 bg-${m.color}-50`:"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(m.icon,{className:`w-5 h-5 mx-auto mb-1 ${d===m.value?`text-${m.color}-600`:"text-gray-600 dark:text-gray-400"}`}),e.jsx("span",{className:"text-xs text-center",children:m.label})]},m.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content Type"}),e.jsx("select",{value:l,onChange:m=>h(m.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:_.map(m=>e.jsxs("option",{value:m.value,children:[m.icon," ",m.label]},m.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Project"}),e.jsxs("select",{value:o,onChange:m=>x(m.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200","aria-describedby":"project-error",required:!0,children:[e.jsx("option",{value:"",children:"Select a project..."}),N==null?void 0:N.map(m=>e.jsxs("option",{value:m.id,children:[m.name," (",m.team,")"]},m.id))]}),!o&&e.jsx("p",{id:"project-error",className:"mt-1 text-sm text-red-600",children:"Project selection is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description *"}),e.jsx("input",{type:"text",value:g,onChange:m=>b(m.target.value),placeholder:"What specific task are you working on?",className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200","aria-describedby":"description-error",required:!0}),!g.trim()&&e.jsx("p",{id:"description-error",className:"mt-1 text-sm text-red-600",children:"Task description is required"})]}),e.jsxs("button",{onClick:T,className:"btn-primary flex items-center justify-center space-x-2 w-full",children:[e.jsx(ae,{className:"w-5 h-5"}),e.jsx("span",{children:"Start Timer"})]})]})}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Today's Sessions"}),C&&C.length>D.timeTracker.maxSessionsDisplay&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",P.items.length," of ",C.length," sessions"]})]}),C===void 0?e.jsx(Le,{count:3}):C&&C.length>0?e.jsxs(e.Fragment,{children:[C.length>D.timeTracker.maxSessionsDisplay?e.jsx(Bt,{items:P.items,itemHeight:80,containerHeight:400,renderItem:m=>e.jsx(te,{block:m},m.id)}):e.jsx("div",{className:"space-y-3",children:P.items.map(m=>e.jsx(te,{block:m},m.id))}),C.length>D.timeTracker.maxSessionsDisplay&&e.jsx("div",{className:"mt-6",children:e.jsx(Re,{currentPage:P.currentPage,totalPages:P.totalPages,hasNextPage:P.hasNextPage,hasPrevPage:P.hasPrevPage,onPageChange:P.goToPage,totalItems:P.totalItems,itemsPerPage:D.timeTracker.maxSessionsDisplay})})]}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No time blocks recorded today yet."})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Time Block History"}),e.jsx("button",{onClick:()=>v(!k),className:"btn-secondary",children:k?"Hide History":"Show History"})]}),k&&e.jsx("div",{children:a?e.jsxs("div",{className:"text-red-600 dark:text-red-400 text-center py-4",children:["Error loading history: ",a.message]}):O.length===0&&!W?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No historical time blocks found."}):e.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",onScroll:p,children:[O.map(m=>e.jsx(te,{block:m},m.id)),W&&e.jsx("div",{className:"text-center py-4",children:e.jsxs("div",{className:"inline-flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading more..."})]})}),!V&&O.length>0&&e.jsx("div",{className:"text-center py-4 text-sm text-gray-500 dark:text-gray-400",children:"No more history to load"})]})})]})]})},oe=u.memo(({project:t,onEdit:s,onArchive:r,getStatusIcon:i,getStatusColor:n,getPriorityColor:c,statuses:d,priorities:f})=>{var k,v;const l=i(t.status),h=n(t.status),o=c(t.priority),x=z(t.contentType),g=Dt(t.version),b=Pt(t.maintenanceStatus||K(t.lastUpdated));return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"text-lg font-semibold",children:t.name}),e.jsx("span",{className:"text-lg",children:x.icon})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.team," â€¢ ",x.label]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:g.label})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>s(t),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100","aria-label":"Edit project",children:e.jsx(Ce,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>r(t.id),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100","aria-label":"Archive project",children:e.jsx(Ie,{className:"w-4 h-4"})})]})]}),t.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:t.description}),(b.value==="outdated"||b.value==="critical")&&e.jsxs("div",{className:`flex items-center space-x-2 p-2 mb-3 rounded-lg bg-${b.color}-50 border border-${b.color}-200`,children:[e.jsx(H,{className:`w-4 h-4 text-${b.color}-600`}),e.jsxs("span",{className:`text-sm text-${b.color}-700`,children:["Documentation Debt: ",b.label]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`flex items-center space-x-1 text-sm px-2 py-1 bg-${h}-100 text-${h}-700 rounded`,children:[e.jsx(l,{className:"w-4 h-4"}),e.jsx("span",{children:(k=d.find(N=>N.value===t.status))==null?void 0:k.label})]}),e.jsx("span",{className:`text-sm px-2 py-1 bg-${o}-100 text-${o}-700 rounded`,children:(v=f.find(N=>N.value===t.priority))==null?void 0:v.label})]}),t.dueDate&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Due: ",$(t.dueDate)]})]}),t.lastUpdated&&e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["Last updated: ",$(t.lastUpdated)]}),e.jsx("span",{className:`px-2 py-1 rounded bg-${b.color}-100 text-${b.color}-700`,children:b.label})]})]})]})});oe.displayName="ProjectCard";const Wt=(t,s)=>{let r;return function(...n){const c=()=>{clearTimeout(r),t(...n)};clearTimeout(r),r=setTimeout(c,s)}},Rt=()=>{const[t,s]=u.useState(!1),[r,i]=u.useState(null),[n,c]=u.useState(""),[d,f]=u.useState({status:"all",team:"all",contentType:"all"}),[l,h]=u.useState({name:"",team:"",description:"",status:"planning",priority:"medium",dueDate:"",contentType:"user-guides",version:"draft-1",lastUpdated:new Date().toISOString().split("T")[0]}),o=L(()=>j.projects.reverse().toArray(),[]),x=u.useMemo(()=>o?o.filter(a=>{if(n){const p=n.toLowerCase();if(!(a.name.toLowerCase().includes(p)||a.team.toLowerCase().includes(p)||a.description&&a.description.toLowerCase().includes(p)))return!1}return!(d.status!=="all"&&a.status!==d.status||d.team!=="all"&&a.team!==d.team||d.contentType!=="all"&&a.contentType!==d.contentType)}):[],[o,n,d]),g=We(x,D.projectsPage.itemsPerPage),b=u.useMemo(()=>Wt(a=>c(a),D.projectsPage.searchDebounce),[]),k=["Team Alpha","Team Beta","Team Gamma","Other"],v=[{value:"planning",label:"Planning",color:"blue"},{value:"in-progress",label:"In Progress",color:"yellow"},{value:"review",label:"Review",color:"purple"},{value:"published",label:"Published",color:"green"},{value:"archived",label:"Archived",color:"gray"}],N=[{value:"high",label:"High",color:"red"},{value:"medium",label:"Medium",color:"yellow"},{value:"low",label:"Low",color:"green"}],M=()=>{const a=[];return l.name.trim()||a.push("Project name is required"),l.team||a.push("Team selection is required"),l.dueDate&&new Date(l.dueDate)<new Date&&a.push("Due date cannot be in the past"),a},C=async a=>{a.preventDefault();const p=M();if(p.length>0){p.forEach(y=>w.error(y));return}try{const y={...l,maintenanceStatus:K(l.lastUpdated)};r?(await ye(r.id,y),w.success("Project updated successfully")):(await jt(y),w.success("Project created successfully")),h({name:"",team:"",description:"",status:"planning",priority:"medium",dueDate:"",contentType:"user-guides",version:"draft-1",lastUpdated:new Date().toISOString().split("T")[0]}),s(!1),i(null)}catch{w.error("Failed to save project")}},P=u.useCallback(a=>{i(a),h({name:a.name,team:a.team,description:a.description||"",status:a.status,priority:a.priority||"medium",dueDate:a.dueDate||"",contentType:a.contentType||"user-guides",version:a.version||"draft-1",lastUpdated:a.lastUpdated||new Date().toISOString().split("T")[0]}),s(!0)},[]),U=u.useCallback(async a=>{await ye(a,{status:"archived"}),w.success("Project archived")},[]),O=a=>{switch(a){case"planning":return B;case"in-progress":return De;case"review":return Ce;case"published":return F;case"archived":return Ie;default:return ge}},W=a=>{const p=v.find(y=>y.value===a);return p?p.color:"gray"},V=a=>{const p=N.find(y=>y.value===a);return p?p.color:"gray"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Projects"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[g.totalItems," total projects ",x.length!==(o==null?void 0:o.length)&&`(${x.length} filtered)`]})]}),e.jsxs("button",{onClick:()=>s(!t),className:"btn-primary flex items-center space-x-2",children:[e.jsx(se,{className:"w-5 h-5"}),e.jsx("span",{children:"New Project"})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Search Projects"}),e.jsx("input",{type:"text",placeholder:"Search by name, team, or description...",onChange:a=>b(a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{value:d.status,onChange:a=>f(p=>({...p,status:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:[e.jsx("option",{value:"all",children:"All Statuses"}),v.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Team"}),e.jsxs("select",{value:d.team,onChange:a=>f(p=>({...p,team:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:[e.jsx("option",{value:"all",children:"All Teams"}),k.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Content Type"}),e.jsxs("select",{value:d.contentType,onChange:a=>f(p=>({...p,contentType:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:[e.jsx("option",{value:"all",children:"All Types"}),_.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]})]})}),t&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:r?"Edit Project":"New Project"}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Name"}),e.jsx("input",{type:"text",value:l.name,onChange:a=>h({...l,name:a.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200","aria-describedby":"name-error"}),!l.name.trim()&&e.jsx("p",{id:"name-error",className:"mt-1 text-sm text-red-600",children:"Project name is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Content Type"}),e.jsx("select",{value:l.contentType,onChange:a=>h({...l,contentType:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:_.map(a=>e.jsxs("option",{value:a.value,children:[a.icon," ",a.label]},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Team"}),e.jsxs("select",{value:l.team,onChange:a=>h({...l,team:a.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200","aria-describedby":"team-error",children:[e.jsx("option",{value:"",children:"Select team..."}),k.map(a=>e.jsx("option",{value:a,children:a},a))]}),!l.team&&e.jsx("p",{id:"team-error",className:"mt-1 text-sm text-red-600",children:"Team selection is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Document Version"}),e.jsx("select",{value:l.version,onChange:a=>h({...l,version:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:ie.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsx("select",{value:l.status,onChange:a=>h({...l,status:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:v.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Priority"}),e.jsx("select",{value:l.priority,onChange:a=>h({...l,priority:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200",children:N.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",value:l.dueDate,onChange:a=>h({...l,dueDate:a.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200","aria-describedby":"due-date-error"}),l.dueDate&&new Date(l.dueDate)<new Date&&e.jsx("p",{id:"due-date-error",className:"mt-1 text-sm text-red-600",children:"Due date cannot be in the past"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Last Updated"}),e.jsx("input",{type:"date",value:l.lastUpdated,onChange:a=>h({...l,lastUpdated:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:l.description,onChange:a=>h({...l,description:a.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-dark-800 dark:text-gray-200"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>{s(!1),i(null),h({name:"",team:"",description:"",status:"planning",priority:"medium",dueDate:"",contentType:"user-guides",version:"draft-1",lastUpdated:new Date().toISOString().split("T")[0]})},className:"btn-secondary",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn-primary",children:[r?"Update":"Create"," Project"]})]})]})]}),o===void 0?e.jsx(Le,{count:4}):x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ge,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:o.length===0?"No projects yet. Create your first project!":"No projects match your filters. Try adjusting your search criteria."})]}):e.jsxs(e.Fragment,{children:[x.length>D.projectsPage.maxVisible?e.jsx(VirtualizedList,{items:g.items,itemHeight:200,containerHeight:600,renderItem:a=>e.jsx("div",{className:"p-2",children:e.jsx(oe,{project:a,onEdit:P,onArchive:U,getStatusIcon:O,getStatusColor:W,getPriorityColor:V,statuses:v,priorities:N},a.id)})}):e.jsx("div",{className:"responsive-grid",children:g.items.map(a=>e.jsx(oe,{project:a,onEdit:P,onArchive:U,getStatusIcon:O,getStatusColor:W,getPriorityColor:V,statuses:v,priorities:N},a.id))}),e.jsx(Re,{currentPage:g.currentPage,totalPages:g.totalPages,hasNextPage:g.hasNextPage,hasPrevPage:g.hasPrevPage,onPageChange:g.goToPage,totalItems:g.totalItems,itemsPerPage:D.projectsPage.itemsPerPage})]})]})},Ft=()=>{const[t,s]=u.useState(Y()),[r,i]=u.useState([""]),[n,c]=u.useState([""]),[d,f]=u.useState(""),{timeBlocks:l,projects:h}=At(t),o=u.useMemo(()=>{if(!l||l.length===0)return{total:0,deepWork:0,meetings:0,planning:0,research:0,writing:0,review:0};const a=100;let p={total:0,deepWork:0,meetings:0,planning:0,research:0,writing:0,review:0};for(let y=0;y<l.length;y+=a){const m=l.slice(y,y+a).reduce((S,A)=>{if(A.duration)switch(S.total+=A.duration,A.type){case"research":S.research+=A.duration;break;case"writing":S.writing+=A.duration;break;case"review-editing":S.review+=A.duration;break;case"deep-work":S.deepWork+=A.duration;break;case"meeting":S.meetings+=A.duration;break;case"planning":S.planning+=A.duration;break}return S},{total:0,deepWork:0,meetings:0,planning:0,research:0,writing:0,review:0});Object.keys(m).forEach(S=>{p[S]+=m[S]})}return p},[l]),x=u.useMemo(()=>{if(!l||!h||l.length===0)return[];const a=new Map;return l.forEach(y=>{if(y.projectId&&y.duration){const T=a.get(y.projectId)||0;a.set(y.projectId,T+y.duration)}}),Array.from(a.entries()).map(([y,T])=>{const m=h.find(S=>S.id===parseInt(y));return{projectName:(m==null?void 0:m.name)||"Unknown Project",team:(m==null?void 0:m.team)||"",minutes:T,projectId:y}}).sort((y,T)=>T.minutes-y.minutes).slice(0,D.weeklyReport.topProjects)},[l,h]),g=()=>{i([...r,""])},b=a=>{i(r.filter((p,y)=>y!==a))},k=(a,p)=>{const y=[...r];y[a]=p,i(y)},v=()=>{c([...n,""])},N=a=>{c(n.filter((p,y)=>y!==a))},M=(a,p)=>{const y=[...n];y[a]=p,c(y)},C=()=>{const a=r.filter(T=>T.trim()!==""),p=n.filter(T=>T.trim()!==""),y=`Weekly Summary - ${$(t.start)} to ${$(t.end)}

Time Breakdown:
â€¢ Total Time: ${I(o.total)}
â€¢ Deep Work: ${I(o.deepWork)}
â€¢ Meetings: ${I(o.meetings)}
â€¢ Planning: ${I(o.planning)}

Project Time Allocation:
${x.map(T=>`â€¢ ${T.projectName} (${T.team}): ${I(T.minutes)}`).join(`
`)}

Completed This Week:
${a.map(T=>`â€¢ ${T}`).join(`
`)}

In Progress:
${p.map(T=>`â€¢ ${T}`).join(`
`)}

Generated on ${$(new Date)}`;f(y)},P=async()=>{try{await navigator.clipboard.writeText(d),w.success("Summary copied to clipboard!")}catch{w.error("Failed to copy to clipboard")}},U=()=>{const a=`Weekly Summary - ${$(t.start)} to ${$(t.end)}`,p=encodeURIComponent(d);window.open(`mailto:?subject=${encodeURIComponent(a)}&body=${p}`)};u.useEffect(()=>{o.total>0&&C()},[o,r,n,x]);const O=()=>{const a=new Date(t.start);a.setDate(a.getDate()-7),s(Y(a))},W=()=>{const a=new Date(t.start);a.setDate(a.getDate()+7),s(Y(a))},V=()=>{s(Y())};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Weekly Summary"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:O,className:"btn-secondary",children:"â† Previous"}),e.jsxs("span",{className:"font-medium",children:[$(t.start)," - ",$(t.end)]}),e.jsx("button",{onClick:W,className:"btn-secondary",children:"Next â†’"}),e.jsx("button",{onClick:V,className:"btn-primary",children:"Current Week"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Time"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:I(o.total)})]}),e.jsx(B,{className:"w-8 h-8 text-primary-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Research & Writing"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:I(o.research+o.writing)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[o.total>0&&Math.round((o.research+o.writing)/o.total*100),"%"]})]}),e.jsx(Ze,{className:"w-8 h-8 text-purple-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Review & Editing"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:I(o.review)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[o.total>0&&Math.round(o.review/o.total*100),"%"]})]}),e.jsx(F,{className:"w-8 h-8 text-green-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Meetings & Planning"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:I(o.meetings+o.planning)}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[o.total>0&&Math.round((o.meetings+o.planning)/o.total*100),"%"]})]}),e.jsx(et,{className:"w-8 h-8 text-blue-500"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Project Time Allocation"}),x.length>=D.weeklyReport.topProjects&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Top ",D.weeklyReport.topProjects," projects"]})]}),x.length>0?e.jsxs("div",{className:"space-y-3",children:[x.map((a,p)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:a.projectName}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:a.team})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsx("p",{className:"font-medium",children:I(a.minutes)}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o.total>0?Math.round(a.minutes/o.total*100):0,"%"]})]})]},a.projectId||p)),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Weekly Efficiency"}),e.jsxs("span",{className:"font-medium text-blue-800 dark:text-blue-200",children:[x.length," active projects"]})]})})]}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No time tracked this week."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Completed This Week"}),e.jsxs("button",{onClick:g,className:"btn-primary flex items-center space-x-2",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:"Add"})]})]}),e.jsx("div",{className:"space-y-2",children:r.map((a,p)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:a,onChange:y=>k(p,y.target.value),placeholder:"What did you complete?",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>b(p),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400",children:e.jsx(re,{className:"w-4 h-4"})})]},p))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"In Progress"}),e.jsxs("button",{onClick:v,className:"btn-primary flex items-center space-x-2",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:"Add"})]})]}),e.jsx("div",{className:"space-y-2",children:n.map((a,p)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:a,onChange:y=>M(p,y.target.value),placeholder:"What are you working on?",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>N(p),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400",children:e.jsx(re,{className:"w-4 h-4"})})]},p))})]})]}),d&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Email Summary"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:P,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{children:"Copy"})]}),e.jsxs("button",{onClick:U,className:"btn-primary flex items-center space-x-2",children:[e.jsx(at,{className:"w-4 h-4"}),e.jsx("span",{children:"Email"})]})]})]}),e.jsx("pre",{className:"bg-gray-50 dark:bg-dark-700 p-4 rounded-lg text-sm whitespace-pre-wrap",children:d})]})]})},Ut=()=>{const[t,s]=u.useState(localStorage.getItem("lastBackupDate")),[r,i]=u.useState(!1),n=u.useRef(null),c=async()=>{await Be(),s(new Date().toISOString())},d=()=>{var x;(x=n.current)==null||x.click()},f=async x=>{var b;const g=(b=x.target.files)==null?void 0:b[0];g&&(await wt(g),n.current&&(n.current.value=""))},l=async()=>{if(!r){i(!0);return}try{await j.timeBlocks.clear(),await j.projects.clear(),await j.weeklySummaries.clear(),await j.preferences.clear(),localStorage.removeItem("lastBackupDate"),s(null),w.success("All data cleared successfully"),i(!1),setTimeout(()=>window.location.reload(),1e3)}catch(x){w.error("Failed to clear data: "+x.message),i(!1)}},h=()=>{i(!1)},o=x=>x?new Date(x).toLocaleString():"Never";return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Settings"}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(st,{className:"w-6 h-6 text-primary-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Data Management"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-dark-700 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Backup"}),e.jsx("p",{className:"font-medium dark:text-gray-200",children:o(t)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-dark-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Export Data"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Download a backup of all your data as a JSON file"})]}),e.jsxs("button",{onClick:c,className:"btn-primary flex items-center space-x-2",children:[e.jsx(we,{className:"w-4 h-4"}),e.jsx("span",{children:"Export"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-dark-600 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Import Data"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Restore data from a backup file (this will replace all existing data)"})]}),e.jsxs("div",{children:[e.jsx("input",{ref:n,type:"file",accept:".json",onChange:f,className:"hidden"}),e.jsxs("button",{onClick:d,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsx("span",{children:"Import"})]})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(rt,{className:"w-6 h-6 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Privacy & Storage"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(F,{className:"w-5 h-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Local Storage Only"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"All your data is stored locally in your browser using IndexedDB. No data is sent to external servers."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(F,{className:"w-5 h-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"No Analytics or Tracking"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This application doesn't use any analytics, tracking, or third-party services."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(F,{className:"w-5 h-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Offline Capable"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"The application works completely offline after the initial load."})]})]})]})]}),e.jsxs("div",{className:"card border-red-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(H,{className:"w-6 h-6 text-red-600"}),e.jsx("h3",{className:"text-lg font-semibold text-red-600",children:"Danger Zone"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Clear All Data"}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"This will permanently delete all your time blocks, projects, and settings. This action cannot be undone. Make sure to export your data first!"}),r?e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"font-medium text-red-800",children:"Are you absolutely sure? This will delete everything!"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:l,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200 font-medium",children:"Yes, Delete Everything"}),e.jsx("button",{onClick:h,className:"btn-secondary",children:"Cancel"})]})]}):e.jsxs("button",{onClick:l,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200 font-medium flex items-center space-x-2",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"Clear All Data"})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"About"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Version:"})," 1.0.0"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Built with:"})," React, Vite, Tailwind CSS, Dexie.js"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"License:"})," MIT"]}),e.jsx("p",{children:"A productivity dashboard designed for technical writers to track time, manage projects, and generate weekly reports."})]})]})]})};function Vt(){return e.jsx(E,{fallbackMessage:"The Technical Writer Dashboard encountered an error. Please try refreshing the page.",children:e.jsx(yt,{children:e.jsx(Nt,{children:e.jsx(qe,{basename:"/technical-writer-dashboard/",children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 dark:from-dark-900 dark:via-dark-800 dark:to-indigo-950 transition-all duration-500",children:[e.jsx(E,{fallbackMessage:"Navigation component failed to load.",children:e.jsx(Tt,{})}),e.jsx("main",{className:"container mx-auto px-4 py-8 pb-20 md:pb-8",children:e.jsxs(He,{children:[e.jsx(q,{path:"/",element:e.jsx(E,{fallbackMessage:"Dashboard component failed to load.",children:e.jsx(Et,{})})}),e.jsx(q,{path:"/time",element:e.jsx(E,{fallbackMessage:"Time Tracker component failed to load.",children:e.jsx(Lt,{})})}),e.jsx(q,{path:"/projects",element:e.jsx(E,{fallbackMessage:"Project Manager component failed to load.",children:e.jsx(Rt,{})})}),e.jsx(q,{path:"/weekly",element:e.jsx(E,{fallbackMessage:"Weekly Summary component failed to load.",children:e.jsx(Ft,{})})}),e.jsx(q,{path:"/settings",element:e.jsx(E,{fallbackMessage:"Settings component failed to load.",children:e.jsx(Ut,{})})})]})}),e.jsx(E,{fallbackMessage:"Mobile navigation failed to load.",children:e.jsx(St,{})}),e.jsx(E,{fallbackMessage:"Active timer display failed to load.",children:e.jsx(Ct,{})}),e.jsx(nt,{position:"top-right",toastOptions:{className:"dark:bg-dark-800 dark:text-white",style:{background:"var(--toast-bg)",color:"var(--toast-color)"}}})]})})})})})}ne.createRoot(document.getElementById("root")).render(e.jsx(Q.StrictMode,{children:e.jsx(Vt,{})}));
