var Ce=Object.defineProperty;var Ie=(s,a,r)=>a in s?Ce(s,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[a]=r;var Q=(s,a,r)=>Ie(s,typeof a!="symbol"?a+"":a,r);import{r as p,b as Pe,a as U}from"./vendor-DqFL8qPw.js";import{N as ue,u as Ae,L as $,B as Me,R as $e,a as W}from"./router-Cby2BMk6.js";import{A as _,R as Oe,H as Be,V as w,S as Ee,L as he,C as O,F as re,a as F,b as q,c as Re,M as We,D as pe,d as X,P as Y,e as B,f as ge,U as K,g as le,h as Le,i as ne,j as Ue,k as je,l as be,m as Z,n as ie,T as _e,o as Fe,p as ee,q as qe,r as Ve,s as He,t as Ge,O as Je}from"./ui-D02-WU1K.js";import{F as ze,f as ye,s as Qe,e as Xe}from"./utils-D1IEH3Ga.js";import{X as Ye,u as E}from"./data-BEr-VgmV.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const c of t)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function r(t){const c={};return t.integrity&&(c.integrity=t.integrity),t.referrerPolicy&&(c.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?c.credentials="include":t.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(t){if(t.ep)return;t.ep=!0;const c=r(t);fetch(t.href,c)}})();var fe={exports:{}},J={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ke=p,Ze=Symbol.for("react.element"),es=Symbol.for("react.fragment"),ss=Object.prototype.hasOwnProperty,ts=Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,as={key:!0,ref:!0,__self:!0,__source:!0};function ve(s,a,r){var n,t={},c=null,h=null;r!==void 0&&(c=""+r),a.key!==void 0&&(c=""+a.key),a.ref!==void 0&&(h=a.ref);for(n in a)ss.call(a,n)&&!as.hasOwnProperty(n)&&(t[n]=a[n]);if(s&&s.defaultProps)for(n in a=s.defaultProps,a)t[n]===void 0&&(t[n]=a[n]);return{$$typeof:Ze,type:s,key:c,ref:h,props:t,_owner:ts.current}}J.Fragment=es;J.jsx=ve;J.jsxs=ve;fe.exports=J;var e=fe.exports,se={},ce=Pe;se.createRoot=ce.createRoot,se.hydrateRoot=ce.hydrateRoot;const Ne=p.createContext(),rs=()=>{const s=p.useContext(Ne);if(!s)throw new Error("useTheme must be used within a ThemeProvider");return s},ls=({children:s})=>{const[a,r]=p.useState(()=>{const t=localStorage.getItem("theme");return t?t==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});p.useEffect(()=>{const t=window.document.documentElement;a?t.classList.add("dark"):t.classList.remove("dark"),localStorage.setItem("theme",a?"dark":"light")},[a]);const n=()=>{r(!a)};return e.jsx(Ne.Provider,{value:{isDark:a,toggleTheme:n},children:s})};class M extends U.Component{constructor(r){super(r);Q(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});Q(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,n){this.setState({error:r,errorInfo:n}),console.error("Error caught by boundary:",r,n)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 dark:from-dark-900 dark:via-dark-800 dark:to-indigo-950 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white/80 dark:bg-dark-800/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 dark:border-dark-700/50 p-8 text-center",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl shadow-lg mb-6 mx-auto w-fit",children:e.jsx(_,{className:"w-12 h-12 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:this.props.fallbackMessage||"An unexpected error occurred while loading this component."}),!1,e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:this.handleReset,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-primary-600 text-white rounded-xl font-semibold hover:bg-primary-700 transition-colors duration-300",children:[e.jsx(Oe,{className:"w-4 h-4"}),e.jsx("span",{children:"Try Again"})]}),e.jsxs("button",{onClick:()=>window.location.href="/technical-writer-dashboard/",className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-gray-600 text-white rounded-xl font-semibold hover:bg-gray-700 transition-colors duration-300",children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{children:"Go Home"})]})]}),e.jsx("button",{onClick:this.handleReload,className:"mt-4 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:"Or reload the entire page"})]})}):this.props.children}}const j=new Ye("TechWriterDB");j.version(2).stores({timeBlocks:"++id, date, type, contentType, workPhase, startTime, endTime, projectId",projects:"++id, name, team, status, contentType, version, lastUpdated, maintenanceStatus, createdAt",weeklySummaries:"++id, weekStart, weekEnd, createdAt",preferences:"key, value"});const ns=async s=>await j.timeBlocks.add({...s,createdAt:new Date().toISOString()}),is=async s=>await j.projects.add({...s,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),oe=async(s,a)=>await j.projects.update(s,{...a,updatedAt:new Date().toISOString()}),we=async()=>{try{const s=await j.timeBlocks.toArray(),a=await j.projects.toArray(),r=await j.weeklySummaries.toArray(),n=await j.preferences.toArray(),t={version:"1.0",exportDate:new Date().toISOString(),data:{timeBlocks:s,projects:a,weeklySummaries:r,preferences:n}},c=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),h=`techwriter-backup-${new Date().toISOString().split("T")[0]}.json`;ze.saveAs(c,h),localStorage.setItem("lastBackupDate",new Date().toISOString()),w.success("Data exported successfully!")}catch(s){w.error("Export failed: "+s.message)}},cs=async s=>{try{const a=await s.text(),r=JSON.parse(a);if(!r.version||!r.data)throw new Error("Invalid backup file format");if(!window.confirm("This will replace all existing data. Are you sure you want to continue?"))return;await j.timeBlocks.clear(),await j.projects.clear(),await j.weeklySummaries.clear(),await j.preferences.clear(),r.data.timeBlocks&&await j.timeBlocks.bulkAdd(r.data.timeBlocks),r.data.projects&&await j.projects.bulkAdd(r.data.projects),r.data.weeklySummaries&&await j.weeklySummaries.bulkAdd(r.data.weeklySummaries),r.data.preferences&&await j.preferences.bulkAdd(r.data.preferences),w.success("Data imported successfully!"),setTimeout(()=>window.location.reload(),1e3)}catch(a){w.error("Import failed: "+a.message)}},os=()=>{const{isDark:s,toggleTheme:a}=rs(),r=[{to:"/",icon:he,label:"Dashboard"},{to:"/time",icon:O,label:"Time Tracking"},{to:"/projects",icon:re,label:"Projects"},{to:"/weekly",icon:F,label:"Weekly Summary"},{to:"/settings",icon:q,label:"Settings"}];return e.jsx("nav",{className:"backdrop-blur-md bg-white/80 dark:bg-dark-900/80 border-b border-white/20 dark:border-dark-700/50 sticky top-0 z-50",role:"navigation","aria-label":"Main navigation",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"flex items-center justify-between h-20",children:[e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-primary-500 to-purple-600 rounded-xl",children:e.jsx(Ee,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold gradient-text",children:"TechWriter"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium tracking-wider",children:"DASHBOARD"})]})]}),e.jsx("div",{className:"hidden md:flex space-x-2",children:r.map(n=>e.jsxs(ue,{to:n.to,className:({isActive:t})=>`nav-link flex items-center space-x-2 text-sm font-medium ${t?"active":""}`,"aria-label":`Navigate to ${n.label}`,children:[e.jsx(n.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden lg:inline",children:n.label})]},n.to))})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:a,className:"relative p-3 rounded-xl bg-white/50 dark:bg-dark-700/50 backdrop-blur-sm border border-white/30 dark:border-dark-600/30 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-all duration-300 hover:scale-110 hover:shadow-lg group",title:s?"Switch to light mode":"Switch to dark mode","aria-label":s?"Switch to light mode":"Switch to dark mode",children:e.jsxs("div",{className:"relative w-5 h-5",children:[e.jsx(Re,{className:`absolute inset-0 w-5 h-5 transition-all duration-300 ${s?"rotate-90 scale-0 opacity-0":"rotate-0 scale-100 opacity-100"}`}),e.jsx(We,{className:`absolute inset-0 w-5 h-5 transition-all duration-300 ${s?"rotate-0 scale-100 opacity-100":"-rotate-90 scale-0 opacity-0"}`})]})}),e.jsxs("button",{onClick:we,className:"flex items-center space-x-2 px-4 py-3 bg-white/50 dark:bg-dark-700/50 backdrop-blur-sm border border-white/30 dark:border-dark-600/30 text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 rounded-xl text-sm font-medium transition-all duration-300 hover:scale-105 hover:shadow-lg","aria-label":"Export data backup",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Backup"})]})]})]})})})},ds=()=>{const s=Ae(),a=[{to:"/",icon:he,label:"Dashboard"},{to:"/time",icon:O,label:"Time"},{to:"/projects",icon:re,label:"Projects"},{to:"/weekly",icon:F,label:"Weekly"},{to:"/settings",icon:q,label:"Settings"}];return e.jsx("nav",{className:"mobile-nav",role:"navigation","aria-label":"Mobile navigation",children:e.jsx("div",{className:"flex justify-around",children:a.map(r=>{const n=s.pathname===r.to;return e.jsxs(ue,{to:r.to,className:`mobile-nav-item ${n?"active":""}`,"aria-label":`Navigate to ${r.label}`,children:[e.jsx(r.icon,{className:"w-5 h-5 mb-1"}),e.jsx("span",{children:r.label})]},r.to)})})})},A=s=>ye(new Date(s),"MMM d, yyyy"),de=s=>ye(new Date(s),"h:mm a"),N=s=>{const a=Math.floor(s/60),r=s%60;return a>0?`${a}h ${r}m`:`${r}m`},V=(s=new Date)=>{const a=Qe(s,{weekStartsOn:1}),r=Xe(s,{weekStartsOn:1});return{start:a,end:r}},ke=()=>{const[s,a]=p.useState(null),[r,n]=p.useState(0),[t,c]=p.useState(!1);p.useEffect(()=>{let o=null;return t&&s?o=setInterval(()=>{n(x=>x+1)},1e3):clearInterval(o),()=>clearInterval(o)},[t,s]);const h=p.useCallback((o,x,S,b)=>{const C={type:o,projectId:x,description:S,contentType:b,date:new Date().toISOString(),startTime:new Date().toISOString(),status:"active"};a(C),n(0),c(!0),w.success(`Started ${o} block`)},[]),k=p.useCallback(async()=>{if(!s)return;const o=new Date().toISOString(),x={...s,endTime:o,duration:Math.floor(r/60),status:"completed"};try{await ns(x),w.success("Time block saved!"),a(null),n(0),c(!1)}catch{w.error("Failed to save time block")}},[s,r]),g=p.useCallback(()=>{c(!1)},[]),d=p.useCallback(()=>{c(!0)},[]);return{currentBlock:s,elapsedTime:r,isActive:t,startTimeBlock:h,endTimeBlock:k,pauseTimeBlock:g,resumeTimeBlock:d}},L=[{value:"api-docs",label:"API Documentation",icon:"ğŸ”Œ",color:"blue"},{value:"user-guides",label:"User Guides",icon:"ğŸ“–",color:"green"},{value:"release-notes",label:"Release Notes",icon:"ğŸ“‹",color:"purple"},{value:"tutorials",label:"Tutorials",icon:"ğŸ“",color:"yellow"},{value:"technical-specs",label:"Technical Specifications",icon:"âš™ï¸",color:"gray"},{value:"reference",label:"Reference Documentation",icon:"ğŸ“š",color:"indigo"},{value:"troubleshooting",label:"Troubleshooting Guides",icon:"ğŸ”§",color:"red"},{value:"onboarding",label:"Onboarding Materials",icon:"ğŸš€",color:"teal"},{value:"other",label:"Other Documentation",icon:"ğŸ“„",color:"gray"}],te=[{value:"research",label:"Research & Discovery",icon:"ğŸ”",color:"blue"},{value:"writing",label:"Writing & Creation",icon:"âœï¸",color:"green"},{value:"review-editing",label:"Review & Editing",icon:"ğŸ“",color:"yellow"},{value:"version-updates",label:"Version Updates",icon:"ğŸ”„",color:"purple"},{value:"publishing",label:"Publishing & Distribution",icon:"ğŸ“¤",color:"indigo"},{value:"maintenance",label:"Maintenance & Updates",icon:"ğŸ› ï¸",color:"orange"}],ae=[{value:"draft-1",label:"Draft v1 (Initial)",color:"gray"},{value:"draft-2",label:"Draft v2 (Technical Review)",color:"blue"},{value:"draft-3",label:"Draft v3 (Stakeholder Review)",color:"yellow"},{value:"draft-final",label:"Draft (Final Edits)",color:"orange"},{value:"published-1-0",label:"Published v1.0",color:"green"},{value:"update-minor",label:"Update in Progress (Minor)",color:"purple"},{value:"update-major",label:"Major Revision in Progress",color:"red"},{value:"deprecated",label:"Deprecated",color:"gray"}],me=[{value:"current",label:"Current (< 3 months)",color:"green",daysThreshold:90},{value:"stale",label:"Stale (3-6 months)",color:"yellow",daysThreshold:180},{value:"outdated",label:"Outdated (6+ months)",color:"orange",daysThreshold:365},{value:"critical",label:"Critical - Needs Urgent Update",color:"red",daysThreshold:null},{value:"deprecated",label:"Deprecated",color:"gray",daysThreshold:null}],H=s=>L.find(a=>a.value===s)||L[L.length-1],Se=s=>te.find(a=>a.value===s)||te[0],ms=s=>ae.find(a=>a.value===s)||ae[0],xs=s=>me.find(a=>a.value===s)||me[0],G=s=>{if(!s)return"critical";const a=Math.floor((new Date-new Date(s))/(1e3*60*60*24));return a<=90?"current":a<=180?"stale":a<=365?"outdated":"critical"},xe=({size:s="medium",color:a="primary",text:r=null})=>{const n={small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12"},t={primary:"border-primary-600",white:"border-white",gray:"border-gray-600"};return e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[e.jsx("div",{className:`
          ${n[s]} 
          border-2 
          ${t[a]} 
          border-t-transparent 
          rounded-full 
          animate-spin
        `,role:"status","aria-label":"Loading"}),r&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r})]})},us=()=>e.jsxs("div",{className:"card animate-pulse",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded"})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded-full w-20"}),e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded-full w-16"})]}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-24"})]})]}),hs=({count:s=3})=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[...Array(s)].map((a,r)=>e.jsx(us,{},r))}),ps=()=>{const{currentBlock:s,elapsedTime:a,isActive:r}=ke(),[n,t]=p.useState({totalMinutes:0,researchMinutes:0,writingMinutes:0,completedTasks:0}),c=E(async()=>{const d=new Date;d.setHours(0,0,0,0);const o=new Date(d);return o.setDate(o.getDate()+1),await j.timeBlocks.where("date").between(d.toISOString(),o.toISOString()).toArray()},[]),h=E(()=>j.projects.where("status").notEqual("archived").toArray(),[]),k=p.useMemo(()=>c?c.reduce((d,o)=>(o.duration&&(d.totalMinutes+=o.duration,o.type==="research"&&(d.researchMinutes+=o.duration),o.type==="writing"&&(d.writingMinutes+=o.duration),o.status==="completed"&&(d.completedTasks+=1)),d),{totalMinutes:0,researchMinutes:0,writingMinutes:0,completedTasks:0}):{totalMinutes:0,researchMinutes:0,writingMinutes:0,completedTasks:0},[c]);p.useEffect(()=>{t(k)},[k]);const g=p.useMemo(()=>h?h.filter(d=>{const o=G(d.lastUpdated);return o==="outdated"||o==="critical"}):[],[h]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600",children:A(new Date)})]}),r&&s&&e.jsxs("div",{className:"flex items-center space-x-2 bg-green-50 text-green-700 px-4 py-2 rounded-lg",children:[e.jsx(O,{className:"w-5 h-5 animate-pulse"}),e.jsxs("span",{children:["Active: ",N(Math.floor(a/60))]})]})]}),e.jsxs("div",{className:"responsive-grid lg:grid-cols-4",children:[e.jsx("div",{className:"stat-card group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"responsive-text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Total Time Today"}),e.jsx("p",{className:"text-2xl md:text-3xl font-bold gradient-text mt-2",children:N(n.totalMinutes)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"+12% from yesterday"})]}),e.jsx("div",{className:"stat-icon p-3 md:p-4 bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl shadow-lg",children:e.jsx(O,{className:"w-6 h-6 md:w-8 md:h-8 text-white"})})]})}),e.jsx("div",{className:"stat-card group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Research Time"}),e.jsx("p",{className:"text-3xl font-bold gradient-text mt-2",children:N(n.researchMinutes)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Deep investigation"})]}),e.jsx("div",{className:"stat-icon p-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl shadow-lg",children:e.jsx(X,{className:"w-8 h-8 text-white"})})]})}),e.jsx("div",{className:"stat-card group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Writing Time"}),e.jsx("p",{className:"text-3xl font-bold gradient-text mt-2",children:N(n.writingMinutes)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Creative flow"})]}),e.jsx("div",{className:"stat-icon p-4 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl shadow-lg",children:e.jsx(Y,{className:"w-8 h-8 text-white"})})]})}),e.jsx("div",{className:"stat-card group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:"Tasks Completed"}),e.jsx("p",{className:"text-3xl font-bold gradient-text mt-2",children:n.completedTasks}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"Great progress!"})]}),e.jsx("div",{className:"stat-icon p-4 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl shadow-lg",children:e.jsx(B,{className:"w-8 h-8 text-white"})})]})})]}),g&&g.length>0&&e.jsxs("div",{className:"debt-alert card border-l-4 border-orange-500 bg-gradient-to-r from-orange-50/80 to-red-50/80 dark:from-orange-900/20 dark:to-red-900/20 backdrop-blur-sm animate-slide-up",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl animate-pulse-soft",children:e.jsx(_,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-orange-800 dark:text-orange-300",children:"Documentation Debt Alert"}),e.jsxs("p",{className:"text-sm text-orange-600 dark:text-orange-400",children:[g.length," document",g.length>1?"s need":" needs"," immediate attention"]})]})]}),e.jsx("div",{className:"space-y-3",children:g.slice(0,3).map((d,o)=>{const x=H(d.contentType),S=G(d.lastUpdated);return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/80 dark:bg-dark-800/80 backdrop-blur-sm rounded-xl border border-orange-200/50 dark:border-orange-700/30 hover:shadow-lg transition-all duration-300",style:{animationDelay:`${o*100}ms`},children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:x.icon}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:d.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:x.label})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${S==="critical"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300"}`,children:S==="critical"?"ğŸš¨ Critical":"âš ï¸ Outdated"})]},d.id)})}),g.length>3&&e.jsx("div",{className:"mt-4 p-3 bg-white/50 dark:bg-dark-800/50 backdrop-blur-sm rounded-xl border border-orange-200/30 dark:border-orange-700/20",children:e.jsxs("p",{className:"text-sm text-orange-700 dark:text-orange-300 font-medium",children:["ğŸ“š +",g.length-3," more documents need updates"]})}),e.jsxs($,{to:"/projects",className:"btn-primary mt-6 inline-flex items-center space-x-2 glow-effect",children:[e.jsx("span",{children:"Review Documentation Debt"}),e.jsx(_,{className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Today's Time Blocks"}),c===void 0?e.jsx(xe,{text:"Loading time blocks..."}):c&&c.length>0?e.jsx("div",{className:"space-y-2",children:c.map(d=>{const o=Se(d.type),x=H(d.contentType);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-2 h-8 rounded bg-${o.color}-500`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.description||`${o.label} - ${x.label}`}),e.jsxs("p",{className:"text-sm text-gray-600",children:[x.icon," ",x.label," â€¢ ",N(d.duration||0)]})]})]}),d.status==="completed"?e.jsx(B,{className:"w-5 h-5 text-green-500"}):e.jsx(ge,{className:"w-5 h-5 text-yellow-500"})]},d.id)})}):e.jsx("p",{className:"text-gray-500",children:"No time blocks recorded yet today."}),e.jsx($,{to:"/time",className:"mt-4 block text-center btn-primary",children:"Start Time Tracking"})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Active Projects"}),h===void 0?e.jsx(xe,{text:"Loading projects..."}):h&&h.length>0?e.jsx("div",{className:"space-y-2",children:h.slice(0,5).map(d=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[d.team," â€¢ ",d.status]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[d.progress||0,"%"]}),e.jsx("div",{className:"w-20 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary-500 transition-all",style:{width:`${d.progress||0}%`}})})]})]},d.id))}):e.jsx("p",{className:"text-gray-500",children:"No active projects."}),e.jsx($,{to:"/projects",className:"mt-4 block text-center btn-primary",children:"Manage Projects"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs($,{to:"/time",className:"flex flex-col items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx(O,{className:"w-8 h-8 text-primary-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Start Timer"})]}),e.jsxs($,{to:"/projects",className:"flex flex-col items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx(re,{className:"w-8 h-8 text-primary-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"New Project"})]}),e.jsxs($,{to:"/weekly",className:"flex flex-col items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx(F,{className:"w-8 h-8 text-primary-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Weekly Report"})]}),e.jsxs($,{to:"/settings",className:"flex flex-col items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx(q,{className:"w-8 h-8 text-primary-600 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Settings"})]})]})]})]})},gs=()=>{const{currentBlock:s,elapsedTime:a,isActive:r,startTimeBlock:n,endTimeBlock:t,pauseTimeBlock:c,resumeTimeBlock:h}=ke(),[k,g]=p.useState("writing"),[d,o]=p.useState("user-guides"),[x,S]=p.useState(""),[b,C]=p.useState(""),P=E(()=>j.projects.where("status").notEqual("archived").toArray(),[]),I=E(async()=>{const i=new Date;i.setHours(0,0,0,0);const v=new Date(i);return v.setDate(v.getDate()+1),await j.timeBlocks.where("date").between(i.toISOString(),v.toISOString()).reverse().toArray()},[]),l=te.map(i=>({value:i.value,label:i.label,icon:i.value==="research"?X:i.value==="writing"?Y:i.value==="review-editing"?F:i.value==="version-updates"?K:i.value==="publishing"?le:q,color:i.color})),D=()=>{const i=[];return x||i.push("Please select a project"),b.trim()||i.push("Please provide a task description"),i},T=()=>{const i=D();if(i.length>0){i.forEach(v=>w.error(v));return}n(k,x,b,d),C("")},z=()=>{t()};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Time Tracking"}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-6xl font-mono font-bold text-gray-900 mb-4",children:N(Math.floor(a/60))}),s?e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-lg text-gray-600",children:s.description||s.type}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[r?e.jsxs("button",{onClick:c,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(Le,{className:"w-5 h-5"}),e.jsx("span",{children:"Pause"})]}):e.jsxs("button",{onClick:h,className:"btn-primary flex items-center space-x-2",children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{children:"Resume"})]}),e.jsxs("button",{onClick:z,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200 font-medium flex items-center space-x-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{children:"Stop"})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Work Phase"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:l.map(i=>e.jsxs("button",{onClick:()=>g(i.value),className:`p-3 rounded-lg border-2 transition-all ${k===i.value?`border-${i.color}-500 bg-${i.color}-50`:"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(i.icon,{className:`w-5 h-5 mx-auto mb-1 ${k===i.value?`text-${i.color}-600`:"text-gray-600"}`}),e.jsx("span",{className:"text-xs text-center",children:i.label})]},i.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content Type"}),e.jsx("select",{value:d,onChange:i=>o(i.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:L.map(i=>e.jsxs("option",{value:i.value,children:[i.icon," ",i.label]},i.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project"}),e.jsxs("select",{value:x,onChange:i=>S(i.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent","aria-describedby":"project-error",required:!0,children:[e.jsx("option",{value:"",children:"Select a project..."}),P==null?void 0:P.map(i=>e.jsxs("option",{value:i.id,children:[i.name," (",i.team,")"]},i.id))]}),!x&&e.jsx("p",{id:"project-error",className:"mt-1 text-sm text-red-600",children:"Project selection is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("input",{type:"text",value:b,onChange:i=>C(i.target.value),placeholder:"What specific task are you working on?",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent","aria-describedby":"description-error",required:!0}),!b.trim()&&e.jsx("p",{id:"description-error",className:"mt-1 text-sm text-red-600",children:"Task description is required"})]}),e.jsxs("button",{onClick:T,className:"btn-primary flex items-center justify-center space-x-2 w-full",children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{children:"Start Timer"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Today's Sessions"}),I&&I.length>0?e.jsx("div",{className:"space-y-3",children:I.map(i=>{const v=Se(i.type),R=H(i.contentType),m=v.value==="research"?X:v.value==="writing"?Y:v.value==="review-editing"?F:v.value==="version-updates"?K:v.value==="publishing"?le:q;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 bg-${v.color}-100 rounded-lg`,children:U.createElement(m,{className:`w-5 h-5 text-${v.color}-600`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.description||`${v.label} - ${R.label}`}),e.jsxs("p",{className:"text-sm text-gray-600",children:[R.icon," ",R.label," â€¢ ",de(i.startTime)," - ",i.endTime?de(i.endTime):"In progress"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:N(i.duration||0)}),e.jsx("p",{className:"text-sm text-gray-600",children:v.label})]})]},i.id)})}):e.jsx("p",{className:"text-gray-500",children:"No time blocks recorded today yet."})]})]})},Te=p.memo(({project:s,onEdit:a,onArchive:r,getStatusIcon:n,getStatusColor:t,getPriorityColor:c,statuses:h,priorities:k})=>{var C,P;const g=n(s.status),d=t(s.status),o=c(s.priority),x=H(s.contentType),S=ms(s.version),b=xs(s.maintenanceStatus||G(s.lastUpdated));return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"text-lg font-semibold",children:s.name}),e.jsx("span",{className:"text-lg",children:x.icon})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.team," â€¢ ",x.label]}),e.jsx("p",{className:"text-xs text-gray-500",children:S.label})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>a(s),className:"p-2 text-gray-600 hover:text-gray-900","aria-label":"Edit project",children:e.jsx(je,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>r(s.id),className:"p-2 text-gray-600 hover:text-gray-900","aria-label":"Archive project",children:e.jsx(be,{className:"w-4 h-4"})})]})]}),s.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:s.description}),(b.value==="outdated"||b.value==="critical")&&e.jsxs("div",{className:`flex items-center space-x-2 p-2 mb-3 rounded-lg bg-${b.color}-50 border border-${b.color}-200`,children:[e.jsx(_,{className:`w-4 h-4 text-${b.color}-600`}),e.jsxs("span",{className:`text-sm text-${b.color}-700`,children:["Documentation Debt: ",b.label]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`flex items-center space-x-1 text-sm px-2 py-1 bg-${d}-100 text-${d}-700 rounded`,children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{children:(C=h.find(I=>I.value===s.status))==null?void 0:C.label})]}),e.jsx("span",{className:`text-sm px-2 py-1 bg-${o}-100 text-${o}-700 rounded`,children:(P=k.find(I=>I.value===s.priority))==null?void 0:P.label})]}),s.dueDate&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Due: ",A(s.dueDate)]})]}),s.lastUpdated&&e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Last updated: ",A(s.lastUpdated)]}),e.jsx("span",{className:`px-2 py-1 rounded bg-${b.color}-100 text-${b.color}-700`,children:b.label})]})]})]})});Te.displayName="ProjectCard";const js=()=>{const[s,a]=p.useState(!1),[r,n]=p.useState(null),[t,c]=p.useState({name:"",team:"",description:"",status:"planning",priority:"medium",dueDate:"",contentType:"user-guides",version:"draft-1",lastUpdated:new Date().toISOString().split("T")[0]}),h=E(()=>j.projects.reverse().toArray(),[]),k=["Team Alpha","Team Beta","Team Gamma","Other"],g=[{value:"planning",label:"Planning",color:"blue"},{value:"in-progress",label:"In Progress",color:"yellow"},{value:"review",label:"Review",color:"purple"},{value:"published",label:"Published",color:"green"},{value:"archived",label:"Archived",color:"gray"}],d=[{value:"high",label:"High",color:"red"},{value:"medium",label:"Medium",color:"yellow"},{value:"low",label:"Low",color:"green"}],o=()=>{const l=[];return t.name.trim()||l.push("Project name is required"),t.team||l.push("Team selection is required"),t.dueDate&&new Date(t.dueDate)<new Date&&l.push("Due date cannot be in the past"),l},x=async l=>{l.preventDefault();const D=o();if(D.length>0){D.forEach(T=>w.error(T));return}try{const T={...t,maintenanceStatus:G(t.lastUpdated)};r?(await oe(r.id,T),w.success("Project updated successfully")):(await is(T),w.success("Project created successfully")),c({name:"",team:"",description:"",status:"planning",priority:"medium",dueDate:"",contentType:"user-guides",version:"draft-1",lastUpdated:new Date().toISOString().split("T")[0]}),a(!1),n(null)}catch{w.error("Failed to save project")}},S=p.useCallback(l=>{n(l),c({name:l.name,team:l.team,description:l.description||"",status:l.status,priority:l.priority||"medium",dueDate:l.dueDate||"",contentType:l.contentType||"user-guides",version:l.version||"draft-1",lastUpdated:l.lastUpdated||new Date().toISOString().split("T")[0]}),a(!0)},[]),b=p.useCallback(async l=>{await oe(l,{status:"archived"}),w.success("Project archived")},[]),C=l=>{switch(l){case"planning":return O;case"in-progress":return ge;case"review":return je;case"published":return B;case"archived":return be;default:return ie}},P=l=>{const D=g.find(T=>T.value===l);return D?D.color:"gray"},I=l=>{const D=d.find(T=>T.value===l);return D?D.color:"gray"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),e.jsxs("button",{onClick:()=>a(!s),className:"btn-primary flex items-center space-x-2",children:[e.jsx(Z,{className:"w-5 h-5"}),e.jsx("span",{children:"New Project"})]})]}),s&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:r?"Edit Project":"New Project"}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name"}),e.jsx("input",{type:"text",value:t.name,onChange:l=>c({...t,name:l.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent","aria-describedby":"name-error"}),!t.name.trim()&&e.jsx("p",{id:"name-error",className:"mt-1 text-sm text-red-600",children:"Project name is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content Type"}),e.jsx("select",{value:t.contentType,onChange:l=>c({...t,contentType:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:L.map(l=>e.jsxs("option",{value:l.value,children:[l.icon," ",l.label]},l.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Team"}),e.jsxs("select",{value:t.team,onChange:l=>c({...t,team:l.target.value}),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent","aria-describedby":"team-error",children:[e.jsx("option",{value:"",children:"Select team..."}),k.map(l=>e.jsx("option",{value:l,children:l},l))]}),!t.team&&e.jsx("p",{id:"team-error",className:"mt-1 text-sm text-red-600",children:"Team selection is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Version"}),e.jsx("select",{value:t.version,onChange:l=>c({...t,version:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:ae.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("select",{value:t.status,onChange:l=>c({...t,status:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:g.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsx("select",{value:t.priority,onChange:l=>c({...t,priority:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:d.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",value:t.dueDate,onChange:l=>c({...t,dueDate:l.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent","aria-describedby":"due-date-error"}),t.dueDate&&new Date(t.dueDate)<new Date&&e.jsx("p",{id:"due-date-error",className:"mt-1 text-sm text-red-600",children:"Due date cannot be in the past"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Updated"}),e.jsx("input",{type:"date",value:t.lastUpdated,onChange:l=>c({...t,lastUpdated:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:t.description,onChange:l=>c({...t,description:l.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>{a(!1),n(null),c({name:"",team:"",description:"",status:"planning",priority:"medium",dueDate:"",contentType:"user-guides",version:"draft-1",lastUpdated:new Date().toISOString().split("T")[0]})},className:"btn-secondary",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn-primary",children:[r?"Update":"Create"," Project"]})]})]})]}),h===void 0?e.jsx(hs,{count:4}):e.jsx("div",{className:"responsive-grid",children:h==null?void 0:h.map(l=>e.jsx(Te,{project:l,onEdit:S,onArchive:b,getStatusIcon:C,getStatusColor:P,getPriorityColor:I,statuses:g,priorities:d},l.id))}),h&&h.length===0&&!s&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ie,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No projects yet. Create your first project!"})]})]})},bs=()=>{const[s,a]=p.useState(V()),[r,n]=p.useState([""]),[t,c]=p.useState([""]),[h,k]=p.useState(""),g=E(async()=>await j.timeBlocks.where("date").between(s.start.toISOString(),s.end.toISOString()).toArray(),[s]),d=E(()=>j.projects.toArray(),[]),o=U.useMemo(()=>g?g.reduce((m,u)=>{if(u.duration)switch(m.total+=u.duration,u.type){case"deep-work":m.deepWork+=u.duration;break;case"meeting":m.meetings+=u.duration;break;case"planning":m.planning+=u.duration;break}return m},{total:0,deepWork:0,meetings:0,planning:0}):{total:0,deepWork:0,meetings:0,planning:0},[g]),x=U.useMemo(()=>{if(!g||!d)return[];const m={};return g.forEach(u=>{u.projectId&&u.duration&&(m[u.projectId]||(m[u.projectId]=0),m[u.projectId]+=u.duration)}),Object.entries(m).map(([u,y])=>{const f=d.find(De=>De.id===parseInt(u));return{projectName:(f==null?void 0:f.name)||"Unknown Project",team:(f==null?void 0:f.team)||"",minutes:y}}).sort((u,y)=>y.minutes-u.minutes)},[g,d]),S=()=>{n([...r,""])},b=m=>{n(r.filter((u,y)=>y!==m))},C=(m,u)=>{const y=[...r];y[m]=u,n(y)},P=()=>{c([...t,""])},I=m=>{c(t.filter((u,y)=>y!==m))},l=(m,u)=>{const y=[...t];y[m]=u,c(y)},D=()=>{const m=r.filter(f=>f.trim()!==""),u=t.filter(f=>f.trim()!==""),y=`Weekly Summary - ${A(s.start)} to ${A(s.end)}

Time Breakdown:
â€¢ Total Time: ${N(o.total)}
â€¢ Deep Work: ${N(o.deepWork)}
â€¢ Meetings: ${N(o.meetings)}
â€¢ Planning: ${N(o.planning)}

Project Time Allocation:
${x.map(f=>`â€¢ ${f.projectName} (${f.team}): ${N(f.minutes)}`).join(`
`)}

Completed This Week:
${m.map(f=>`â€¢ ${f}`).join(`
`)}

In Progress:
${u.map(f=>`â€¢ ${f}`).join(`
`)}

Generated on ${A(new Date)}`;k(y)},T=async()=>{try{await navigator.clipboard.writeText(h),w.success("Summary copied to clipboard!")}catch{w.error("Failed to copy to clipboard")}},z=()=>{const m=`Weekly Summary - ${A(s.start)} to ${A(s.end)}`,u=encodeURIComponent(h);window.open(`mailto:?subject=${encodeURIComponent(m)}&body=${u}`)};p.useEffect(()=>{o.total>0&&D()},[o,r,t,x]);const i=()=>{const m=new Date(s.start);m.setDate(m.getDate()-7),a(V(m))},v=()=>{const m=new Date(s.start);m.setDate(m.getDate()+7),a(V(m))},R=()=>{a(V())};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Weekly Summary"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:i,className:"btn-secondary",children:"â† Previous"}),e.jsxs("span",{className:"font-medium",children:[A(s.start)," - ",A(s.end)]}),e.jsx("button",{onClick:v,className:"btn-secondary",children:"Next â†’"}),e.jsx("button",{onClick:R,className:"btn-primary",children:"Current Week"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Time"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N(o.total)})]}),e.jsx(O,{className:"w-8 h-8 text-primary-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Deep Work"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N(o.deepWork)})]}),e.jsx(_e,{className:"w-8 h-8 text-purple-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Meetings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N(o.meetings)})]}),e.jsx(B,{className:"w-8 h-8 text-green-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Planning"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N(o.planning)})]}),e.jsx(Fe,{className:"w-8 h-8 text-blue-500"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Project Time Allocation"}),x.length>0?e.jsx("div",{className:"space-y-3",children:x.map((m,u)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:m.projectName}),e.jsx("p",{className:"text-sm text-gray-600",children:m.team})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:N(m.minutes)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[Math.round(m.minutes/o.total*100),"%"]})]})]},u))}):e.jsx("p",{className:"text-gray-500",children:"No time tracked this week."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Completed This Week"}),e.jsxs("button",{onClick:S,className:"btn-primary flex items-center space-x-2",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:"Add"})]})]}),e.jsx("div",{className:"space-y-2",children:r.map((m,u)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:m,onChange:y=>C(u,y.target.value),placeholder:"What did you complete?",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>b(u),className:"p-2 text-gray-600 hover:text-red-600",children:e.jsx(ee,{className:"w-4 h-4"})})]},u))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"In Progress"}),e.jsxs("button",{onClick:P,className:"btn-primary flex items-center space-x-2",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:"Add"})]})]}),e.jsx("div",{className:"space-y-2",children:t.map((m,u)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:m,onChange:y=>l(u,y.target.value),placeholder:"What are you working on?",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>I(u),className:"p-2 text-gray-600 hover:text-red-600",children:e.jsx(ee,{className:"w-4 h-4"})})]},u))})]})]}),h&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Email Summary"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:T,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{children:"Copy"})]}),e.jsxs("button",{onClick:z,className:"btn-primary flex items-center space-x-2",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:"Email"})]})]})]}),e.jsx("pre",{className:"bg-gray-50 p-4 rounded-lg text-sm whitespace-pre-wrap",children:h})]})]})},ys=()=>{const[s,a]=p.useState(localStorage.getItem("lastBackupDate")),[r,n]=p.useState(!1),t=p.useRef(null),c=async()=>{await we(),a(new Date().toISOString())},h=()=>{var x;(x=t.current)==null||x.click()},k=async x=>{var b;const S=(b=x.target.files)==null?void 0:b[0];S&&(await cs(S),t.current&&(t.current.value=""))},g=async()=>{if(!r){n(!0);return}try{await j.timeBlocks.clear(),await j.projects.clear(),await j.weeklySummaries.clear(),await j.preferences.clear(),localStorage.removeItem("lastBackupDate"),a(null),w.success("All data cleared successfully"),n(!1),setTimeout(()=>window.location.reload(),1e3)}catch(x){w.error("Failed to clear data: "+x.message),n(!1)}},d=()=>{n(!1)},o=x=>x?new Date(x).toLocaleString():"Never";return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(He,{className:"w-6 h-6 text-primary-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Data Management"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Last Backup"}),e.jsx("p",{className:"font-medium",children:o(s)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Export Data"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Download a backup of all your data as a JSON file"})]}),e.jsxs("button",{onClick:c,className:"btn-primary flex items-center space-x-2",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{children:"Export"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Import Data"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Restore data from a backup file (this will replace all existing data)"})]}),e.jsxs("div",{children:[e.jsx("input",{ref:t,type:"file",accept:".json",onChange:k,className:"hidden"}),e.jsxs("button",{onClick:h,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{children:"Import"})]})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Ge,{className:"w-6 h-6 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Privacy & Storage"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(B,{className:"w-5 h-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Local Storage Only"}),e.jsx("p",{className:"text-sm text-gray-600",children:"All your data is stored locally in your browser using IndexedDB. No data is sent to external servers."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(B,{className:"w-5 h-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"No Analytics or Tracking"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This application doesn't use any analytics, tracking, or third-party services."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(B,{className:"w-5 h-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Offline Capable"}),e.jsx("p",{className:"text-sm text-gray-600",children:"The application works completely offline after the initial load."})]})]})]})]}),e.jsxs("div",{className:"card border-red-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(_,{className:"w-6 h-6 text-red-600"}),e.jsx("h3",{className:"text-lg font-semibold text-red-600",children:"Danger Zone"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Clear All Data"}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"This will permanently delete all your time blocks, projects, and settings. This action cannot be undone. Make sure to export your data first!"}),r?e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"font-medium text-red-800",children:"Are you absolutely sure? This will delete everything!"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:g,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200 font-medium",children:"Yes, Delete Everything"}),e.jsx("button",{onClick:d,className:"btn-secondary",children:"Cancel"})]})]}):e.jsxs("button",{onClick:g,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200 font-medium flex items-center space-x-2",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:"Clear All Data"})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"About"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Version:"})," 1.0.0"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Built with:"})," React, Vite, Tailwind CSS, Dexie.js"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"License:"})," MIT"]}),e.jsx("p",{children:"A productivity dashboard designed for technical writers to track time, manage projects, and generate weekly reports."})]})]})]})};function fs(){return e.jsx(M,{fallbackMessage:"The Technical Writer Dashboard encountered an error. Please try refreshing the page.",children:e.jsx(ls,{children:e.jsx(Me,{basename:"/technical-writer-dashboard/",children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 dark:from-dark-900 dark:via-dark-800 dark:to-indigo-950 transition-all duration-500",children:[e.jsx(M,{fallbackMessage:"Navigation component failed to load.",children:e.jsx(os,{})}),e.jsx("main",{className:"container mx-auto px-4 py-8 pb-20 md:pb-8",children:e.jsxs($e,{children:[e.jsx(W,{path:"/",element:e.jsx(M,{fallbackMessage:"Dashboard component failed to load.",children:e.jsx(ps,{})})}),e.jsx(W,{path:"/time",element:e.jsx(M,{fallbackMessage:"Time Tracker component failed to load.",children:e.jsx(gs,{})})}),e.jsx(W,{path:"/projects",element:e.jsx(M,{fallbackMessage:"Project Manager component failed to load.",children:e.jsx(js,{})})}),e.jsx(W,{path:"/weekly",element:e.jsx(M,{fallbackMessage:"Weekly Summary component failed to load.",children:e.jsx(bs,{})})}),e.jsx(W,{path:"/settings",element:e.jsx(M,{fallbackMessage:"Settings component failed to load.",children:e.jsx(ys,{})})})]})}),e.jsx(M,{fallbackMessage:"Mobile navigation failed to load.",children:e.jsx(ds,{})}),e.jsx(Je,{position:"top-right",toastOptions:{className:"dark:bg-dark-800 dark:text-white",style:{background:"var(--toast-bg)",color:"var(--toast-color)"}}})]})})})})}se.createRoot(document.getElementById("root")).render(e.jsx(U.StrictMode,{children:e.jsx(fs,{})}));
